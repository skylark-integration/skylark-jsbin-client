{"version":3,"sources":["admin/admin.js"],"names":["define","$","jsbin","submit","event","preventDefault","form","this","url","find","val","$csrf","$responseFeedback","reg","RegExp","window","host","match","bin","rev","show","text","ajax","attr","data","_csrf","type","dataType","complete","jqXHR","parseJSON","responseText","status","all","username"],"mappings":";;;;;;;AAAAA,QACE,iBACC,YACD,SAAUC,EAAEC,GACZ,aAIAD,EAAE,aAAaE,OAAO,SAAUC,GAC9BA,EAAMC,iBAEN,IAAIC,EAAOL,EAAEM,MACTC,EAAMF,EAAKG,KAAK,mBAAmBC,MACnCC,EAAQL,EAAKG,KAAK,qBAClBG,EAAoBN,EAAKG,KAAK,qBAC9BI,EAAM,IAAIC,OAAO,mBAAqBC,OAAOC,KAAO,sCAAuC,KAC3FC,EAAQT,EAAIS,MAAMJ,GAClBK,EAAMD,EAAM,IAAM,GAClBE,EAAMF,EAAM,IAAM,SAItBL,EAAkBQ,OAAOC,KAAK,eAE9BpB,EAAEqB,MACAd,IAAKF,EAAKiB,KAAK,UACfC,MACEN,IAAKA,EACLC,IAAKA,EACLM,MAAOd,EAAMD,OAEfgB,KAAM,OACNC,SAAU,OACVC,SAAU,SAAUC,GAClB,IAAIL,EAAOvB,EAAE6B,UAAUD,EAAME,kBACR,MAAjBF,EAAMG,QACRpB,EAAkBQ,OAAOC,KAAK,2BAEX,MAAjBQ,EAAMG,QAAkBR,EAAKS,KAC/BrB,EAAkBQ,OAAOC,KAAKG,EAAKS,UAO3ChC,EAAE,8BAA8BE,OAAO,SAAUC,GAC/CA,EAAMC,iBAEN,IAAIC,EAAOL,EAAEM,MACT2B,EAAW5B,EAAKG,KAAK,wBAAwBC,MAC7CC,EAAQL,EAAKG,KAAK,qBAClBG,EAAoBN,EAAKG,KAAK,qBAElCG,EAAkBQ,OAAOC,KAAK,eAE9BpB,EAAEqB,MACAd,IAAKF,EAAKiB,KAAK,UACfC,MACEU,SAAUA,EACVT,MAAOd,EAAMD,OAEfgB,KAAM,OACNC,SAAU,OACVC,SAAU,SAAUC,GAClB,IAAIL,EAAOvB,EAAE6B,UAAUD,EAAME,kBACR,MAAjBF,EAAMG,QACRpB,EAAkBQ,OAAOC,KAAK,oBAEX,MAAjBQ,EAAMG,QAAkBR,EAAKS,KAC/BrB,EAAkBQ,OAAOC,KAAKG,EAAKS","file":"../../admin/admin.js","sourcesContent":["define([\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n  'use strict';\r\n\r\n  /* globals $ */\r\n\r\n  $('#flag-bin').submit(function (event) {\r\n    event.preventDefault();\r\n\r\n    var form = $(this);\r\n    var url = form.find('input[name=bin]').val();\r\n    var $csrf = form.find('input[name=_csrf]');\r\n    var $responseFeedback = form.find('.responseFeedback');\r\n    var reg = new RegExp('(?:https*:\\\\/\\\\/' + window.host + '\\\\/)*([\\\\w\\\\d-_]+)\\\\/*(\\\\d+)*\\\\/*.*', 'i');\r\n    var match = url.match(reg);\r\n    var bin = match[1] || '';\r\n    var rev = match[2] || 'latest';\r\n\r\n    // console.log(url, bin, rev);\r\n\r\n    $responseFeedback.show().text('Checking...');\r\n\r\n    $.ajax({\r\n      url: form.attr('action'),\r\n      data: {\r\n        bin: bin,\r\n        rev: rev,\r\n        _csrf: $csrf.val()\r\n      },\r\n      type: 'POST',\r\n      dataType: 'json',\r\n      complete: function (jqXHR) {\r\n        var data = $.parseJSON(jqXHR.responseText) || {};\r\n        if (jqXHR.status === 200) {\r\n          $responseFeedback.show().text('Bin flagged succesfully');\r\n        }\r\n        if (jqXHR.status === 400 && data.all) {\r\n          $responseFeedback.show().text(data.all);\r\n        }\r\n      }\r\n    });\r\n  });\r\n\r\n\r\n  $('#flag-user, #validate-user').submit(function (event) {\r\n    event.preventDefault();\r\n\r\n    var form = $(this);\r\n    var username = form.find('input[name=username]').val();\r\n    var $csrf = form.find('input[name=_csrf]');\r\n    var $responseFeedback = form.find('.responseFeedback');\r\n\r\n    $responseFeedback.show().text('Checking...');\r\n\r\n    $.ajax({\r\n      url: form.attr('action'),\r\n      data: {\r\n        username: username,\r\n        _csrf: $csrf.val()\r\n      },\r\n      type: 'POST',\r\n      dataType: 'json',\r\n      complete: function (jqXHR) {\r\n        var data = $.parseJSON(jqXHR.responseText) || {};\r\n        if (jqXHR.status === 200) {\r\n          $responseFeedback.show().text('Update succesful');\r\n        }\r\n        if (jqXHR.status === 400 && data.all) {\r\n          $responseFeedback.show().text(data.all);\r\n        }\r\n      }\r\n    });\r\n  });\r\n\r\n});"]}