{"version":3,"sources":["chrome/spinner.js"],"names":["define","$","jsbin","spinner","element","c","document","createElement","getContext","ctx","rafID","height","width","TORADIAN","Math","PI","w","h","deg","r","speed","tailspeed","strokeStyle","lineWidth","last","start","draw","window","requestAnimationFrame","end","fillStyle","fillRect","beginPath","arc","stroke","closePath","stop","cancelAnimationFrame"],"mappings":";;;;;;;AAAAA,QACE,iBACC,YACD,SAAUC,EAAEC,GAkEZ,OAAOA,EAAMC,QAjEb,SAAiBC,GACf,aACA,IAAIC,EAAID,GAAWE,SAASC,cAAc,UAC1C,IAAKF,EAAEG,WACL,OAAO,EAET,IAAIC,EAAMJ,EAAEG,WAAW,MAEnBE,EAAQ,KAEZL,EAAEM,OAASN,EAAEO,MAAQ,GAErB,IAAIC,EAAWC,KAAKC,GAAK,IACrBC,EAAIX,EAAEO,MACNK,EAAIZ,EAAEM,OACNO,EAAM,EACNC,EAAI,EACJC,EAAQ,EACRC,EAAY,EAAE,EAElBZ,EAAIa,YAAc,iBAClBb,EAAIc,UAAY,IAEhB,IAAIC,GAAO,EAiCX,OACEpB,QAASC,EACToB,MAlCF,SAASC,IACPhB,EAAQiB,OAAOC,sBAAsBF,GAIrC,IAAID,GAFJP,GAAOE,GAEaC,EAAc,IAC9BQ,EAAMX,EAAM,IACLW,IAAQJ,IAGjBD,GAAQA,EAGRC,GAAS,GAGXhB,EAAIqB,UAAY,UAChBrB,EAAIa,YAAc,OAClBb,EAAIsB,SAASf,EAAE,EAAM,EAAFG,EAAKF,EAAE,EAAM,EAAFE,EAAS,EAAJA,EAAW,EAAJA,GAC1CV,EAAIuB,YACJvB,EAAIwB,IAAIjB,EAAE,EAAI,GAAKC,EAAE,EAAI,GAAKE,EAAGM,EAAQZ,EAAUgB,EAAMhB,EAAUW,GACnEf,EAAIyB,SAEJzB,EAAIa,YAAc,OAClBb,EAAIuB,YACJvB,EAAIwB,IAAIjB,EAAE,EAAI,GAAKC,EAAE,EAAI,GAAKE,EAAGU,EAAMhB,EAAUY,EAAQZ,EAAUW,GACnEf,EAAIyB,SAEJzB,EAAI0B,aAOJC,KAAM,WACJT,OAAOU,qBAAqB3B","file":"../../chrome/spinner.js","sourcesContent":["define([\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n  function spinner(element) {\r\n    'use strict';\r\n    var c = element || document.createElement('canvas');\r\n    if (!c.getContext) {\r\n      return false;\r\n    }\r\n    var ctx = c.getContext('2d');\r\n\r\n    var rafID = null;\r\n\r\n    c.height = c.width = 11;\r\n\r\n    var TORADIAN = Math.PI / 180;\r\n    var w = c.width;\r\n    var h = c.height;\r\n    var deg = 0;\r\n    var r = 4;\r\n    var speed = 4;\r\n    var tailspeed = 1/7;\r\n\r\n    ctx.strokeStyle = 'rgba(0,0,0,.5)';\r\n    ctx.lineWidth = 1.5;\r\n\r\n    var last = true;\r\n    function draw() {\r\n      rafID = window.requestAnimationFrame(draw);\r\n\r\n      deg += speed;\r\n\r\n      var start = ((deg * tailspeed)) % 360; // A / TAIL\r\n      var end = deg % 360;              // B / HEAD\r\n      var flip = end === start;\r\n\r\n      if (flip) {\r\n        last = !last;\r\n        // this prevents a single blank frame when\r\n        // the start and end have the same value\r\n        start -= 1;\r\n      }\r\n\r\n      ctx.fillStyle = '#f9f9f9';\r\n      ctx.strokeStyle = '#111';\r\n      ctx.fillRect(w/2 - r*2, h/2 - r*2, r * 4, r * 4);\r\n      ctx.beginPath();\r\n      ctx.arc(w/2 + 0.5, h/2 + 0.5, r, start * TORADIAN, end * TORADIAN, last);\r\n      ctx.stroke();\r\n\r\n      ctx.strokeStyle = '#999';\r\n      ctx.beginPath();\r\n      ctx.arc(w/2 + 0.5, h/2 + 0.5, r, end * TORADIAN, start * TORADIAN, last);\r\n      ctx.stroke();\r\n\r\n      ctx.closePath();\r\n\r\n    }\r\n\r\n    return {\r\n      element: c,\r\n      start: draw,\r\n      stop: function () {\r\n        window.cancelAnimationFrame(rafID);\r\n      }\r\n    };\r\n  }\r\n\r\n  return jsbin.spinner = spinner;\r\n});"]}