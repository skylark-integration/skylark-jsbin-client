{"version":3,"sources":["chrome/last-bin.js"],"names":["define","$","jsbin","save","d","url","window","location","href","document","cookie","encodeURIComponent","Date","setTime","toUTCString","el","back","getURL","$document","on","getElementById","name","nameEQ","ca","split","i","length","c","charAt","substring","indexOf","readCookie","decodeURIComponent"],"mappings":";;;;;;;AAAAA,QACE,iBACC,YACD,SAAUC,EAAEC,GACZ,aAUA,SAASC,IACP,IARIC,EAQAC,EAAMC,OAAOC,SAASC,KAExBC,SAASC,OADPL,EACgB,QAAUM,mBAAmBN,GAAO,eAVpDD,EAAI,IAAIQ,MAGVC,SAAST,EAAI,MACRA,EAAEU,eAM6E,WAGlE,8BAetB,IACMC,EACAC,EAQFd,GAASA,EAAMe,QACjBC,UAAUC,GAAG,QAAShB,GACtBA,MAXIY,EAAKN,SAASW,eAAe,QAC7BJ,EAbN,SAAoBK,GAGlB,IAFA,IAAIC,EAASD,EAAO,IAChBE,EAAKd,SAASC,OAAOc,MAAM,KACvBC,EAAE,EAAEA,EAAIF,EAAGG,OAAOD,IAAK,CAE7B,IADA,IAAIE,EAAIJ,EAAGE,GACS,KAAbE,EAAEC,OAAO,IAASD,EAAIA,EAAEE,UAAU,EAAEF,EAAED,QAC7C,GAAyB,GAArBC,EAAEG,QAAQR,GAAc,OAAOK,EAAEE,UAAUP,EAAOI,OAAOC,EAAED,QAEjE,OAAO,KAKIK,CAAW,QAElBhB,GAAe,OAATC,GAA0B,YAATA,IACzBD,EAAGP,KAAOwB,mBAAmBhB","file":"../../chrome/last-bin.js","sourcesContent":["define([\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n  'use strict';\r\n\r\n  function getExpires() {\r\n    var d = new Date();\r\n\r\n    // expires in 1 hour from now\r\n    d.setTime(+d + 1000 * 60 * 60);\r\n    return d.toUTCString();\r\n  }\r\n\r\n  function save() {\r\n    var url = window.location.href;\r\n    if (url) {\r\n      document.cookie = 'last=' + encodeURIComponent(url) + '; expires=' + getExpires() + '; path=/';\r\n    } else {\r\n      // expire cookie\r\n      document.cookie = 'last=\"\"; expires=-1; path=/';\r\n    }\r\n  }\r\n\r\n  function readCookie(name) {\r\n    var nameEQ = name + '=';\r\n    var ca = document.cookie.split(';');\r\n    for(var i=0;i < ca.length;i++) {\r\n      var c = ca[i];\r\n      while (c.charAt(0)==' ') c = c.substring(1,c.length);\r\n      if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);\r\n    }\r\n    return null;\r\n  }\r\n\r\n  function updateBackButton() {\r\n    var el = document.getElementById('back');\r\n    var back = readCookie('last');\r\n\r\n    if (el && back !== null && back !== '%2Fedit') {\r\n      el.href = decodeURIComponent(back);\r\n    }\r\n  }\r\n\r\n  // save the bin url when the bin is saved, changed and when we load first time\r\n  if (jsbin && jsbin.getURL) {\r\n    $document.on('saved', save);\r\n    save();\r\n  } else {\r\n    updateBackButton();\r\n  }\r\n});"]}