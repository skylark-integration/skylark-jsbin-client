{"version":3,"sources":["chrome/analytics.js"],"names":["define","langx","$","analytics","jsbin","mixin","universalEditor","value","track","library","action","infocard","embed","window","top","location","e","milestone","pathname","clone","delete","lock","openShare","saveTemplate","createNew","from","open","openFromAvatar","share","label","download","showPanel","panelId","hidePanel","logout","register","success","undefined","ok","login","enableLiveJS","archiveView","visible","archive","url","unarchive","loadGist","id","layout","panelsVisible","panel","push","sort","join","run","publishVanity","runconsole","welcomePanelState","state","s","welcomePanelLink","on","this","text"],"mappings":";;;;;;;AAAAA,QACE,gBACA,iBACA,iCACC,YACD,SAAUC,EAAMC,EAAEC,EAAUC,GA8H5B,OA7HAH,EAAMI,MAAMF,GAEVG,gBAAiB,SAAUC,GACzBJ,EAAUK,MAAM,OAAQ,kBAAmBD,IAE7CE,QAAS,SAAUC,EAAQH,GACzBJ,EAAUK,MAAM,OAAQE,EAAQ,UAAWH,IAE7CI,SAAU,SAAUD,EAAQH,GAC1BJ,EAAUK,MAAM,WAAYE,EAAQH,IAEtCK,MAAO,WACL,IACET,EAAUK,MAAM,QAAS,QAASK,OAAOC,IAAIC,UAC7C,MAAOC,GACPb,EAAUK,MAAM,QAAS,WAG7BS,UAAW,WACTd,EAAUK,MAAM,MAAO,OAAQK,OAAOE,SAASG,WAEjDC,MAAO,WACLhB,EAAUK,MAAM,MAAO,QAASK,OAAOE,SAASG,WAElDE,OAAU,WACRjB,EAAUK,MAAM,MAAO,SAAUK,OAAOE,SAASG,WAEnDG,KAAM,WACJlB,EAAUK,MAAM,MAAO,OAAQK,OAAOE,SAASG,WAEjDI,UAAW,WACTnB,EAAUK,MAAM,OAAQ,OAAQ,UAElCe,aAAc,WACZpB,EAAUK,MAAM,OAAQ,SAAU,kBAEpCgB,UAAW,SAAUC,GACnBtB,EAAUK,MAAMiB,GAAQ,OAAQ,SAAU,QAE5CC,KAAM,SAAUD,GACdtB,EAAUK,MAAMiB,GAAQ,OAAQ,SAAU,SAE5CE,eAAgB,WACdxB,EAAUK,MAAM,OAAQ,SAAU,oBAGpCoB,MAAO,SAAUlB,EAAQmB,GACvB1B,EAAUK,MAAM,QAASE,EAAQmB,IAEnCC,SAAU,SAAUL,GAClBtB,EAAUK,MAAMiB,GAAQ,OAAQ,SAAU,aAE5CM,UAAW,SAAUC,GACnB7B,EAAUK,MAAM,QAAS,OAAQwB,IAEnCC,UAAW,SAAUD,GACnB7B,EAAUK,MAAM,QAAS,OAAQwB,IAEnCE,OAAQ,WACN/B,EAAUK,MAAM,OAAQ,SAAU,WAEpC2B,SAAU,SAAUC,QACFC,IAAZD,EACFjC,EAAUK,MAAM,OAAQ,OAAQ,SAEhCL,EAAUK,MAAM,OAAQ,WAAY8B,GAAK,UAAY,SAGzDC,MAAO,SAAUD,QACJD,IAAPC,EACFnC,EAAUK,MAAM,OAAQ,OAAQ,SAEhCL,EAAUK,MAAM,OAAQ,QAAS8B,EAAK,UAAY,SAGtDE,aAAc,SAAUF,GACtBnC,EAAUK,MAAM,SAAU,cAAe8B,EAAK,KAAO,QAEvDG,YAAa,SAAUC,GACrBvC,EAAUK,MAAM,SAAU,eAAgBkC,EAAU,KAAO,QAE7DC,QAAS,SAAUC,GACjBzC,EAAUK,MAAM,SAAU,UAAWoC,IAEvCC,UAAW,SAAUD,GACnBzC,EAAUK,MAAM,SAAU,YAAaoC,IAEzCE,SAAU,SAAUC,GAClB5C,EAAUK,MAAM,QAAS,YAAauC,IAExCC,OAAQ,SAAUC,GAChB,IAAID,KAAaE,EAAQ,GAEzB,IAAKA,KAASD,EACZD,EAAOG,KAAKD,EAAMH,IAGpB5C,EAAUK,MAAM,SAAU,SAAUwC,EAAOI,OAAOC,KAAK,MAAQ,SAEjEC,IAAK,SAAU7B,GACbtB,EAAUK,MAAMiB,GAAQ,SAAU,gBAEpC8B,cAAe,WACbpD,EAAUK,MAAM,MAAO,mBAEzBgD,WAAY,SAAU/B,GACpBtB,EAAUK,MAAMiB,GAAQ,SAAU,gBAEpCgC,kBAAmB,SAAUC,GAC3B,IAAIC,EAAI,QACJD,IACFC,EAAI,QAENxD,EAAUK,MAAM,QAAS,gBAAiBmD,IAE5CC,iBAAkB,SAAUhB,GAC1BzC,EAAUK,MAAM,qBAAsBoC,MAK1C1C,EAAE,sBAAsB2D,GAAG,QAAS,WAClC1D,EAAUK,MAAM,UAAWN,EAAE4D,MAAMC,UAG7B5D","file":"../../chrome/analytics.js","sourcesContent":["define([\r\n  \"skylark-langx\",\r\n  \"skylark-jquery\",\r\n  \"skylark-jsbin-chrome/analytics\",\r\n   \"../jsbin\"\r\n],function (langx,$,analytics,jsbin) {\r\n  langx.mixin(analytics ,  {\r\n\r\n    universalEditor: function (value) {\r\n      analytics.track('menu', 'universalEditor', value);\r\n    },\r\n    library: function (action, value) {\r\n      analytics.track('menu', action, 'library', value);\r\n    },\r\n    infocard: function (action, value) {\r\n      analytics.track('infocard', action, value);\r\n    },\r\n    embed: function () {\r\n      try {\r\n        analytics.track('state', 'embed', window.top.location);\r\n      } catch (e) {\r\n        analytics.track('state', 'embed');\r\n      }\r\n    },\r\n    milestone: function () {\r\n      analytics.track('bin', 'save', window.location.pathname);\r\n    },\r\n    clone: function () {\r\n      analytics.track('bin', 'clone', window.location.pathname);\r\n    },\r\n    'delete': function () {\r\n      analytics.track('bin', 'delete', window.location.pathname);\r\n    },\r\n    lock: function () {\r\n      analytics.track('bin', 'lock', window.location.pathname);\r\n    },\r\n    openShare: function () {\r\n      analytics.track('menu', 'open', 'share');\r\n    },\r\n    saveTemplate: function () {\r\n      analytics.track('menu', 'select', 'save-template');\r\n    },\r\n    createNew: function (from) {\r\n      analytics.track(from || 'menu', 'select', 'new');\r\n    },\r\n    open: function (from) {\r\n      analytics.track(from || 'menu', 'select', 'open');\r\n    },\r\n    openFromAvatar: function () {\r\n      analytics.track('menu', 'select', 'open via avatar');\r\n    },\r\n\r\n    share: function (action, label) {\r\n      analytics.track('share', action, label);\r\n    },\r\n    download: function (from) {\r\n      analytics.track(from || 'menu', 'select', 'download');\r\n    },\r\n    showPanel: function (panelId) {\r\n      analytics.track('panel', 'show', panelId);\r\n    },\r\n    hidePanel: function (panelId) {\r\n      analytics.track('panel', 'hide', panelId);\r\n    },\r\n    logout: function () {\r\n      analytics.track('menu', 'select', 'logout');\r\n    },\r\n    register: function (success) {\r\n      if (success === undefined) {\r\n        analytics.track('menu', 'open', 'login');\r\n      } else {\r\n        analytics.track('user', 'register', ok ? 'success' : 'fail');\r\n      }\r\n    },\r\n    login: function (ok) {\r\n      if (ok === undefined) {\r\n        analytics.track('menu', 'open', 'login');\r\n      } else {\r\n        analytics.track('user', 'login', ok ? 'success' : 'fail');\r\n      }\r\n    },\r\n    enableLiveJS: function (ok) {\r\n      analytics.track('button', 'auto-run js', ok ? 'on' : 'off');\r\n    },\r\n    archiveView: function (visible) {\r\n      analytics.track('button', 'view archive', visible ? 'on' : 'off');\r\n    },\r\n    archive: function (url) {\r\n      analytics.track('button', 'archive', url);\r\n    },\r\n    unarchive: function (url) {\r\n      analytics.track('button', 'unarchive', url);\r\n    },\r\n    loadGist: function (id) {\r\n      analytics.track('state', 'load gist', id);\r\n    },\r\n    layout: function (panelsVisible) {\r\n      var layout = [], panel = '';\r\n\r\n      for (panel in panelsVisible) {\r\n        layout.push(panel.id);\r\n      }\r\n\r\n      analytics.track('layout', 'update', layout.sort().join(',') || 'none');\r\n    },\r\n    run: function (from) {\r\n      analytics.track(from || 'button', 'run with js');\r\n    },\r\n    publishVanity: function () {\r\n      analytics.track('bin', 'publish-vanity');\r\n    },\r\n    runconsole: function (from) {\r\n      analytics.track(from || 'button', 'run console');\r\n    },\r\n    welcomePanelState: function (state) {\r\n      var s = 'close';\r\n      if (state) {\r\n        s = 'open';\r\n      }\r\n      analytics.track('state', 'welcome-panel', s);\r\n    },\r\n    welcomePanelLink: function (url) {\r\n      analytics.track('welcome-panel-link', url);\r\n    }\r\n  });\r\n\r\n  // misses the asset upload one\r\n  $('a[data-pro=\"true\"]').on('click', function () {\r\n    analytics.track('try-pro', $(this).text());\r\n  });\r\n\r\n  return  analytics;\r\n});"]}