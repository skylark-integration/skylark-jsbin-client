{"version":3,"sources":["chrome/tips.js"],"names":["define","$","jsbin","tipTimeout","$html","document","documentElement","$tip","$tipContent","removeTip","cb","removeClass","html","window","resize","setTimeout","setTip","data","clearTimeout","content","addClass","type","autohide","parseInt","$document","on","event","tipData","hasClass","keydown","which"],"mappings":";;;;;;;AAAAA,QACE,iBACC,YACD,SAAUC,EAAEC,GAEV,IAGIC,EAHAC,EAAQH,EAAEI,SAASC,iBACnBC,EAAON,EAAE,QACTO,EAAcP,EAAE,IAAKM,GAGrBE,EAAY,SAAUC,GACxBN,EAAMO,YAAY,WAClBJ,EAAKI,cACLH,EAAYI,KAAK,IACjBX,EAAEY,QAAQC,SACVJ,GAAMK,WAAWL,EAAI,IAGnBM,EAAS,SAAUC,GACrBC,aAAaf,GACbK,EAAYI,KAAKK,EAAKE,SACtBZ,EAAKI,cAAcS,SAASH,EAAKI,MAAQ,QACzCjB,EAAMgB,SAAS,WACVH,EAAKK,WACVnB,EAAaY,WAAW,WACtBN,KACCc,SAASN,EAAKK,SAAU,KAAO,OAcpCpB,EAAMsB,UAAUC,GAAG,MAAO,SAAUC,EAAOT,GACzC,IAAIU,EAAUV,EAOd,GANoB,iBAATA,KACTU,MACQR,QAAUF,EAClBU,EAAQN,KAAO,QAGbb,EAAYI,SAAWe,EAAQR,SAC/BZ,EAAKqB,SAASD,EAAQN,MAAO,OAAOL,EAAOC,GAC/CR,EAAU,WACRO,EAAOW,OAIX1B,EAAE,QAAQwB,GAAG,QAAS,YAAa,WAEjC,OADAhB,KACO,IAIVP,EAAMsB,UAAUK,QAAQ,SAAUH,GACZ,IAAfA,EAAMI,OACRrB","file":"../../chrome/tips.js","sourcesContent":["define([\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n\r\n    var $html = $(document.documentElement),\r\n        $tip = $('#tip'),\r\n        $tipContent = $('p', $tip),\r\n        tipTimeout;\r\n\r\n    var removeTip = function (cb) {\r\n      $html.removeClass('showtip');\r\n      $tip.removeClass();\r\n      $tipContent.html('');\r\n      $(window).resize();\r\n      cb && setTimeout(cb, 0);\r\n    };\r\n\r\n    var setTip = function (data) {\r\n      clearTimeout(tipTimeout);\r\n      $tipContent.html(data.content);\r\n      $tip.removeClass().addClass(data.type || 'info');\r\n      $html.addClass('showtip');\r\n      if (!data.autohide) return;\r\n      tipTimeout = setTimeout(function () {\r\n        removeTip();\r\n      }, parseInt(data.autohide, 10) || 5 * 1000);\r\n    };\r\n\r\n    /**\r\n     * Trigger a tip to be shown.\r\n     *\r\n     *   $document.trigger('tip', 'You have an infinite loop in your HTML.');\r\n     *\r\n     *    $document.trigger('tip', {\r\n     *      type: 'error',\r\n     *      content: 'Do you even Javascript?',\r\n     *      autohide: 8000\r\n     *    });\r\n     */\r\n    jsbin.$document.on('tip', function (event, data) {\r\n      var tipData = data;\r\n      if (typeof data === 'string') {\r\n        tipData = {};\r\n        tipData.content = data;\r\n        tipData.type = 'info';\r\n      }\r\n      // If the content and the type haven't changed, just set it again.\r\n      if ($tipContent.html() === tipData.content &&\r\n          $tip.hasClass(tipData.type)) return setTip(data);\r\n      removeTip(function () {\r\n        setTip(tipData);\r\n      });\r\n    });\r\n\r\n    $('#tip').on('click', 'a.dismiss', function () {\r\n      removeTip();\r\n      return false;\r\n    });\r\n\r\n    // Escape\r\n   jsbin.$document.keydown(function (event) {\r\n      if (event.which == 27) {\r\n        removeTip();\r\n      }\r\n    });\r\n\r\n  });"]}