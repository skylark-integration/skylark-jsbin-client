{"version":3,"sources":["chrome/transfer.js"],"names":["define","$","jsbin","$transfers","on","event","preventDefault","to","prompt","trim","toLowerCase","length","ajax","url","getURL","withRevision","method","data","_csrf","state","token","success","window","location","reload","error","e","console","log","status","alert","owner","show","hide"],"mappings":";;;;;;;AAAAA,QACE,iBACC,YACD,SAAUC,EAAEC,GACX,IAAIC,EAAaF,EAAE,cAAcG,GAAG,QAAS,SAAUC,GACpDA,EAAMC,iBACN,IAAIC,EAAKC,OAAO,+CAChBD,GAAMA,GAAM,IAAIE,OAAOC,eAEhBC,QACLV,EAAEW,MACAC,IAAKX,EAAMY,QAASC,cAAc,IAAU,YAC5CC,OAAQ,OACRC,MACEV,GAAIA,EACJW,MAAOhB,EAAMiB,MAAMC,OAErBC,QAAS,WACPC,OAAOC,SAASC,UAElBC,MAAO,SAAUC,GACfC,QAAQC,IAAIF,GACK,MAAbA,EAAEG,OACJC,MAAM,wDACgB,MAAbJ,EAAEG,OACXC,MAAM,aAAevB,EAAK,gCAE1BuB,MAAM,+BAkBhB,OAVqB,WACf5B,EAAM6B,QACR5B,EAAW6B,OAEX7B,EAAW8B","file":"../../chrome/transfer.js","sourcesContent":["define([\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n   var $transfers = $('a.transfer').on('click', function (event) {\r\n      event.preventDefault();\r\n      var to = prompt('Enter the username to transfer this bin to');\r\n      to = (to || '').trim().toLowerCase();\r\n\r\n      if (to.length) {\r\n        $.ajax({\r\n          url: jsbin.getURL({ withRevision: true }) + '/transfer',\r\n          method: 'post',\r\n          data: {\r\n            to: to,\r\n            _csrf: jsbin.state.token,\r\n          },\r\n          success: function () {\r\n            window.location.reload();\r\n          },\r\n          error: function (e) {\r\n            console.log(e);\r\n            if (e.status === 403) {\r\n              alert('This bin cannot be transferred as you do not own it.');\r\n            } else if (e.status === 400) {\r\n              alert('The user \"' + to + '\" couldn\\'t be found, sorry.');\r\n            } else {\r\n              alert('Failed to transfer bin');\r\n            }\r\n          }\r\n        });\r\n      }\r\n\r\n    });\r\n\r\n    var updateTransfer = function () {\r\n      if (jsbin.owner()) {\r\n        $transfers.show();\r\n      } else {\r\n        $transfers.hide();\r\n      }\r\n    }\r\n\r\n    ///updateTransfer();\r\n\r\n    return updateTransfer;\r\n});"]}