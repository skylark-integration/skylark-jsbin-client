/**
 * skylark-jsbin-client - A version of jsbin-editor  that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-jsbin-client/
 * @license MIT
 */
define(["skylark-jquery","../jsbin","./analytics"],function(t,e,l){"use strict";if(t("#toppanel").length){void 0===e.settings.gui&&(e.settings.gui={}),void 0===e.settings.gui.toppanel&&(e.settings.gui.toppanel=!0,store.localStorage.setItem("settings",JSON.stringify(e.settings))),$body.hasClass("toppanel")&&!1===e.settings.gui.toppanel&&($body.addClass("toppanel-close"),$body.removeClass("toppanel")),l.welcomePanelState(e.settings.gui.toppanel);var n=function(t){$body.removeClass("toppanel-slow"),t.shiftKey&&$body.addClass("toppanel-slow")};t(".toppanel-logo").on("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(t){$document.trigger("sizeeditors")}),t(".toppanel-hide").click(function(t){t.preventDefault(),n(t),e.settings.gui.toppanel=!1,settings.save(),$body.addClass("toppanel-close"),$body.removeClass("toppanel")}),t(".toppanel-logo").click(function(t){t.preventDefault(),n(t),e.settings.gui.toppanel=!0,settings.save(),$body.removeClass("toppanel-close"),$body.addClass("toppanel")}),t.ajax({url:"/blog/all.json?"+(new Date).toString().split(" ").slice(0,4).join("-"),dataType:"json",cache:!0,success:function(l){var n=l.blog[0],a=e.root.replace(/^https/,"http");t(".toppanel-blog ul").html('<li><a href="'+a+"/"+n.slug+'" target="_blank" class="toppanel-link">'+n.title.replace(/TWDTW.*:\s/,"")+"</a></li>");var o=null,s=1;try{o=store.localStorage.getItem("lastpost")||null}catch(t){}null!==o&&(s=(o*=1)<n.timestamp?l.blog.reduce(function(t,e){return o<e.timestamp?t+1:t},0):0),s&&t(".blog a").attr("href",a+"/"+l.blog[s-1].slug).attr("data-count",s).on("click",function(){try{localStorage.lastpost=l.blog[s-1].timestamp}catch(t){}});var i=function(t){for(var e,l,n=t.length;n;)l=Math.floor(Math.random()*n--),e=t[n],t[n]=t[l],t[l]=e;return t}(l.help);t(".toppanel-help ul").html('<li><a href="'+a+"/"+i[0].slug+'" target="_blank" class="toppanel-link">'+i[0].title+'</a></li><li><a href="'+a+"/"+i[1].slug+'" target="_blank" class="toppanel-link">'+i[1].title+"</a></li>")}}),t("#toppanel").find(".toppanel-link").mousedown(function(){l.welcomePanelLink(this.href)})}});
//# sourceMappingURL=../sourcemaps/chrome/welcome-panel.js.map
