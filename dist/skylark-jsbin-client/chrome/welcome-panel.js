/**
 * skylark-jsbin-client - A version of jsbin-editor  that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-jsbin-client/
 * @license MIT
 */
define(["skylark-jquery","skylark-jsbin-base/storage","../jsbin","./analytics"],function(t,e,l,n){"use strict";if(t("#toppanel").length){void 0===l.settings.gui&&(l.settings.gui={}),void 0===l.settings.gui.toppanel&&(l.settings.gui.toppanel=!0,e.localStorage.setItem("settings",JSON.stringify(l.settings))),l.$body.hasClass("toppanel")&&!1===l.settings.gui.toppanel&&(l.$body.addClass("toppanel-close"),l.$body.removeClass("toppanel")),n.welcomePanelState(l.settings.gui.toppanel);var a=function(t){l.$body.removeClass("toppanel-slow"),t.shiftKey&&l.$body.addClass("toppanel-slow")};t(".toppanel-logo").on("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(t){l.$document.trigger("sizeeditors")}),t(".toppanel-hide").click(function(t){t.preventDefault(),a(t),l.settings.gui.toppanel=!1,settings.save(),l.$body.addClass("toppanel-close"),l.$body.removeClass("toppanel")}),t(".toppanel-logo").click(function(t){t.preventDefault(),a(t),l.settings.gui.toppanel=!0,settings.save(),l.$body.removeClass("toppanel-close"),l.$body.addClass("toppanel")}),t.ajax({url:"/blog/all.json?"+(new Date).toString().split(" ").slice(0,4).join("-"),dataType:"json",cache:!0,success:function(n){var a=n.blog[0],o=l.root.replace(/^https/,"http");t(".toppanel-blog ul").html('<li><a href="'+o+"/"+a.slug+'" target="_blank" class="toppanel-link">'+a.title.replace(/TWDTW.*:\s/,"")+"</a></li>");var s=null,i=1;try{s=e.localStorage.getItem("lastpost")||null}catch(t){}null!==s&&(i=(s*=1)<a.timestamp?n.blog.reduce(function(t,e){return s<e.timestamp?t+1:t},0):0),i&&t(".blog a").attr("href",o+"/"+n.blog[i-1].slug).attr("data-count",i).on("click",function(){try{e.localStorage.lastpost=n.blog[i-1].timestamp}catch(t){}});var p=function(t){for(var e,l,n=t.length;n;)l=Math.floor(Math.random()*n--),e=t[n],t[n]=t[l],t[l]=e;return t}(n.help);t(".toppanel-help ul").html('<li><a href="'+o+"/"+p[0].slug+'" target="_blank" class="toppanel-link">'+p[0].title+'</a></li><li><a href="'+o+"/"+p[1].slug+'" target="_blank" class="toppanel-link">'+p[1].title+"</a></li>")}}),t("#toppanel").find(".toppanel-link").mousedown(function(){n.welcomePanelLink(this.href)})}});
//# sourceMappingURL=../sourcemaps/chrome/welcome-panel.js.map
