/**
 * skylark-jsbin-client - A version of jsbin-editor  that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-jsbin-client/
 * @license MIT
 */
define(["skylark-jquery","../jsbin"],function(e,s){"use strict";if(0!==e("#sharemenu .share-split").length){var t={live:"output",javascript:"js"},a=e('#sharepanels input[type="checkbox"]'),n=s.state.revision;$document.on("saved",function(){n=s.state.revision}),$document.on("snapshot",function(){s.state.changed=!1,window.history.replaceState&&window.history.replaceState(null,"",s.getURL({withRevision:!0})+"/edit?"+panels.getQuery())});var i=e("#sharemenu").bind("open",function(){a.prop("checked",!1),s.panels.getVisible().forEach(function(e){a.filter('[value="'+(t[e.id]||e.id)+'"]').prop("checked",!0)}),s.state.latest?(s.state.checksum?(r.prop("checked",s.state.latest),c.prop("checked",!1),f.show()):(r.prop({checked:!1}),c.prop("checked",!0),f.hide()),v.show()):(r.prop({checked:!1,disabled:!0}),c.prop("checked",!0),v.hide()),b()});i.find(".lockrevision").on("change",function(){saveChecksum=!1,s.state.checksum=!1,$document.trigger("locked")});var o=e("#share-preview"),r=e('#sharebintype input[type=radio][value="realtime"]'),c=e('#sharebintype input[type=radio][value="snapshot"]'),p=i.find("a.link")[0],h=i.find('input[name="url"]')[0],d=i.find("textarea")[0],l=i.find("form")[0],u=i.find(".direct-links"),f=e("#andlive"),v=i.find(".codecasting");e("#sharebintype input[type=radio]").on("change",function(){"snapshot"===this.value?(s.state.checksum=!1,saveChecksum=!1,v.hide()):v.show()}),i.find("input").on("change",b),$document.on("saved",function(){r.prop("checked",!0),i.removeClass("hidden"),b()});var m=e("#share").closest(".menu"),k=e("#sharemenu a")[0],g=e("a.show-share").on("click",function(){m.hasClass("open")?closedropdown(k):opendropdown(k,!0),g.blur()})}function b(){var e=function(e){for(var s,t,a,n,i=e.length,o={},r=function(e,s,t){void 0===e[s]?e[s]=t:("string"==typeof e[s]&&(e[s]=[e[s]]),e[s].push(t))},c=0;c<i;c++)s=(t=e[c]).value,a=t.type,n=t.name,"radio"===a?t.checked&&r(o,n,s):"checkbox"===a?(void 0===o[n]&&(o[n]=[]),t.checked&&r(o,n,s)):r(o,n,s);return o}(l),t=s.getURL({root:s.shareRoot}),i=s.getURL();"snapshot"===e.state&&s.state.latest&&(t+="/"+n,i+="/"+n);var r=t,c=e.panel.join(",");c&&(c="?"+c),a.prop("disabled","output"===e.view),o.attr("class",e.view),"output"!==e.view&&o.find(".editor div").each(function(){this.hidden=-1===e.panel.indexOf(this.className)}),"editor"===e.view?r+="/edit":c="",u.empty();var f=[],v="",m="";if((v=s.panels.panels.html.getCode().trim())&&("html"!==(m=processors[s.state.processors.html||"html"].extensions[0])?f.push('<a target="_blank" href="'+t+"."+m+'">'+m+"</a>"):0===v.toLowerCase().indexOf("<svg")&&f.push('<a target="_blank" href="'+t+'.svg">svg</a>')),s.panels.panels.css.getCode().trim()&&("css"!==(m=processors[s.state.processors.css||"css"].extensions[0])&&f.push('<a target="_blank" href="'+t+'.css">css</a>'),f.push('<a target="_blank" href="'+t+"."+m+'">'+m+"</a>")),v=s.panels.panels.javascript.getCode().trim()){"js"!==(m=processors[s.state.processors.javascript||"javascript"].extensions[0])&&f.push('<a target="_blank" href="'+t+'.js">js</a>');try{JSON.parse(v),f.push('<a target="_blank" href="'+t+'.json">json</a>')}catch(e){f.push('<a target="_blank" href="'+t+"."+m+'">'+m+"</a>")}}u.html(f.join("")),h.value=p.href=r+c,d.value=('<a class="jsbin-embed" href="'+i+"/embed"+c+'">'+documentTitle+' on jsbin.com</a><script src="'+s.static+"/js/embed.min.js?"+s.version+'"><\/script>').replace(/<>"&/g,function(e){return{"<":"&lt;",">":"&gt;",'"':"&quot;","&":"&amp;"}[e]})}});
//# sourceMappingURL=../sourcemaps/chrome/share.js.map
