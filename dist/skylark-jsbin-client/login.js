/**
 * skylark-jsbin-client - A version of jsbin-editor  that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-jsbin-client/
 * @license MIT
 */
define(["skylark-jquery"],function(e){"use strict";var t=!!window.history.pushState&&function(e){window.history.pushState(null,null,e)};if(t){var n=e("#login-register-page.form-container form"),r=e("#login-register-page.form-container .info"),a=null,i=!0,o=e("#login-register-page.form-container"),s=e("#login-register-page .tab").click(function(e,s){var u=e.target.pathname||e.target.parentNode.pathname;if(t||s){if(a===u)return!1;a=u,n.hide().filter(function(e){return function(){return-1!==this.getAttribute("action").indexOf(e)}}(u)).show(),i?i=!1:r.removeClass("active"),!s&&t&&t(u),e.preventDefault(),o.removeClass("register login").addClass(u.slice(1))}});window.addEventListener("popstate",c),c(),n.on("submit",function(t){t.preventDefault();var n=e(t.target),r=d(n);e.ajax({url:n.attr("action"),type:n.attr("method"),data:r,dataType:"json",success:function(e){window.location.href=e.referrer},error:function(e){l().find("p").html(e.responseJSON.message)}})});var u=e("#login");e("#lostpass").click(function(t){return t.preventDefault(),l().find("p").text("Requesting password reset token..."),setTimeout(function(){if(e("#login-username").val()){var t=d(u);t.email=t.username,e.ajax({url:window.location.origin+"/forgot",type:"post",data:t,dataType:"json",success:function(e){l().find("p").text(e.message||e.error)},error:function(e){var t=e.responseJSON;l().find("p").text(t.error||t.message)}})}else l().find("p").text("Please enter your username or email address below, and I'll try to find you and send you a reset token.")},1e3),!1})}function l(){return r.addClass("active")}function f(){return this.pathname===window.location.pathname}function c(){s.filter(f).trigger("click",[!0])}function d(e){return e.serializeArray().reduce(function(e,t){return e[t.name]=t.value,e},{})}});
//# sourceMappingURL=sourcemaps/login.js.map
