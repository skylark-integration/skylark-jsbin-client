{"version":3,"sources":["skylark-jsbin-client.js"],"names":["define","jsbin","$","cache","font","document","head","getElementsByTagName","selectors","size","settings","cssText","el","createElement","type","styleSheet","appendChild","createTextNode","Object","defineProperty","configurable","enumerable","get","set","val","e","insertFont","value","style","innerHTML","window","localStorage","getItem","JSON","parse","md5","removeItem","addEventListener","request","XMLHttpRequest","url","static","version","open","onload","this","status","response","setItem","send","fn","splitter","$document","$blocker","$body","splitterSettings","store","each","$el","guid","$parent","parent","$prev","prevAll","nextAll","$handle","dragging","parentOffset","width","offset","top","left","props","x","currentPos","multiplier","cssProp","otherCssProp","sizeProp","moveProp","init","bottom","mobile","margin-left","height","right","opacity","position","cursor","border-left","z-index","y","border","tracker","down","delta","track","timer","moveSplitter","pos","v","split","prevSize","elSize","css","stringify","clearTimeout","setTimeout","trigger","resetPrev","bind","event","pageX","pageY","target","targetType","Math","abs","remove","removeClass","originalEvent","touches","append","addClass","preventDefault","is","hide","length","undefined","data","before","analytics","category","action","label","ga","experiment","universalEditor","library","infocard","embed","location","milestone","pathname","clone","delete","lock","openShare","saveTemplate","createNew","from","openFromAvatar","openMenu","closeMenu","selectMenu","item","share","download","showPanel","panelId","hidePanel","logout","register","success","ok","login","enableLiveJS","archiveView","visible","archive","unarchive","loadGist","id","layout","panelsVisible","panel","push","sort","join","run","publishVanity","runconsole","welcomePanelState","state","s","welcomePanelLink","on","text","user","name","$history","loaded","requestAttempts","panels","getVisible","appendTo","detach","loadList","hasClass","hookUserHistory","ajax","dataType","root","error","console","html","frag","find","updatePreview","$iframe","attr","removeAttr","updateViewing","$viewing","updateLayout","$tbodys","archiveMode","$tbody","filter","$trs","first","$bins","$toggle","delegate","$this","$row","parents","toggleClass","indexOf","alert","change","selected","shiftKey","metaKey","closest","stopImmediatePropagation","$tr","editUrl","allEditors","editor","getCode","trim","show","click","i","replace","prettyDate","$panelButtons","$homebtn","loginVisible","dropdownOpen","keyboardHelpVisible","urlHelpVisible","sideNavVisible","infocardVisible","hideOpen","closedropdown","keydown","which","mapping","live","javascript","$sharepanels","selectedSnapshot","revision","changed","history","replaceState","getURL","withRevision","getQuery","$sharemenu","prop","forEach","p","latest","checksum","$realtime","$snapshot","$andlive","checked","$withLiveReload","disabled","update","saveChecksum","$sharepreview","link","linkselect","form","$directLinks","$share","shareElement","$showShare","opendropdown","blur","formData","shareRoot","OGurl","shareurl","query","view","hidden","className","empty","directLinksHTML","code","ext","processors","extensions","toLowerCase","href","documentTitle","m","<",">","\"","&","githubIssue","body","navigator","userAgent","encodeURIComponent","$newissue","submit","key","email","$loginFeedback","username","complete","jqXHR","parseJSON","responseText","avatar","end","prepend","message","search","tipTimeout","$html","documentElement","$tip","$tipContent","removeTip","cb","resize","setTip","content","autohide","parseInt","tipData","keys","withoutRoot","c","revsion","d","Date","getTime","saving","todo","_inprogress","inprogress","save","pop","updateCode","getTagContent","tag","result","re","all","capture1","capture2","meta","title","saveDisabled","owner","saveCode","$shareLinks","$panelCheckboxes","updateSavedState","map","getAttribute","path","nodeName","hash","getHighlightLines","lastHTML","updateDocMeta","currentHTML","description","updateSettings","sessionStorage","onSaveError","savingLabels","animate","_console","unbind","one","shown","sandbox","origin","ismac","cmd","shift","plus","stop","throttle","delay","deleted","savecontent","compressKeys","obj","compressed","LZString","compressToUTF16","callback","panelSettings","method","editors","useCompression","protocol","processed","headers","Accept","$form","setupform","token","ajaxCallback","saveOnExit","serializeArray","reduce","metadata","pushState","edit","processor","hideAll","$lockrevision","menuDown","dropdownButtons","f","focused","focus","mousedown","$dropdownLinks","nofocus","menu","substring","input","select","mouseup","ignoreUp","fromClick","hostname","triggerHandler","mouseover","render","renderLivePreview","jsconsole","clear","dblclick","lineNumbers","getOption","setOption","restore","$privateButton","$publicButton","$visibilityButtons","visibility","includejs","hideheader","cancelUp","mackeys","ctrl","del","shortcut","toUpperCase","metaContent","metatag","cm","test","setCode","getSearchCursor","findNext","contentCursor","line","ch","to","setCursor","setSelection","mark","markText","xhr","confirm","deleteAll","$enableUniversalEditor","simple","reload","File","FileList","FileReader","holder","cursorPosition","s4","floor","random","toString","uploadAsset","file","loading","currentStatus","widget","insertPosition","getCursor","lameEditor","insertTextArea","addLineWidget","coverGutter","nohscroll","S3Upload","s3_sign_put_url","s3_object_name","files","onProgress","percent","requestAnimationFrame","progress","onError","reason","fromServer","color","onFinishS3Put","getInsertText","replaceRange","string","start","selectionStart","selectionEnd","mime","getFileData","Promise","resolve","reject","kind","getAsString","filename","getAsFile","ondragover","ondragend","jQueryEvent","CodeMirror","items","clipboardData","types","promises","then","a","b","catch","log","stack","coordsChar","jstypes","csstypes","htmltypes","ondrop","dataTransfer","reader","scroller","worker","Worker","postMessage","onmessage","scrollTop","readAsText","allowDrop","CORS","XDomainRequest","Gist","gist","github_token","fileName","fileData","slice","prototype","processorInit","findByExtension","named","public","source","index","binToFile","desc","crossDomain","html_url","group","groupEnd","spinner","element","getContext","ctx","rafID","TORADIAN","PI","w","h","deg","r","speed","tailspeed","strokeStyle","lineWidth","last","draw","flip","fillStyle","fillRect","beginPath","arc","stroke","closePath","cancelAnimationFrame","global","setupInfocard","$template","$header","canvas","htmlpanel","viewers","es","insertTag","capture","updateHeaders","add","toTrigger","klass","statusCode","getJSON","codes","$headers","$fields","$clones","eq","initHandlers","updateInfoCard","updateStats","_data","connections","$b","listenStats","EventSource","close","userhtml","getPanelText","somethingSelected","listSelections","setSelections","classes","streaming","last_updated","pro","hiddenProperty","visibilityChangeEvent","handleVisibility","newurl","getScript","cookie","setTime","toUTCString","back","getElementById","nameEQ","ca","charAt","readCookie","decodeURIComponent","updateArchiveMenu","$transfers","prompt","_csrf","gui","toppanel","goSlow","blogpost","blog","slug","count","timestamp","prev","current","lastpost","help","array","t","shuffle","results","resultCount","searchTerms","searchFor","needles","haystack","ignore","endingRe","RegExp","word","words","lastIndexOf","matches","needle","children","inc","ready","onscroll","scrollTo","keyMap","browser","platform","coder","main"],"mappings":"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","file":"../skylark-jsbin-client.js","sourcesContent":["define('skylark-jsbin-client/jsbin',[\r\n  \"skylark-jsbin-base\"\r\n],function(jsbin){\r\n  return jsbin;\r\n});\r\n\r\n\ndefine('skylark-jsbin-client/chrome/font',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n  /** =========================================================================\r\n   * font\r\n   * Reads user setting and configures the CodeMirror font size\r\n   * ========================================================================== */\r\n  /*global jsbin:true*/\r\n  var font = (function (document) {\r\n    var head = document.getElementsByTagName('head')[0],\r\n        selectors = '#output li, #exec, .fakeInput, .fakeInput:before, #exec:before, #bin .editbox .CodeMirror, .mobile .editbox textarea',\r\n        size = jsbin.settings.font || 14;\r\n\r\n    // via http://stackoverflow.com/questions/2041495/create-dynamic-inline-stylesheet\r\n    function font(size) {\r\n      var cssText = selectors + '{ font-size: ' + size + 'px; }',\r\n          el = document.createElement('style');\r\n\r\n      el.type = 'text/css';\r\n      if (el.styleSheet) {\r\n        el.styleSheet.cssText = cssText;//IE only\r\n      } else {\r\n        el.appendChild(document.createTextNode(cssText));\r\n      }\r\n      head.appendChild(el);\r\n    }\r\n\r\n    if (Object.defineProperty && jsbin.settings) {\r\n      try {\r\n        Object.defineProperty(jsbin.settings, 'font', {\r\n          configurable: true,\r\n          enumerable: true,\r\n          get: function () {\r\n            return size;\r\n          },\r\n          set: function (val) {\r\n            size = val * 1;\r\n            font(size);\r\n          }\r\n        });\r\n      } catch (e) {\r\n        // IE8 seems to attempt the code above, but it totally fails\r\n      }\r\n    }\r\n\r\n    font(size);\r\n\r\n    return font;\r\n  })(document);\r\n\r\n  var md5 = 'a3a02e450f1f79f4c3482279d113b07e';\r\n  var key = 'fonts';\r\n  var cache;\r\n\r\n  function insertFont(value) {\r\n    var style = document.createElement('style');\r\n    style.innerHTML = value;\r\n    document.head.appendChild(style);\r\n  }\r\n\r\n  try {\r\n    cache = window.localStorage.getItem(key);\r\n    if (cache) {\r\n      cache = JSON.parse(cache);\r\n      if (cache.md5 === md5) {\r\n        insertFont(cache.value);\r\n      } else {\r\n        // busting cache when md5 doesn't match\r\n        window.localStorage.removeItem(key);\r\n        cache = null;\r\n      }\r\n    }\r\n  } catch (e) {\r\n    // most likely LocalStorage disabled\r\n    return;\r\n  }\r\n\r\n  if (!cache) {\r\n    // fonts not in LocalStorage or md5 did not match\r\n    window.addEventListener('load', function () {\r\n      var request = new XMLHttpRequest();\r\n      var response;\r\n      var url = jsbin.static + '/css/fonts.a3a02e450f1f79f4c3482279d113b07e.woff.json?' + jsbin.version;\r\n      request.open('GET', url, true);\r\n      request.onload = function () {\r\n        if (this.status == 200) {\r\n          try {\r\n            response = JSON.parse(this.response);\r\n            insertFont(response.value);\r\n            window.localStorage.setItem(key, this.response);\r\n          } catch (e) {\r\n            // localStorage is probably full\r\n          }\r\n        }\r\n      };\r\n      request.send();\r\n    });\r\n  }\r\n\r\n  return jsbin.font = font;\r\n});\ndefine('skylark-jsbin-client/chrome/splitter',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n  $.fn.splitter = function () {\r\n    var $document = $(document),\r\n        $blocker = $('<div class=\"block\"></div>'),\r\n        $body = $('body');\r\n        // blockiframe = $blocker.find('iframe')[0];\r\n\r\n    var splitterSettings = JSON.parse(store.localStorage.getItem('splitterSettings') || '[]');\r\n    return this.each(function () {\r\n      var $el = $(this),\r\n          $originalContainer = $(this),\r\n          guid = $.fn.splitter.guid++,\r\n          $parent = $el.parent(),\r\n          type = 'x',\r\n          $prev = type === 'x' ? $el.prevAll(':visible:first') : $el.nextAll(':visible:first'),\r\n          $handle = $('<div class=\"resize\"></div>'),\r\n          dragging = false,\r\n          width = $parent.width(),\r\n          parentOffset = $parent.offset(),\r\n          left = parentOffset.left,\r\n          top = parentOffset.top, // usually zero :(\r\n          props = {\r\n            x: {\r\n              currentPos: $parent.offset().left,\r\n              multiplier: 1,\r\n              cssProp: 'left',\r\n              otherCssProp: 'right',\r\n              size: $parent.width(),\r\n              sizeProp: 'width',\r\n              moveProp: 'pageX',\r\n              init: {\r\n                top: 0,\r\n                bottom: 0,\r\n                width: jsbin.mobile ? 44 : 8,\r\n                'margin-left': jsbin.mobile ? '-22px' : '-4px',\r\n                height: '100%',\r\n                left: 'auto',\r\n                right: 'auto',\r\n                opacity: 0,\r\n                position: 'absolute',\r\n                cursor: 'ew-resize',\r\n                // 'border-top': '0',\r\n                'border-left': '1px solid rgba(218, 218, 218, 0.5)',\r\n                'z-index': 99999\r\n              }\r\n            },\r\n            y: {\r\n              currentPos: $parent.offset().top,\r\n              multiplier: -1,\r\n              size: $parent.height(),\r\n              cssProp: 'bottom',\r\n              otherCssProp: 'top',\r\n              sizeProp: 'height',\r\n              moveProp: 'pageY',\r\n              init: {\r\n                top: 'auto',\r\n                cursor: 'ns-resize',\r\n                bottom: 'auto',\r\n                height: 8,\r\n                width: '100%',\r\n                left: 0,\r\n                right: 0,\r\n                opacity: 0,\r\n                position: 'absolute',\r\n                border: 0,\r\n                // 'border-top': '1px solid rgba(218, 218, 218, 0.5)',\r\n                'z-index': 99999\r\n              }\r\n            }\r\n          },\r\n          refreshTimer = null,\r\n          settings = splitterSettings[guid] || {};\r\n\r\n      var tracker = {\r\n        down: { x: null, y: null },\r\n        delta: { x: null, y: null },\r\n        track: false,\r\n        timer: null\r\n      };\r\n      $handle.bind('mousedown', function (event) {\r\n        tracker.down.x = event.pageX;\r\n        tracker.down.y = event.pageY;\r\n        tracker.delta = { x: null, y: null };\r\n        tracker.target = $handle[type == 'x' ? 'height' : 'width']() * 0.25;\r\n      });\r\n\r\n      $document.bind('mousemove', function (event) {\r\n        if (dragging) {\r\n          tracker.delta.x = tracker.down.x - event.pageX;\r\n          tracker.delta.y = tracker.down.y - event.pageY;\r\n          clearTimeout(tracker.timer);\r\n          tracker.timer = setTimeout(function () {\r\n            tracker.down.x = event.pageX;\r\n            tracker.down.y = event.pageY;\r\n          }, 250);\r\n          var targetType = type == 'x' ? 'y' : 'x';\r\n          if (Math.abs(tracker.delta[targetType]) > tracker.target) {\r\n            $handle.trigger('change', targetType, event[props[targetType].moveProp]);\r\n            tracker.down.x = event.pageX;\r\n            tracker.down.y = event.pageY;\r\n          }\r\n        }\r\n      });\r\n\r\n      function moveSplitter(pos) {\r\n        if (type === 'y') {\r\n          pos -= top;\r\n        }\r\n        var v = pos - props[type].currentPos,\r\n            split = 100 / props[type].size * v,\r\n            delta = (pos - settings[type]) * props[type].multiplier,\r\n            prevSize = $prev[props[type].sizeProp](),\r\n            elSize = $el[props[type].sizeProp]();\r\n\r\n        if (type === 'y') {\r\n          split = 100 - split;\r\n        }\r\n\r\n        // if prev panel is too small and delta is negative, block\r\n        if (prevSize < 100 && delta < 0) {\r\n          // ignore\r\n        } else if (elSize < 100 && delta > 0) {\r\n          // ignore\r\n        } else {\r\n          // allow sizing to happen\r\n          $el.css(props[type].cssProp, split + '%');\r\n          $prev.css(props[type].otherCssProp, (100 - split) + '%');\r\n          var css = {};\r\n          css[props[type].cssProp] = split + '%';\r\n          $handle.css(css);\r\n          settings[type] = pos;\r\n          splitterSettings[guid] = settings;\r\n          store.localStorage.setItem('splitterSettings', JSON.stringify(splitterSettings));\r\n\r\n          // wait until animations have completed!\r\n          if (moveSplitter.timer) clearTimeout(moveSplitter.timer);\r\n          moveSplitter.timer = setTimeout(function () {\r\n            $document.trigger('sizeeditors');\r\n          }, 120);\r\n        }\r\n      }\r\n\r\n      function resetPrev() {\r\n        $prev = type === 'x' ? $handle.prevAll(':visible:first') : $handle.nextAll(':visible:first');\r\n      }\r\n\r\n      $document.bind('mouseup touchend', function () {\r\n        if (dragging) {\r\n          dragging = false;\r\n          $blocker.remove();\r\n          // $handle.css( 'opacity', '0');\r\n          $body.removeClass('dragging');\r\n        }\r\n      }).bind('mousemove touchmove', function (event) {\r\n        if (dragging) {\r\n          moveSplitter(event[props[type].moveProp] || event.originalEvent.touches[0][props[type].moveProp]);\r\n        }\r\n      });\r\n\r\n      $blocker.bind('mousemove touchmove', function (event) {\r\n        if (dragging) {\r\n          moveSplitter(event[props[type].moveProp] || event.originalEvent.touches[0][props[type].moveProp]);\r\n        }\r\n      });\r\n\r\n      $handle.bind('mousedown touchstart', function (e) {\r\n        dragging = true;\r\n        $body.append($blocker).addClass('dragging');\r\n        props[type].size = $parent[props[type].sizeProp]();\r\n        props[type].currentPos = 0; // is this really required then?\r\n\r\n        resetPrev();\r\n        e.preventDefault();\r\n      });\r\n\r\n      /*\r\n      .hover(function () {\r\n        $handle.css('opacity', '1');\r\n      }, function () {\r\n        if (!dragging) {\r\n          $handle.css('opacity', '0');\r\n        }\r\n      })\r\n    */\r\n\r\n      $handle.bind('init', function (event, x) {\r\n        $handle.css(props[type].init);\r\n        props[type].size = $parent[props[type].sizeProp]();\r\n        resetPrev();\r\n\r\n        // can only be read at init\r\n        top = $parent.offset().top;\r\n\r\n        $blocker.css('cursor', type == 'x' ? 'ew-resize' : 'ns-resize');\r\n\r\n        if (type == 'y') {\r\n          $el.css('border-right', 0);\r\n          $prev.css('border-left', 0);\r\n          $prev.css('border-top', '2px solid #ccc');\r\n        } else {\r\n          // $el.css('border-right', '1px solid #ccc');\r\n          $el.css('border-top', 0);\r\n          // $prev.css('border-right', '2px solid #ccc');\r\n        }\r\n\r\n        if ($el.is(':hidden')) {\r\n          $handle.hide();\r\n        } else {\r\n          if ($prev.length) {\r\n            $el.css('border-' + props[type].cssProp, '1px solid #ccc');\r\n          } else {\r\n            $el.css('border-' + props[type].cssProp, '0');\r\n          }\r\n          moveSplitter(x !== undefined ? x : $el.offset()[props[type].cssProp]);\r\n        }\r\n      }); //.trigger('init', settings.x || $el.offset().left);\r\n\r\n      $prev.css('width', 'auto');\r\n      $prev.css('height', 'auto');\r\n      $el.data('splitter', $handle);\r\n      $el.before($handle);\r\n\r\n      // if (settings.y) {\r\n      //   $handle.trigger('change', 'y');\r\n      // }\r\n    });\r\n  };\r\n\r\n  $.fn.splitter.guid = 0;\r\n});\ndefine('skylark-jsbin-client/chrome/analytics',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n  var analytics =  {\r\n    track: function (category, action, label) { // , value\r\n      window.ga && ga('send', 'event', category, action, label);\r\n    },\r\n    experiment: function (type) {\r\n      analytics.track('experiment', type);\r\n    },\r\n    universalEditor: function (value) {\r\n      analytics.track('menu', 'universalEditor', value);\r\n    },\r\n    library: function (action, value) {\r\n      analytics.track('menu', action, 'library', value);\r\n    },\r\n    infocard: function (action, value) {\r\n      analytics.track('infocard', action, value);\r\n    },\r\n    embed: function () {\r\n      try {\r\n        analytics.track('state', 'embed', window.top.location);\r\n      } catch (e) {\r\n        analytics.track('state', 'embed');\r\n      }\r\n    },\r\n    milestone: function () {\r\n      analytics.track('bin', 'save', window.location.pathname);\r\n    },\r\n    clone: function () {\r\n      analytics.track('bin', 'clone', window.location.pathname);\r\n    },\r\n    'delete': function () {\r\n      analytics.track('bin', 'delete', window.location.pathname);\r\n    },\r\n    lock: function () {\r\n      analytics.track('bin', 'lock', window.location.pathname);\r\n    },\r\n    openShare: function () {\r\n      analytics.track('menu', 'open', 'share');\r\n    },\r\n    saveTemplate: function () {\r\n      analytics.track('menu', 'select', 'save-template');\r\n    },\r\n    createNew: function (from) {\r\n      analytics.track(from || 'menu', 'select', 'new');\r\n    },\r\n    open: function (from) {\r\n      analytics.track(from || 'menu', 'select', 'open');\r\n    },\r\n    openFromAvatar: function () {\r\n      analytics.track('menu', 'select', 'open via avatar');\r\n    },\r\n    openMenu: function (label) {\r\n      analytics.track('menu', 'open', label);\r\n    },\r\n    closeMenu: function (label) {\r\n      analytics.track('menu', 'close', label);\r\n    },\r\n    selectMenu: function (item) {\r\n      if (item) {\r\n        analytics.track('menu', 'select', item);\r\n      }\r\n    },\r\n    share: function (action, label) {\r\n      analytics.track('share', action, label);\r\n    },\r\n    download: function (from) {\r\n      analytics.track(from || 'menu', 'select', 'download');\r\n    },\r\n    showPanel: function (panelId) {\r\n      analytics.track('panel', 'show', panelId);\r\n    },\r\n    hidePanel: function (panelId) {\r\n      analytics.track('panel', 'hide', panelId);\r\n    },\r\n    logout: function () {\r\n      analytics.track('menu', 'select', 'logout');\r\n    },\r\n    register: function (success) {\r\n      if (success === undefined) {\r\n        analytics.track('menu', 'open', 'login');\r\n      } else {\r\n        analytics.track('user', 'register', ok ? 'success' : 'fail');\r\n      }\r\n    },\r\n    login: function (ok) {\r\n      if (ok === undefined) {\r\n        analytics.track('menu', 'open', 'login');\r\n      } else {\r\n        analytics.track('user', 'login', ok ? 'success' : 'fail');\r\n      }\r\n    },\r\n    enableLiveJS: function (ok) {\r\n      analytics.track('button', 'auto-run js', ok ? 'on' : 'off');\r\n    },\r\n    archiveView: function (visible) {\r\n      analytics.track('button', 'view archive', visible ? 'on' : 'off');\r\n    },\r\n    archive: function (url) {\r\n      analytics.track('button', 'archive', url);\r\n    },\r\n    unarchive: function (url) {\r\n      analytics.track('button', 'unarchive', url);\r\n    },\r\n    loadGist: function (id) {\r\n      analytics.track('state', 'load gist', id);\r\n    },\r\n    layout: function (panelsVisible) {\r\n      var layout = [], panel = '';\r\n\r\n      for (panel in panelsVisible) {\r\n        layout.push(panel.id);\r\n      }\r\n\r\n      analytics.track('layout', 'update', layout.sort().join(',') || 'none');\r\n    },\r\n    run: function (from) {\r\n      analytics.track(from || 'button', 'run with js');\r\n    },\r\n    publishVanity: function () {\r\n      analytics.track('bin', 'publish-vanity');\r\n    },\r\n    runconsole: function (from) {\r\n      analytics.track(from || 'button', 'run console');\r\n    },\r\n    welcomePanelState: function (state) {\r\n      var s = 'close';\r\n      if (state) {\r\n        s = 'open';\r\n      }\r\n      analytics.track('state', 'welcome-panel', s);\r\n    },\r\n    welcomePanelLink: function (url) {\r\n      analytics.track('welcome-panel-link', url);\r\n    }\r\n  };\r\n\r\n  // misses the asset upload one\r\n  $('a[data-pro=\"true\"]').on('click', function () {\r\n    analytics.track('try-pro', $(this).text());\r\n  });\r\n\r\n  return jsbin.analytics = analytics;\r\n});\ndefine('skylark-jsbin-client/chrome/settings',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n  /*global jsbin, $*/\r\n\r\n  var settings = {\r\n    save: function (callback) {\r\n      localStorage.setItem('settings', JSON.stringify(jsbin.settings));\r\n      if (!callback) {\r\n        callback = function () {};\r\n      }\r\n\r\n      $.ajax({\r\n        url: '/account/editor',\r\n        type: 'POST',\r\n        dataType: 'json',\r\n        data: {\r\n          settings: localStorage.settings,\r\n          _csrf: jsbin.state.token\r\n        },\r\n        success: function () {\r\n          if (console && console.log) {\r\n            console.log('settings saved');\r\n          }\r\n          callback(true);\r\n        },\r\n        error: function (xhr, status) {\r\n          callback(false);\r\n        }\r\n      });\r\n    }\r\n  };\r\n});\ndefine('skylark-jsbin-client/render/saved-history-preview',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n  /*global jsbin, $, $document, analytics*/\r\n  'use strict';\r\n  if (!jsbin.user || !jsbin.user.name || jsbin.embed) {\r\n    return;\r\n  }\r\n\r\n  var $body = $('body'),\r\n      loaded = false,\r\n      requestAttempts = 5,\r\n      $history; // set in hookUserHistory()\r\n\r\n  $document.on('history:open', function () {\r\n    if ($history && jsbin.panels.getVisible().length === 0) {\r\n      $history.appendTo('main');\r\n    }\r\n  }).on('history:close', function () {\r\n    if ($history === null) {\r\n      $history = $('#history').detach();\r\n    }\r\n  });\r\n\r\n  var loadList = function () {\r\n    if (loaded) {\r\n      return;\r\n    }\r\n\r\n    if ($('html').hasClass('public-listing')) {\r\n      hookUserHistory();\r\n    } else {\r\n      $.ajax({\r\n        dataType: 'html',\r\n        url: jsbin.root + '/list',\r\n        error: function () {\r\n          requestAttempts--;\r\n          if (requestAttempts > 0) {\r\n            $('#history').remove();\r\n            setTimeout(loadList, 500);\r\n          } else {\r\n            console.error('Giving up to load history');\r\n          }\r\n        },\r\n        success: function (html) {\r\n          $('#history').remove();\r\n          var frag = $(html);\r\n          if (jsbin.mobile) {\r\n            // mobile is particularly slow at rendering 1,000s of tbodys\r\n            // so we'll remove some to relieve the pressure.\r\n            frag.find('tbody:gt(50)').remove();\r\n          }\r\n          $body.append(frag);\r\n          hookUserHistory();\r\n          loaded = true;\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  var updatePreview = function(url, $iframe) {\r\n    $iframe.attr('src', url + '/quiet');\r\n    $iframe.removeAttr('hidden');\r\n  };\r\n\r\n  var updateViewing = function (url, $viewing) {\r\n    $viewing.html('<a href=\"' + url + '\">' + url + '</a>');\r\n  };\r\n\r\n  var updateLayout = function ($tbodys, archiveMode) {\r\n    var $parent = $tbodys.parent();\r\n    $tbodys\r\n      .detach()\r\n      .each(function () {\r\n        var $tbody = $(this),\r\n            filter = archiveMode ? '.archived' : ':not(.archived)',\r\n            $trs = $('tr' + filter, $tbody).filter(':not(.spacer)');\r\n        if ($trs.length > 0) {\r\n          $trs.filter('.first').removeClass('first');\r\n          $tbody.removeClass('hidden');\r\n          $trs.first().addClass('first');\r\n        } else {\r\n          $tbody.addClass('hidden');\r\n        }\r\n      })\r\n      .appendTo($parent);\r\n  };\r\n\r\n  var hookUserHistory = function () {\r\n    // Loading the HTML from the server may have failed\r\n    $history = $('#history').detach();\r\n    if (!$history.length) {\r\n      return $history;\r\n    }\r\n\r\n    // Cache some useful elements\r\n    var $iframe = $('iframe', $history),\r\n        $viewing = $('#viewing', $history),\r\n        $bins = $history,\r\n        $tbodys = $('tbody', $history),\r\n        $trs = $('tr', $history),\r\n        $toggle = $('.toggle_archive', $history),\r\n        current = null,\r\n        hoverTimer = null;\r\n\r\n    // Archive & un-archive click handlers\r\n    $bins.delegate('.archive, .unarchive', 'click', function () {\r\n      var $this = $(this),\r\n          $row = $this.parents('tr');\r\n      // Instantly update this row and the page layout\r\n      $row.toggleClass('archived');\r\n\r\n      analytics[this.pathname.indexOf('unarchive') === -1 ? 'archive' : 'unarchive'](jsbin.root + $row.data('url'));\r\n\r\n      updateLayout($tbodys, $history.hasClass('archive_mode'));\r\n      // Then send the update to the server\r\n      $.ajax({\r\n        type: 'POST',\r\n        url: $this.attr('href'),\r\n        error: function () {\r\n          // Undo if something went wrong\r\n          alert('Something went wrong, please try again');\r\n          $row.toggleClass('archived');\r\n          updateLayout($tbodys, $history.hasClass('archive_mode'));\r\n        },\r\n        success: function () {}\r\n      });\r\n      return false;\r\n    });\r\n\r\n    // Handle toggling of archive view\r\n    $toggle.change(function () {\r\n      $history.toggleClass('archive_mode');\r\n      var archive = $history.hasClass('archive_mode');\r\n      analytics.archiveView(archive);\r\n      updateLayout($tbodys, archive);\r\n    });\r\n\r\n    var selected = null;\r\n    $bins.delegate('a', 'click', function (event) {\r\n      if (event.shiftKey || event.metaKey) { return; }\r\n\r\n      var $this = $(this);\r\n\r\n      if ($this.closest('.action').length) {\r\n        // let the existing handlers deal with action links\r\n        return;\r\n      }\r\n\r\n      event.preventDefault();\r\n      event.stopImmediatePropagation(); // prevent further delegates\r\n      if ($this.data('toggle') === 'history') {\r\n        jsbin.panels.allEditors(function (panel) {\r\n          if (panel.editor.getCode().trim().length) {\r\n            panel.show();\r\n          }\r\n        });\r\n        return;\r\n      }\r\n      var $tr = $this.closest('tr');\r\n      var data = $tr.data();\r\n      var url = jsbin.root + data.url;\r\n\r\n      if (selected === this) {\r\n        window.location = data.editUrl;\r\n      } else {\r\n        $trs.removeClass('selected');\r\n        $tr.addClass('selected');\r\n        updatePreview(url, $iframe);\r\n        updateViewing(url, $viewing);\r\n\r\n        selected = this;\r\n      }\r\n    });\r\n\r\n    // Load bin from data-edit-url attribute when user clicks on a row\r\n    $bins.delegate('tr:not(.spacer)', 'click', function (event) {\r\n      if (event.shiftKey || event.metaKey) { return; }\r\n      $(this).find('.url a:first').click();\r\n    });\r\n\r\n    // Update the time every 30 secs\r\n    // Need to replace Z in ISO8601 timestamp with +0000 so prettyDate() doesn't\r\n    // completely remove it (and parse the date using the local timezone).\r\n    $('a[pubdate]', $history).attr('pubdate', function (i, val) {\r\n      return val.replace('Z', '+0000');\r\n    }).prettyDate();\r\n\r\n    // Update the layout straight away\r\n    setTimeout(function () {\r\n      updateLayout($tbodys, false);\r\n    }, 0);\r\n\r\n    $document.trigger('history:open');\r\n\r\n    return $history;\r\n  };\r\n\r\n  // inside a ready call because history DOM is rendered *after* our JS to improve load times.\r\n  $(document).on('jsbinReady', function ()  {\r\n    if (jsbin.embed) {\r\n      return;\r\n    }\r\n\r\n    var $panelButtons = $('#panels a'),\r\n        $homebtn = $('.homebtn'),\r\n        panelsVisible = $body.hasClass('panelsVisible');\r\n\r\n    var panelCloseIntent = function() {\r\n      var activeCount = $panelButtons.filter('.active').length;\r\n      if (activeCount === 1 && $(this).hasClass('active')) {\r\n        loadList();\r\n      }\r\n    };\r\n\r\n    // this code attempts to only call the list ajax request only if\r\n    // the user should want to see the list page - most users will\r\n    // jump in and jump out of jsbin, and never see this page,\r\n    // so let's not send this ajax request.\r\n    //\r\n    // The list should be loaded when:\r\n    //   - user hovers the home button\r\n    //   - they close all the panels\r\n    //   - they arrive at the page with no panels open\r\n\r\n    $homebtn.on('click', loadList);\r\n    $panelButtons.on('mousedown', panelCloseIntent);\r\n\r\n    $document.on('history:load', loadList);\r\n\r\n    if (!panelsVisible) {\r\n      loadList();\r\n    }\r\n\r\n  });\r\n\r\n  return {\r\n    loadList,\r\n    updatePreview,\r\n    updateViewing,\r\n    updateLayout,\r\n    hookUserHistory\r\n  };\r\n\r\n});\ndefine('skylark-jsbin-client/chrome/esc',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n  var loginVisible = false,\r\n      dropdownOpen = false,\r\n      keyboardHelpVisible = false,\r\n      urlHelpVisible = false,\r\n      sideNavVisible = false,\r\n      infocardVisible = false;\r\n\r\n  jsbin.$document.keydown(function (event) {\r\n    if (event.which == 27) {//} || (keyboardHelpVisible && event.which == 191 && event.shiftKey && event.metaKey)) {\r\n      hideOpen();\r\n    }\r\n  });\r\n\r\n  function hideOpen() {\r\n    if (infocardVisible) {\r\n      $('#infocard').removeClass('open');\r\n      infocardVisible = false;\r\n    }\r\n    if (sideNavVisible) {\r\n      $body.removeClass('show-nav');\r\n      sideNavVisible = false;\r\n    }\r\n    if (urlHelpVisible) {\r\n      $body.removeClass('urlHelp');\r\n      urlHelpVisible = false;\r\n      analytics.closeMenu('help');\r\n    } else if (keyboardHelpVisible) {\r\n      $body.removeClass('keyboardHelp');\r\n      keyboardHelpVisible = false;\r\n      analytics.closeMenu('keyboardHelp');\r\n    } else if (dropdownOpen) {\r\n      closedropdown();\r\n    } else if (loginVisible) {\r\n      $('#login').hide();\r\n      analytics.closeMenu('login');\r\n      loginVisible = false;\r\n    }\r\n  }\r\n\r\n  jsbin.$document.delegate('.modal', 'click', function (event) {\r\n    if ($(event.target).is('.modal')) {\r\n      hideOpen();\r\n    }\r\n  });\r\n});\r\n\ndefine('skylark-jsbin-client/chrome/share',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n  'use strict';\r\n  /*globals $, panels, saveChecksum, jsbin, $document, documentTitle*/\r\n\r\n  // only continue if the new share is enabled\r\n  if ($('#sharemenu .share-split').length === 0) {\r\n    return;\r\n  }\r\n\r\n  var mapping = {\r\n    live: 'output',\r\n    javascript: 'js'\r\n  };\r\n  var $sharepanels = $('#sharepanels input[type=\"checkbox\"]');\r\n\r\n  var selectedSnapshot = jsbin.state.revision;\r\n\r\n  $document.on('saved', function () {\r\n    selectedSnapshot = jsbin.state.revision;\r\n  });\r\n\r\n  $document.on('snapshot', function () {\r\n    jsbin.state.changed = false;\r\n    if (window.history.replaceState) {\r\n      window.history.replaceState(null, '', jsbin.getURL({ withRevision: true }) + '/edit?' + panels.getQuery());\r\n    }\r\n  });\r\n\r\n  var $sharemenu = $('#sharemenu').bind('open', function () {\r\n    // select the right panels\r\n    // hideOpen();\r\n    $sharepanels.prop('checked', false);\r\n    jsbin.panels.getVisible().forEach(function (p) {\r\n      $sharepanels.filter('[value=\"' + (mapping[p.id] || p.id) + '\"]').prop('checked', true);\r\n    });\r\n\r\n    // if we're the latest bin, then allow the user to switch to a snapshot\r\n    if (jsbin.state.latest) {\r\n      // if they have write access then select the latest & live by default\r\n      if (jsbin.state.checksum) {\r\n        $realtime.prop('checked', jsbin.state.latest);\r\n        $snapshot.prop('checked', false);\r\n\r\n        $andlive.show();\r\n      // otherwise select the snapshot first\r\n      } else {\r\n        $realtime.prop({ checked: false });\r\n        $snapshot.prop('checked', true);\r\n        $andlive.hide();\r\n      }\r\n\r\n      $withLiveReload.show();\r\n    } else {\r\n      // otherwise, disable live\r\n      $realtime.prop({ checked: false, disabled: true });\r\n      $snapshot.prop('checked', true);\r\n      $withLiveReload.hide();\r\n    }\r\n\r\n    update();\r\n  });\r\n  $sharemenu.find('.lockrevision').on('change', function () {\r\n    saveChecksum = false; // jshint ignore:line\r\n    jsbin.state.checksum = false;\r\n    $document.trigger('locked');\r\n  });\r\n  var $sharepreview = $('#share-preview');\r\n  var $realtime = $('#sharebintype input[type=radio][value=\"realtime\"]');\r\n  var $snapshot = $('#sharebintype input[type=radio][value=\"snapshot\"]');\r\n  var link = $sharemenu.find('a.link')[0];\r\n  var linkselect = $sharemenu.find('input[name=\"url\"]')[0];\r\n  var embed = $sharemenu.find('textarea')[0];\r\n  var form = $sharemenu.find('form')[0];\r\n  var $directLinks = $sharemenu.find('.direct-links');\r\n  var $andlive = $('#andlive');\r\n  var $withLiveReload = $sharemenu.find('.codecasting');\r\n\r\n  // get an object representation of a form's state\r\n  function formData(form) {\r\n    var length = form.length;\r\n    var data = {};\r\n    var value;\r\n    var el;\r\n    var type;\r\n    var name;\r\n\r\n    var append = function (data, name, value) {\r\n      if (data[name] === undefined) {\r\n        data[name] = value;\r\n      } else {\r\n        if (typeof data[name] === 'string') {\r\n          data[name] = [data[name]];\r\n        }\r\n        data[name].push(value);\r\n      }\r\n    };\r\n\r\n    for (var i = 0; i < length; i++) {\r\n      el = form[i];\r\n      value = el.value;\r\n      type = el.type;\r\n      name = el.name;\r\n\r\n      if (type === 'radio') {\r\n        if (el.checked) {\r\n          append(data, name, value);\r\n        }\r\n      } else if (type === 'checkbox') {\r\n        if (data[name] === undefined) {\r\n          data[name] = [];\r\n        }\r\n        if (el.checked) {\r\n          append(data, name, value);\r\n        }\r\n      } else {\r\n        append(data, name, value);\r\n      }\r\n    }\r\n\r\n    return data;\r\n  }\r\n\r\n  function update() {\r\n    var data = formData(form);\r\n    var url = jsbin.getURL({ root: jsbin.shareRoot });\r\n    var OGurl = jsbin.getURL();\r\n\r\n    if (data.state === 'snapshot' && jsbin.state.latest) {\r\n      url += '/' + selectedSnapshot;\r\n      OGurl += '/' + selectedSnapshot;\r\n    }\r\n\r\n    var shareurl = url;\r\n\r\n    // get a comma separated list of the panels that should be shown\r\n    var query = data.panel.join(',');\r\n\r\n    if (query) {\r\n      query = '?' + query;\r\n    }\r\n\r\n    $sharepanels.prop('disabled', data.view === 'output');\r\n    $sharepreview.attr('class', data.view);\r\n\r\n    if (data.view !== 'output') {\r\n      $sharepreview.find('.editor div').each(function () {\r\n        this.hidden = data.panel.indexOf(this.className) === -1;\r\n      });\r\n    }\r\n\r\n    if (data.view === 'editor') {\r\n      shareurl += '/edit';\r\n    } else {\r\n      query = '';\r\n    }\r\n\r\n    // create the direct links, it'll be faster to inject HTML rather than\r\n    // updating hrefs of a bunch of HTML elements\r\n    $directLinks.empty();\r\n\r\n    var directLinksHTML = []; //['<a href=\"' + url + '.html\">html</a>'];\r\n\r\n    var code = ''\r\n    var ext = '';\r\n\r\n    code = jsbin.panels.panels.html.getCode().trim();\r\n\r\n    if (code) {\r\n      ext = processors[jsbin.state.processors.html || 'html'].extensions[0];\r\n      if (ext !== 'html') {\r\n        directLinksHTML.push('<a target=\"_blank\" href=\"' + url + '.' + ext + '\">' + ext + '</a>');\r\n      } else if (code.toLowerCase().indexOf('<svg') === 0) {\r\n        directLinksHTML.push('<a target=\"_blank\" href=\"' + url + '.svg\">svg</a>');\r\n      }\r\n    }\r\n\r\n    if (jsbin.panels.panels.css.getCode().trim()) {\r\n      ext = processors[jsbin.state.processors.css || 'css'].extensions[0];\r\n      if (ext !== 'css') {\r\n        directLinksHTML.push('<a target=\"_blank\" href=\"' + url + '.css\">css</a>');\r\n      }\r\n      directLinksHTML.push('<a target=\"_blank\" href=\"' + url + '.' + ext + '\">' + ext + '</a>');\r\n    }\r\n\r\n    code = jsbin.panels.panels.javascript.getCode().trim();\r\n\r\n    if (code) {\r\n      ext = processors[jsbin.state.processors.javascript || 'javascript'].extensions[0];\r\n\r\n      if (ext !== 'js') {\r\n        directLinksHTML.push('<a target=\"_blank\" href=\"' + url + '.js\">js</a>');\r\n      }\r\n\r\n      try {\r\n        JSON.parse(code);\r\n        directLinksHTML.push('<a target=\"_blank\" href=\"' + url + '.json\">json</a>');\r\n      } catch (e) {\r\n        directLinksHTML.push('<a target=\"_blank\" href=\"' + url + '.' + ext + '\">' + ext + '</a>');\r\n      }\r\n\r\n    }\r\n\r\n    $directLinks.html(directLinksHTML.join(''));\r\n\r\n    linkselect.value = link.href = shareurl + query;\r\n    embed.value = ('<a class=\"jsbin-embed\" href=\"' + OGurl + '/embed' + query + '\">' + documentTitle + ' on jsbin.com</a><' + 'script src=\"' + jsbin.static + '/js/embed.min.js?' + jsbin.version + '\"><' + '/script>').replace(/<>\"&/g, function (m) {\r\n        return {\r\n          '<': '&lt;',\r\n          '>': '&gt;',\r\n          '\"': '&quot;',\r\n          '&': '&amp;'\r\n        }[m];\r\n      });\r\n  }\r\n\r\n  // when the user clicks on \"snapshot\" we automatically create a snapshot at\r\n  // that point (technically this isn't a snapshot, but clearing the write\r\n  // access, so the next user input creates the *next* snapshot - which is\r\n  // actually the latest copy).\r\n  $('#sharebintype input[type=radio]').on('change', function () {\r\n    if (this.value === 'snapshot') {\r\n      jsbin.state.checksum = false;\r\n      saveChecksum = false; // jshint ignore:line\r\n      $withLiveReload.hide();\r\n    } else {\r\n      $withLiveReload.show();\r\n    }\r\n  });\r\n\r\n  $sharemenu.find('input').on('change', update);\r\n\r\n  $document.on('saved', function () {\r\n\r\n    // revert to the latest bin state\r\n    $realtime.prop('checked', true);\r\n\r\n    // show the share menu\r\n    $sharemenu.removeClass('hidden');\r\n\r\n    update();\r\n  });\r\n\r\n  var $share = $('#share').closest('.menu');\r\n  var shareElement = $('#sharemenu a')[0];\r\n  var $showShare = $('a.show-share').on('click', function () {\r\n    if ($share.hasClass('open')) {\r\n      closedropdown(shareElement);\r\n    } else {\r\n      opendropdown(shareElement, true); // true = no focus\r\n    }\r\n    $showShare.blur();\r\n  });\r\n\r\n});\r\n\ndefine('skylark-jsbin-client/chrome/issue',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n\r\n  /*global $:true, jsbin:true */\r\n    'use strict';\r\n\r\n    function githubIssue() {\r\n      var url = 'http://github.com/jsbin/jsbin/issues/new';\r\n      var body = ['Please provide any additional information, record a screencast ',\r\n                 'with http://quickcast.io or http://screenr.com and attach a screenshot ',\r\n                 'if possible.\\n\\n**JS Bin info**\\n\\n* [%url%/edit](%url%/edit)\\n* ',\r\n                 window.navigator.userAgent + '\\n',\r\n                 (jsbin.user && jsbin.user.name ? '* ' + jsbin.user.name : ''),\r\n                 '\\n'].join('');\r\n\r\n      return url + '?body=' + encodeURIComponent(body.replace(/%url%/g, jsbin.getURL({ withRevision: true })));\r\n    }\r\n\r\n    var $newissue = $('#newissue');\r\n\r\n    $('#help').parent().on('open', function () {\r\n      $newissue.attr('href', githubIssue());\r\n    });\r\n\r\n    return githubIssue;\r\n\r\n\r\n});\ndefine('skylark-jsbin-client/chrome/download',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\",\r\n   \"./analytics\"\r\n],function ($,jsbin,analytics) {\r\n\t$('#download').click(function (event) {\r\n\t  event.preventDefault();\r\n\t  window.location = jsbin.getURL({ withRevision: true }) + '/download';\r\n\t  analytics.download();\r\n\t});\r\n});\ndefine('skylark-jsbin-client/chrome/login',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n  /* global $ */\r\n\r\n  $('form.login').submit(function (event) {\r\n    'use strict';\r\n    event.preventDefault();\r\n\r\n    var form = $(this),\r\n        name = form.find('input[name=username]').val(),\r\n        key = form.find('input[name=password]').val(),\r\n        email = form.find('input[name=email]').val(),\r\n        $loginFeedback = form.find('.loginFeedback');\r\n\r\n\r\n    // jsbin.settings.home = name; // will save later\r\n    $loginFeedback.show().text('Checking...');\r\n\r\n    $.ajax({\r\n      url: form.attr('action'),\r\n      data: { username: name, key: key, email: email },\r\n      type: 'POST',\r\n      dataType: 'json',\r\n      complete: function (jqXHR) {\r\n        var data = $.parseJSON(jqXHR.responseText) || {};\r\n        // cookie is required to share with the server so we can do a redirect on new bin\r\n        if (jqXHR.status === 200) {\r\n          if (data.avatar) {\r\n            $('a.avatar').find('img').remove().end().prepend('<img src=\"' + data.avatar + '\">');\r\n          }\r\n          if (data.message) {\r\n            $loginFeedback.text(data.message);\r\n          } else {\r\n            window.location = window.location.pathname + window.location.search;\r\n          }\r\n        } else {\r\n          analytics.login(false);\r\n          $loginFeedback.text(data.message || ('\"' + name + '\" has already been taken. Please either double check the password, or choose another username.'));\r\n        }\r\n      }\r\n    });\r\n  });\r\n\r\n});\ndefine('skylark-jsbin-client/chrome/tips',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n\r\n    var $html = $(document.documentElement),\r\n        $tip = $('#tip'),\r\n        $tipContent = $('p', $tip),\r\n        tipTimeout;\r\n\r\n    var removeTip = function (cb) {\r\n      $html.removeClass('showtip');\r\n      $tip.removeClass();\r\n      $tipContent.html('');\r\n      $(window).resize();\r\n      cb && setTimeout(cb, 0);\r\n    };\r\n\r\n    var setTip = function (data) {\r\n      clearTimeout(tipTimeout);\r\n      $tipContent.html(data.content);\r\n      $tip.removeClass().addClass(data.type || 'info');\r\n      $html.addClass('showtip');\r\n      if (!data.autohide) return;\r\n      tipTimeout = setTimeout(function () {\r\n        removeTip();\r\n      }, parseInt(data.autohide, 10) || 5 * 1000);\r\n    };\r\n\r\n    /**\r\n     * Trigger a tip to be shown.\r\n     *\r\n     *   $document.trigger('tip', 'You have an infinite loop in your HTML.');\r\n     *\r\n     *    $document.trigger('tip', {\r\n     *      type: 'error',\r\n     *      content: 'Do you even Javascript?',\r\n     *      autohide: 8000\r\n     *    });\r\n     */\r\n    jsbin.$document.on('tip', function (event, data) {\r\n      var tipData = data;\r\n      if (typeof data === 'string') {\r\n        tipData = {};\r\n        tipData.content = data;\r\n        tipData.type = 'info';\r\n      }\r\n      // If the content and the type haven't changed, just set it again.\r\n      if ($tipContent.html() === tipData.content &&\r\n          $tip.hasClass(tipData.type)) return setTip(data);\r\n      removeTip(function () {\r\n        setTip(tipData);\r\n      });\r\n    });\r\n\r\n    $('#tip').on('click', 'a.dismiss', function () {\r\n      removeTip();\r\n      return false;\r\n    });\r\n\r\n    // Escape\r\n   jsbin.$document.keydown(function (event) {\r\n      if (event.which == 27) {\r\n        removeTip();\r\n      }\r\n    });\r\n\r\n  });\ndefine('skylark-jsbin-client/chrome/keys',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n  /*global jsbin*/\r\n  /*global $document*/\r\n  'use strict';\r\n\r\n  // don't store the keys if they're logged in, since we have this on the server\r\n  if (jsbin.user && jsbin.user.name) {\r\n    return;\r\n  }\r\n\r\n  var keys = {};\r\n\r\n  var find = function (url) {\r\n    var key = keys[url || jsbin.getURL({ withRevision: true, withoutRoot: true })] || {};\r\n    return key.c;\r\n  };\r\n\r\n  try {\r\n    if ('localStorage' in window && window['localStorage'] !== null) { // jshint ignore:line\r\n\r\n    }\r\n  } catch(e){\r\n    return find;\r\n  }\r\n\r\n  function init() {\r\n    keys = JSON.parse(localStorage.keys || '{}');\r\n  }\r\n\r\n  $document.on('saved', function () {\r\n    keys[jsbin.getURL({ withRevision: false, withoutRoot: true })] = { s: jsbin.state.revsion, c: jsbin.state.checksum, d: (new Date()).getTime() };\r\n    localStorage.keys = JSON.stringify(keys);\r\n  });\r\n\r\n  // update the key lookup when a new key is stored\r\n  window.addEventListener('storage', function (event) {\r\n    if (event.key === 'keys') {\r\n      init();\r\n    }\r\n  });\r\n\r\n  init();\r\n\r\n  return jsbin.keys = find;\r\n\r\n});\ndefine('skylark-jsbin-client/chrome/save',[\r\n   \"../jsbin\"\r\n],function (jsbin) {\r\n  /*jshint strict: false */\r\n  /*globals $, analytics, jsbin, documentTitle, $document, throttle, editors*/\r\n  var saving = {\r\n    todo: {\r\n      html: false,\r\n      css: false,\r\n      javascript: false\r\n    },\r\n    _inprogress: false,\r\n    inprogress: function (inprogress) {\r\n      if (typeof inprogress === 'undefined') {\r\n        return saving._inprogress;\r\n      }\r\n\r\n      saving._inprogress = inprogress;\r\n      if (inprogress === false) {\r\n        var panels = ['html','css','javascript'];\r\n\r\n        var save = function () {\r\n          var todo = panels.pop();\r\n          if (todo && saving.todo[todo]) {\r\n            saving._inprogress = true;\r\n            updateCode(todo, save);\r\n            saving.todo[todo] = false;\r\n          } else if (todo) {\r\n            save();\r\n          }\r\n        };\r\n\r\n        save();\r\n      }\r\n    }\r\n  };\r\n\r\n  function getTagContent(tag) {\r\n    var html = jsbin.panels.panels.html.getCode();\r\n    var result = '';\r\n\r\n    // if we don't have the tag, bail with an empty string\r\n    if (html.indexOf('<' + tag) === -1) {\r\n      return result;\r\n    }\r\n\r\n    if (tag !== 'title' && tag !== 'meta') {\r\n      console.error('getTagContent for ' + tag + ' is not supported');\r\n      return result;\r\n    }\r\n\r\n    // grab the content based on the earlier defined regexp\r\n    html.replace(getTagContent.re[tag], function (all, capture1, capture2) {\r\n      result = tag === 'title' ? capture1 : capture2;\r\n    });\r\n\r\n    return result;\r\n  }\r\n\r\n  getTagContent.re = {\r\n    meta: /(<meta name=\"description\" content=\")([^\"]*)/im,\r\n    title: /<title>(.*)<\\/title>/im\r\n  };\r\n\r\n\r\n  // to allow for download button to be introduced via beta feature\r\n  $('a.save').click(function (event) {\r\n    event.preventDefault();\r\n\r\n    analytics.milestone();\r\n    // if save is disabled, hitting save will trigger a reload\r\n    var ajax = true;\r\n    if (jsbin.saveDisabled === true) {\r\n      ajax = false;\r\n    }\r\n\r\n    if ((jsbin.state.changed || jsbin.mobile) || !jsbin.owner()) {\r\n      saveCode('save', ajax);\r\n    }\r\n\r\n    return false;\r\n  });\r\n\r\n  var $shareLinks = $('#share .link');\r\n  var $panelCheckboxes = $('#sharemenu #sharepanels input');\r\n\r\n  // TODO remove split when live\r\n  var split = $('#sharemenu .share-split').length;\r\n\r\n  // TODO candidate for removal\r\n  function updateSavedState() {\r\n    'use strict';\r\n    if (split) {\r\n      return;\r\n    }\r\n\r\n    var mapping = {\r\n      live: 'output',\r\n      javascript: 'js',\r\n      css: 'css',\r\n      html: 'html',\r\n      console: 'console'\r\n    };\r\n\r\n    var withRevision = true;\r\n\r\n    var query = $panelCheckboxes.filter(':checked').map(function () {\r\n      return mapping[this.getAttribute('data-panel')];\r\n    }).get().join(',');\r\n    $shareLinks.each(function () {\r\n      var path = this.getAttribute('data-path');\r\n      var url = jsbin.getURL({ withRevision: withRevision }) + path + (query && this.id !== 'livepreview' ? '?' + query : ''),\r\n          nodeName = this.nodeName;\r\n      var hash = panels.getHighlightLines();\r\n\r\n      if (hash) {\r\n        hash = '#' + hash;\r\n      }\r\n\r\n      if (nodeName === 'A') {\r\n        this.href = url;\r\n      } else if (nodeName === 'INPUT') {\r\n        this.value = url;\r\n        if (path === '/edit') {\r\n          this.value += hash;\r\n        }\r\n      } else if (nodeName === 'TEXTAREA') {\r\n        this.value = ('<a class=\"jsbin-embed\" href=\"' + url + hash + '\">' + documentTitle + '</a><' + 'script src=\"' + jsbin.static + '/js/embed.js\"><' + '/script>').replace(/<>\"&/g, function (m) {\r\n            return {\r\n              '<': '&lt;',\r\n              '>': '&gt;',\r\n              '\"': '&quot;',\r\n              '&': '&amp;'\r\n            }[m];\r\n          });\r\n      }\r\n    });\r\n  }\r\n\r\n  $('#sharemenu').bind('open', updateSavedState);\r\n  $('#sharebintype input[type=radio]').on('click', function () {\r\n    if (this.value === 'snapshot') {\r\n      jsbin.state.checksum = false;\r\n      saveChecksum = false;\r\n    }\r\n    updateSavedState();\r\n  });\r\n\r\n  var lastHTML = null;\r\n\r\n  function updateDocMeta(event, data) {\r\n    if (data) {\r\n      if (data.panelId !== 'html') {\r\n        return; // ignore non-html updates\r\n      }\r\n    }\r\n\r\n    var currentHTML = jsbin.panels.panels.html.getCode();\r\n    if (lastHTML !== currentHTML) {\r\n      lastHTML = currentHTML;\r\n\r\n      var description = getTagContent('meta');\r\n      if (description !== jsbin.state.description) {\r\n        jsbin.state.description = description;\r\n        jsbin.state.updateSettings({ description: description });\r\n      }\r\n\r\n      var title = getTagContent('title');\r\n      if (title !== jsbin.state.title) {\r\n        jsbin.state.title = title;\r\n        jsbin.state.updateSettings({ title: title });\r\n\r\n        documentTitle = title;\r\n        if (documentTitle) {\r\n          document.title = documentTitle + ' - ' + jsbin.name;\r\n        } else {\r\n          document.title = jsbin.name;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  $document.on('saveComplete', updateDocMeta); // update, not create\r\n\r\n  $document.on('saved', function () {\r\n    jsbin.state.changed = false;\r\n    updateSavedState();\r\n\r\n    $('#sharebintype input[type=radio][value=\"realtime\"]').prop('checked', true);\r\n\r\n    $shareLinks.closest('.menu').removeClass('hidden');\r\n\r\n    $('#jsbinurl').attr('href', jsbin.getURL()).removeClass('hidden');\r\n    $('#clone').removeClass('hidden');\r\n\r\n    updateDocMeta();\r\n  });\r\n\r\n  var saveChecksum = jsbin.state.checksum || store.sessionStorage.getItem('checksum') || false;\r\n\r\n  // store it back on state\r\n  jsbin.state.checksum = saveChecksum;\r\n\r\n  if (saveChecksum) {\r\n    // remove the disabled class, but also remove the cancelling event handlers\r\n    $('#share div.disabled').removeClass('disabled').unbind('click mousedown mouseup');\r\n  } else {\r\n    $('#share div.disabled').one('click', function (event) {\r\n      event.preventDefault();\r\n      $('a.save').click();\r\n    });\r\n  }\r\n\r\n  $document.one('saved', function () {\r\n    $('#share div.disabled').removeClass('disabled').unbind('click mousedown mouseup');\r\n  });\r\n\r\n  function onSaveError(jqXHR, panelId) {\r\n    if (jqXHR.status === 413) {\r\n      // Hijack the tip label to show an error message.\r\n      $('#tip p').html('Sorry this bin is too large for us to save');\r\n      $(document.documentElement).addClass('showtip');\r\n    } else if (jqXHR.status === 403) {\r\n      $document.trigger('tip', {\r\n        type: 'error',\r\n        content: 'I think there\\'s something wrong with your session and I\\'m unable to save. <a href=\"' + window.location + '\"><strong>Refresh to fix this</strong></a>, you <strong>will not</strong> lose your code.'\r\n      });\r\n    } else if (panelId) {\r\n      if (panelId) { savingLabels[panelId].text('Saving...').animate({ opacity: 1 }, 100); }\r\n      window._console.error({message: 'Warning: Something went wrong while saving. Your most recent work is not saved.'});\r\n    }\r\n  }\r\n\r\n\r\n\r\n  // only start live saving it they're allowed to (whereas save is disabled if they're following)\r\n  if (!jsbin.saveDisabled) {\r\n    $('.code.panel .label .name').append('<span class=\"saved\">Saved</span>');\r\n\r\n    var savingLabels = {\r\n      html: $('.panel.html .name span.saved'),\r\n      javascript: $('.panel.javascript .name span.saved'),\r\n      css: $('.panel.css .name span.saved'),\r\n    };\r\n\r\n    $document.bind('jsbinReady', function () {\r\n      jsbin.state.changed = false;\r\n      jsbin.panels.allEditors(function (panel) {\r\n        panel.on('processor', function () {\r\n          // if the url doesn't match the root - i.e. they've actually saved something then save on processor change\r\n          if (jsbin.root !== jsbin.getURL()) {\r\n            $document.trigger('codeChange', [{ panelId: panel.id }]);\r\n          }\r\n        });\r\n      });\r\n\r\n      $document.bind('codeChange', function (event, data) {\r\n        jsbin.state.changed = true;\r\n        // savingLabels[data.panelId].text('Saving');\r\n        if (savingLabels[data.panelId]) {\r\n          savingLabels[data.panelId].css({ 'opacity': 0 }).stop(true, true);\r\n        }\r\n      });\r\n\r\n      $document.bind('saveComplete', throttle(function (event, data) {\r\n        // show saved, then revert out animation\r\n        savingLabels[data.panelId]\r\n          .text('Saved')\r\n          .stop(true, true)\r\n          .animate({ opacity: 1 }, 100)\r\n          .delay(1200)\r\n          .animate({ opacity: 0 }, 500);\r\n      }, 500));\r\n\r\n      $document.bind('codeChange', throttle(function (event, data) {\r\n        if (!data.panelId) {\r\n          return;\r\n        }\r\n\r\n        if (jsbin.state.deleted) {\r\n          return;\r\n        }\r\n\r\n        var panelId = data.panelId;\r\n\r\n        jsbin.panels.savecontent();\r\n\r\n        if (saving.inprogress()) {\r\n          // queue up the request and wait\r\n          saving.todo[panelId] = true;\r\n          return;\r\n        }\r\n\r\n        saving.inprogress(true);\r\n\r\n        // We force a full save if there's no checksum OR if there's no bin code/url\r\n        if (!saveChecksum || !jsbin.state.code) {\r\n          // create the bin and when the response comes back update the url\r\n          saveCode('save', true);\r\n        } else {\r\n          updateCode(panelId);\r\n        }\r\n      }, 30 * 1000));\r\n    });\r\n  } else {\r\n    $document.one('jsbinReady', function () {\r\n      'use strict';\r\n      var shown = false;\r\n      if (!jsbin.embed && !jsbin.sandbox) {\r\n        $document.on('codeChange.live', function (event, data) {\r\n          if (!data.onload && !shown && data.origin !== 'setValue') {\r\n            shown = true;\r\n            var ismac = navigator.userAgent.indexOf(' Mac ') !== -1;\r\n            var cmd = ismac ? '⌘' : 'ctrl';\r\n            var shift = ismac ? '⇧' : 'shift';\r\n            var plus = ismac ? '' : '+';\r\n\r\n            $document.trigger('tip', {\r\n              type: 'notification',\r\n              content: 'You\\'re currently viewing someone else\\'s live stream, but you can <strong><a class=\"clone\" href=\"' + jsbin.root + '/clone\">clone your own copy</a></strong> (' + cmd + plus + shift + plus + 'S) at any time to save your edits'\r\n            });\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  function compressKeys(keys, obj) {\r\n    obj.compressed = keys;\r\n    keys.split(',').forEach(function (key) {\r\n      obj[key] = LZString.compressToUTF16(obj[key]);\r\n    });\r\n  }\r\n\r\n  function updateCode(panelId, callback) {\r\n    var panelSettings = {};\r\n\r\n    if (jsbin.state.processors) {\r\n      panelSettings.processors = jsbin.state.processors;\r\n    }\r\n\r\n    var data = {\r\n      code: jsbin.state.code,\r\n      revision: jsbin.state.revision,\r\n      method: 'update',\r\n      panel: panelId,\r\n      content: editors[panelId].getCode(),\r\n      checksum: saveChecksum,\r\n      settings: JSON.stringify(panelSettings),\r\n    };\r\n\r\n    if (jsbin.settings.useCompression && location.protocol === 'http:') {\r\n      compressKeys('content', data);\r\n    }\r\n\r\n    if (jsbin.state.processors[panelId] &&\r\n      jsbin.state.processors[panelId] !== panelId &&\r\n      jsbin.state.cache[panelId]) {\r\n      data.processed = jsbin.state.cache[panelId].result;\r\n    }\r\n\r\n    $.ajax({\r\n      url: jsbin.getURL({ withRevision: true }) + '/save',\r\n      data: data,\r\n      type: 'post',\r\n      dataType: 'json',\r\n      headers: {'Accept': 'application/json'},\r\n      success: function (data) {\r\n        $document.trigger('saveComplete', { panelId: panelId });\r\n        if (data.error) {\r\n          saveCode('save', true, function () {\r\n            // savedAlready = data.checksum;\r\n          });\r\n        } else {\r\n          jsbin.state.latest = true;\r\n        }\r\n      },\r\n      error: function (jqXHR) {\r\n        onSaveError(jqXHR, panelId);\r\n      },\r\n      complete: function () {\r\n        saving.inprogress(false);\r\n        if (callback) { callback(); }\r\n      }\r\n    });\r\n  }\r\n\r\n  $('a.clone').click(clone);\r\n  $('#tip').delegate('a.clone', 'click', clone);\r\n\r\n  function clone(event) {\r\n    event.preventDefault();\r\n\r\n    // save our panel layout - assumes our user is happy with this layout\r\n    jsbin.panels.save();\r\n    analytics.clone();\r\n\r\n    var $form = setupform('save,new');\r\n    $form.submit();\r\n\r\n    return false;\r\n  }\r\n\r\n  function setupform(method) {\r\n  var $form = $('form#saveform').empty()\r\n      .append('<input type=\"hidden\" name=\"javascript\" />')\r\n      .append('<input type=\"hidden\" name=\"html\" />')\r\n      .append('<input type=\"hidden\" name=\"css\" />')\r\n      .append('<input type=\"hidden\" name=\"method\" />')\r\n      .append('<input type=\"hidden\" name=\"_csrf\" value=\"' + jsbin.state.token + '\" />')\r\n      .append('<input type=\"hidden\" name=\"settings\" />')\r\n      .append('<input type=\"hidden\" name=\"checksum\" />');\r\n\r\n    var settings = {};\r\n\r\n    if (jsbin.state.processors) {\r\n      settings.processors = jsbin.state.processors;\r\n    }\r\n\r\n    // this prevents new revisions forking off the welcome bin\r\n    // because it's looking silly!\r\n    if (jsbin.state.code === 'welcome') {\r\n      $form.attr('action', '/save');\r\n    }\r\n\r\n    $form.find('input[name=settings]').val(JSON.stringify(settings));\r\n    $form.find('input[name=javascript]').val(editors.javascript.getCode());\r\n    $form.find('input[name=css]').val(editors.css.getCode());\r\n    $form.find('input[name=html]').val(editors.html.getCode());\r\n    $form.find('input[name=method]').val(method);\r\n    $form.find('input[name=checksum]').val(jsbin.state.checksum);\r\n\r\n    return $form;\r\n  }\r\n\r\n  function pad(n){\r\n    return n<10 ? '0'+n : n;\r\n  }\r\n\r\n  function ISODateString(d){\r\n    return d.getFullYear()+'-'\r\n      + pad(d.getMonth()+1)+'-'\r\n      + pad(d.getDate())+'T'\r\n      + pad(d.getHours())+':'\r\n      + pad(d.getMinutes())+':'\r\n      + pad(d.getSeconds())+'Z';\r\n  }\r\n\r\n  function saveCode(method, ajax, ajaxCallback) {\r\n    // create form and post to it\r\n    var $form = setupform(method);\r\n    // save our panel layout - assumes our user is happy with this layout\r\n    jsbin.panels.save();\r\n    jsbin.panels.saveOnExit = true;\r\n\r\n    var data = $form.serializeArray().reduce(function(obj, data) {\r\n      obj[data.name] = data.value;\r\n      return obj;\r\n    }, {});\r\n\r\n    if (jsbin.settings.useCompression) {\r\n      compressKeys('html,css,javascript', data);\r\n    }\r\n\r\n    if (ajax) {\r\n      $.ajax({\r\n        url: jsbin.getURL({ withRevision: true }) + '/save',\r\n        data: data,\r\n        dataType: 'json',\r\n        type: 'post',\r\n        headers: {'Accept': 'application/json'},\r\n        success: function (data) {\r\n          if (ajaxCallback) {\r\n            ajaxCallback(data);\r\n          }\r\n\r\n          store.sessionStorage.setItem('checksum', data.checksum);\r\n          saveChecksum = data.checksum;\r\n\r\n          jsbin.state.checksum = saveChecksum;\r\n          jsbin.state.code = data.code;\r\n          jsbin.state.revision = data.revision;\r\n          jsbin.state.latest = true; // this is never not true...end of conversation!\r\n          jsbin.state.metadata = { name: jsbin.user.name };\r\n          $form.attr('action', jsbin.getURL({ withRevision: true }) + '/save');\r\n\r\n          if (window.history && window.history.pushState) {\r\n            // updateURL(edit);\r\n            var hash = panels.getHighlightLines();\r\n            if (hash) { hash = '#' + hash; }\r\n            var query = panels.getQuery();\r\n            if (query) { query = '?' + query; }\r\n            // If split is truthy (> 0) then we are using the revisonless feature\r\n            // this is temporary until we release the feature!\r\n            window.history.pushState(null, '', jsbin.getURL({withRevision: !split}) + '/edit' + query + hash);\r\n            store.sessionStorage.setItem('url', jsbin.getURL({withRevision: !split}));\r\n          } else {\r\n            window.location.hash = data.edit;\r\n          }\r\n\r\n          $document.trigger('saved');\r\n        },\r\n        error: function (jqXHR) {\r\n          onSaveError(jqXHR, null);\r\n        },\r\n        complete: function () {\r\n          saving.inprogress(false);\r\n        }\r\n      });\r\n    } else {\r\n      $form.submit();\r\n    }\r\n  }\r\n\r\n});\ndefine('skylark-jsbin-client/chrome/navigation',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n  var $startingpoint = $('a.startingpoint').click(function (event) {\r\n    event.preventDefault();\r\n    if (localStorage) {\r\n      analytics.saveTemplate();\r\n      localStorage.setItem('saved-javascript', editors.javascript.getCode());\r\n      localStorage.setItem('saved-html', editors.html.getCode());\r\n      localStorage.setItem('saved-css', editors.css.getCode());\r\n\r\n      localStorage.setItem('saved-processors', JSON.stringify({\r\n        javascript: jsbin.panels.panels.javascript.processor.id,\r\n        html: jsbin.panels.panels.html.processor.id,\r\n        css: jsbin.panels.panels.css.processor.id,\r\n      }));\r\n\r\n      $document.trigger('tip', {\r\n        type: 'notification',\r\n        content: 'Starting template updated and saved',\r\n        autohide: 3000\r\n      });\r\n    } else {\r\n      $document.trigger('tip', {\r\n        type: 'error',\r\n        content: 'Saving templates isn\\'t supported in this browser I\\'m afraid. Sorry'\r\n      });\r\n    }\r\n    return false;\r\n  });\r\n\r\n  // if (localStorage && localStorage['saved-html']) {\r\n    // $startingpoint.append('')\r\n  // }\r\n\r\n  $('a.disabled').on('click mousedown mouseup', function (event) {\r\n    event.stopImmediatePropagation();\r\n    return false;\r\n  });\r\n\r\n  $('#loginbtn').click(function () {\r\n    analytics.login();\r\n    $(this).toggleClass('open');\r\n    // $('#login').show();\r\n    // loginVisible = true;\r\n    // return false;\r\n  });\r\n\r\n  $('a.logout').click(function (event) {\r\n    event.preventDefault();\r\n\r\n    // We submit a form here because I can't work out how to style the button\r\n    // element in the form to look the same as the anchor. Ideally we would\r\n    // remove that and just let the form submit itself...\r\n    $(this.hash).submit();\r\n    // Clear session storage so private bins wont be cached.\r\n    for (i = 0; i < store.sessionStorage.length; i++) {\r\n      key = store.sessionStorage.key(i);\r\n      if (key.indexOf('jsbin.content.') === 0) {\r\n        store.sessionStorage.removeItem(key);\r\n      }\r\n    }\r\n  });\r\n\r\n  $('.homebtn').click(function (event, data) {\r\n    if (this.id === 'avatar') {\r\n      analytics.openFromAvatar();\r\n    } else if (this.id === 'profile') {\r\n      analytics.openFromAvatar();\r\n      $(this).closest('.open').removeClass('open');\r\n    } else {\r\n      analytics.open(data);\r\n    }\r\n\r\n    hideOpen();\r\n\r\n    jsbin.panels.hideAll();\r\n    return false;\r\n  });\r\n\r\n  var $lockrevision = $('div.lockrevision').on('click', function (event) {\r\n    event.preventDefault();\r\n    saveChecksum = false;\r\n    $document.trigger('locked');\r\n  }).on('mouseup', function () {\r\n    return false;\r\n  });\r\n\r\n  $document.on('locked', function () {\r\n    if (!$lockrevision.data('locked')) {\r\n      analytics.lock();\r\n      $lockrevision.removeClass('icon-unlocked').addClass('icon-lock');\r\n      $lockrevision.html('<span>This bin is now locked from further changes</span>');\r\n      $lockrevision.data('locked', true);\r\n    }\r\n  });\r\n\r\n  // var $lockrevision = $('.lockrevision').on('click', function (event) {\r\n  // });\r\n\r\n  $document.on('saved', function () {\r\n    $lockrevision.removeClass('icon-lock').addClass('icon-unlocked').data('locked', false);\r\n    $lockrevision.html('<span>Click to lock and prevent further changes</span>');\r\n  });\r\n\r\n  // TODO decide whether to remove this, since it definitely doesn't work!\r\n  // $('#share input[type=text], #share textarea').on('beforecopy', function (event) {\r\n  //   console.log(this, this.getAttribute('data-path'));\r\n  //   analytics.share('copy', this.getAttribute('data-path').substring(1) || 'output');\r\n  // });\r\n\r\n  if (!$('#sharemenu .share-split').length) {\r\n    var $panelCheckboxes = $('#sharepanels input[type=\"checkbox\"]').on('change', function () {\r\n      updateSavedState();\r\n    });\r\n    $('#sharemenu').bind('open', function () {\r\n      $panelCheckboxes.attr('checked', false);\r\n      jsbin.panels.getVisible().forEach(function (panel) {\r\n        $panelCheckboxes.filter('[data-panel=\"' + panel.id + '\"]').prop('checked', true).change();\r\n      });\r\n\r\n    });\r\n\r\n  }\r\n\r\n  var dropdownOpen = false,\r\n      onhover = false,\r\n      menuDown = false;\r\n\r\n  function opendropdown(el, nofocus) {\r\n    var menu;\r\n    if (!dropdownOpen) {\r\n      menu = $(el).closest('.menu').addClass('open').trigger('open');\r\n      // $body.addClass('menuinfo');\r\n      analytics.openMenu(el.hash.substring(1));\r\n      var input = menu.find(':text:visible:first');\r\n\r\n      if (input.length && !jsbin.mobile) {\r\n        input.focus();\r\n        setTimeout(function () {\r\n          input[0].select();\r\n        }, 0);\r\n      }\r\n      dropdownOpen = el;\r\n    }\r\n  }\r\n\r\n  function closedropdown() {\r\n    menuDown = false;\r\n    if (dropdownOpen) {\r\n      dropdownButtons.closest('.menu').removeClass('open').trigger('close');\r\n      // $body.removeClass('menuinfo');\r\n      dropdownOpen = false;\r\n      onhover = false;\r\n      var f = jsbin.panels.focused;\r\n      if (f && !jsbin.mobile) {\r\n        f.focus();\r\n        if (f.editor) {\r\n          f.editor.focus();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  var dropdownButtons = $('.button-dropdown, .button-open').mousedown(function (e) {\r\n    $dropdownLinks.removeClass('hover');\r\n    if (dropdownOpen && dropdownOpen !== this) {\r\n      closedropdown();\r\n    }\r\n    if (!dropdownOpen) {\r\n      menuDown = true;\r\n      opendropdown(this);\r\n    }\r\n    e.preventDefault();\r\n    return false;\r\n  }).mouseup(function () {\r\n    if (menuDown) return false;\r\n  }).click(function () {\r\n    if (!menuDown) {\r\n      analytics.closeMenu(this.hash.substring(1));\r\n      closedropdown();\r\n    }\r\n    if (menuDown) {\r\n      $(this.hash).attr('tabindex', 0);\r\n      menuDown = false;\r\n      return jsbin.mobile;\r\n    }\r\n\r\n    menuDown = false;\r\n\r\n    $(this.hash).attr('tabindex', -1);\r\n    return false;\r\n  });\r\n\r\n  $('#actionmenu').click(function () {\r\n    dropdownOpen = true;\r\n  });\r\n\r\n  var ignoreUp = false;\r\n  $body.bind('mousedown', function (event) {\r\n    if (dropdownOpen) {\r\n      if ($(event.target).closest('.menu').length) {\r\n        ignoreUp = true;\r\n      }\r\n    }\r\n  }).bind('click mouseup', function (event) {\r\n    if (dropdownOpen && !ignoreUp) {\r\n      if (!$(event.target).closest('.menu').length) {\r\n        closedropdown();\r\n        return false;\r\n      }\r\n    }\r\n    ignoreUp = false;\r\n  });\r\n\r\n  var fromClick = false;\r\n  var $dropdownLinks = $('.dropdownmenu a, .dropdownmenu .button').mouseup(function (e) {\r\n    if (e.target.nodeName === 'INPUT') {\r\n      return;\r\n    }\r\n\r\n    setTimeout(closedropdown, 0);\r\n    analytics.selectMenu(this.getAttribute('data-label') || this.hash.substring(1) || this.href);\r\n    if (!fromClick) {\r\n      if (this.hostname === window.location.hostname) {\r\n        if ($(this).triggerHandler('click') !== false) {\r\n          window.location = this.href;\r\n        }\r\n      } else {\r\n        if (this.getAttribute('target')) {\r\n          window.open(this.href);\r\n        } else {\r\n          window.location = this.href;\r\n        }\r\n      }\r\n    }\r\n    fromClick = false;\r\n  }).mouseover(function () {\r\n    $dropdownLinks.removeClass('hover');\r\n    $(this).addClass('hover');\r\n  }).mousedown(function (e) {\r\n    if (e.target.nodeName === 'INPUT') {\r\n      return;\r\n    }\r\n    fromClick = true;\r\n  });\r\n\r\n  $('#jsbinurl').click(function (e) {\r\n    setTimeout(function () {\r\n      jsbin.panels.panels.live.hide();\r\n    }, 0);\r\n  });\r\n\r\n  $('#runwithalerts, li.run-with-js a').click(function (event, data) {\r\n    analytics.run(data);\r\n    if (editors.console.visible) {\r\n      editors.console.render(true);\r\n    } else {\r\n      renderLivePreview(true);\r\n    }\r\n    return false;\r\n  });\r\n\r\n  $('#runconsole').click(function () {\r\n    analytics.runconsole();\r\n    editors.console.render(true);\r\n    return false;\r\n  });\r\n\r\n  $('#clearconsole').click(function () {\r\n    jsconsole.clear();\r\n    return false;\r\n  });\r\n\r\n  $('#showhelp').click(function () {\r\n    $body.toggleClass('keyboardHelp');\r\n    keyboardHelpVisible = $body.is('.keyboardHelp');\r\n    if (keyboardHelpVisible) {\r\n      // analytics.help('keyboard');\r\n    }\r\n    return false;\r\n  });\r\n\r\n  $('a.toggle-side-nav').on(jsbin.mobile ? 'touchstart' : 'click', function () {\r\n    $body.toggleClass('show-nav');\r\n    sideNavVisible = $body.is('.show-nav');\r\n    if (!sideNavVisible && !jsbin.mobile) {\r\n      // we only focus the editor in desktop, otherwise the keyboard jumps up\r\n      $('#skipToEditor').click();\r\n    }\r\n    return sideNavVisible;\r\n  });\r\n\r\n\r\n  $('#showurls').click(function () {\r\n    $body.toggleClass('urlHelp');\r\n    urlHelpVisible = $body.is('.urlHelp');\r\n    if (urlHelpVisible) {\r\n      // analytics.urls();\r\n    }\r\n    return false;\r\n  });\r\n\r\n  $('.code.panel > .label > span.name').dblclick(function () {\r\n    jsbin.panels.allEditors(function (panel) {\r\n      var lineNumbers = !panel.editor.getOption('lineNumbers');\r\n      panel.editor.setOption('lineNumbers', lineNumbers);\r\n      jsbin.settings.editor.lineNumbers = lineNumbers;\r\n    });\r\n  });\r\n\r\n  $('a.createnew').click(function (event) {\r\n    event.preventDefault();\r\n    var i, key;\r\n    analytics.createNew();\r\n    // FIXME this is out and out [cr]lazy....\r\n    jsbin.panels.savecontent = function(){};\r\n    for (i = 0; i < store.sessionStorage.length; i++) {\r\n      key = store.sessionStorage.key(i);\r\n      if (key.indexOf('jsbin.content.') === 0) {\r\n        store.sessionStorage.removeItem(key);\r\n      }\r\n    }\r\n\r\n    // clear out the write checksum too\r\n    store.sessionStorage.removeItem('checksum');\r\n\r\n    jsbin.panels.saveOnExit = false;\r\n\r\n    // first try to restore their default panels\r\n    jsbin.panels.restore();\r\n\r\n    // if nothing was shown, show html & live\r\n    setTimeout(function () {\r\n      if (jsbin.panels.getVisible().length === 0) {\r\n        jsbin.panels.panels.html.show();\r\n        jsbin.panels.panels.live.show();\r\n      }\r\n      window.location = jsbin.root;\r\n    }, 0);\r\n  });\r\n\r\n  var $privateButton = $('#control a.visibilityToggle#private');\r\n  var $publicButton = $('#control a.visibilityToggle#public');\r\n\r\n  var $visibilityButtons = $('#control a.visibilityToggle').click(function(event) {\r\n    event.preventDefault();\r\n\r\n    var visibility = $(this).data('vis');\r\n\r\n    $.ajax({\r\n      url: jsbin.getURL({ withRevision: true }) + '/' + visibility,\r\n      type: 'post',\r\n      success: function (data) {\r\n\r\n        $document.trigger('tip', {\r\n          type: 'notification',\r\n          content: 'This bin is now ' + visibility,\r\n          autohide: 6000\r\n        });\r\n\r\n        $visibilityButtons.css('display', 'none');\r\n\r\n        if (visibility === 'public') {\r\n          $privateButton.css('display', 'block');\r\n        } else {\r\n          $publicButton.css('display', 'block');\r\n        }\r\n\r\n      }\r\n    });\r\n  });\r\n\r\n  $('form.login').closest('.menu').bind('close', function () {\r\n    $(this).find('.loginFeedback').empty().hide();\r\n    $('#login').removeClass('forgot');\r\n  });\r\n\r\n  $('#lostpass').click(function (e) {\r\n    $('#login').addClass('forgot').find('input[name=email]').focus();\r\n    return false;\r\n  });\r\n\r\n  jsbin.settings.includejs = jsbin.settings.includejs === undefined ? true : jsbin.settings.includejs;\r\n\r\n  // ignore for embed as there might be a lot of embeds on the page\r\n  if (!jsbin.embed && store.sessionStorage.getItem('runnerPending')) {\r\n    $document.trigger('tip', {\r\n      content: 'It looks like your last session may have crashed, so I\\'ve disabled \"Auto-run JS\" for you',\r\n      type: 'error',\r\n    });\r\n    store.sessionStorage.removeItem('runnerPending');\r\n    jsbin.settings.includejs = false;\r\n  }\r\n\r\n  $('#enablejs').change(function () {\r\n    jsbin.settings.includejs = this.checked;\r\n    analytics.enableLiveJS(jsbin.settings.includejs);\r\n    editors.live.render();\r\n  }).attr('checked', jsbin.settings.includejs);\r\n\r\n  if (!jsbin.embed && jsbin.settings.hideheader) {\r\n    $body.addClass('hideheader');\r\n  }\r\n\r\n  var cancelUp = false;\r\n  $('form input, form textarea').focus(function () {\r\n    this.select();\r\n    cancelUp = true;\r\n  }).mouseup(function () {\r\n    if (cancelUp) {\r\n      cancelUp = false;\r\n      return false;\r\n    }\r\n  });\r\n\r\n  if (window.location.hash) {\r\n    $('a[href$=\"' + window.location.hash + '\"]').mousedown();\r\n  }\r\n\r\n  var ismac = navigator.userAgent.indexOf(' Mac ') !== -1,\r\n      mackeys = {\r\n        'ctrl': '⌘',\r\n        'shift': '⇧',\r\n        'del': '⌫'\r\n      };\r\n\r\n  $('#control').find('a[data-shortcut]').each(function () {\r\n    var $this = $(this),\r\n        data = $this.data();\r\n\r\n    var key = data.shortcut;\r\n    if (ismac) {\r\n      key = key.replace(/ctrl/i, mackeys.ctrl).replace(/shift/, mackeys.shift).replace(/del/, mackeys.del).replace(/\\+/g, '').toUpperCase();\r\n    }\r\n\r\n    $this.append('<span class=\"keyshortcut\">' + key + '</span>');\r\n  });\r\n\r\n  (function () {\r\n\r\n  var re = {\r\n    head: /<head(.*)\\n/i,\r\n    meta: /<meta name=\"description\".*?>/i,\r\n    metaContent: /content=\".*?\"/i\r\n  };\r\n\r\n  var metatag = '<meta name=\"description\" content=\"[add your bin description]\">\\n';\r\n\r\n  $('#addmeta').click(function () {\r\n    // if not - insert\r\n    // <meta name=\"description\" content=\"\" />\r\n    // if meta description is in the HTML, highlight it\r\n    var editor = jsbin.panels.panels.html,\r\n        cm = editor.editor,\r\n        html = editor.getCode();\r\n\r\n    if (!editor.visible) {\r\n      editor.show();\r\n    }\r\n\r\n    if (!re.meta.test(html)) {\r\n      if (re.head.test(html)) {\r\n        html = html.replace(re.head, '<head$1\\n' + metatag);\r\n      } else {\r\n        // slap in the top\r\n        html = metatag + html;\r\n      }\r\n    }\r\n\r\n    editor.setCode(html);\r\n\r\n    // now select the text\r\n    // editor.editor is the CM object...yeah, sorry about that...\r\n    var cursor = cm.getSearchCursor(re.meta);\r\n    cursor.findNext();\r\n\r\n    var contentCursor = cm.getSearchCursor(re.metaContent);\r\n    contentCursor.findNext();\r\n\r\n    var from = { line: cursor.pos.from.line, ch: cursor.pos.from.ch + '<meta name=\"description\" content=\"'.length },\r\n        to = { line: contentCursor.pos.to.line, ch: contentCursor.pos.to.ch - 1 };\r\n\r\n    cm.setCursor(from);\r\n    cm.setSelection(from, to);\r\n    cm.on('cursoractivity', function () {\r\n      cm.on('cursoractivity', null);\r\n      mark.clear();\r\n    });\r\n\r\n    var mark = cm.markText(from, to, { className: 'highlight' });\r\n\r\n    cm.focus();\r\n\r\n    return false;\r\n  });\r\n\r\n  $('a.publish-to-vanity').on('click', function (event) {\r\n    event.preventDefault();\r\n    analytics.publishVanity();\r\n\r\n    $.ajax({\r\n      type: 'post',\r\n      url: this.href,\r\n      data: { url: jsbin.getURL({ withRevision: true }) },\r\n      success: function () {\r\n        $document.trigger('tip', {\r\n          type: 'notification',\r\n          content: 'This bin is now published to your vanity URL: <a target=\"_blank\" href=\"' + jsbin.shareRoot + '\">' + jsbin.shareRoot + '</a>'\r\n        });\r\n      },\r\n      error: function (xhr) {\r\n        $document.trigger('tip', {\r\n          type: 'error',\r\n          content: 'There was a problem publishing to your vanity URL. Can you try again or file a <a target=\"_blank\" href=\"' + githubIssue() + '\">new issue</a>?'\r\n        });\r\n      }\r\n    })\r\n  });\r\n\r\n  $document.on('click', 'a.deleteallbins', function () {\r\n    if (jsbin.user && jsbin.state.metadata.name === jsbin.user.name) {\r\n      if (confirm('Delete all snapshots of this bin including this one?')) {\r\n      analytics.deleteAll();\r\n      $.ajax({\r\n        type: 'post',\r\n        url: jsbin.getURL() + '/delete-all',\r\n        success: function () {\r\n          jsbin.state.deleted = true;\r\n          $document.trigger('tip', {\r\n            type: 'error',\r\n            content: 'This bin and history is now deleted. You can continue to edit, but once you leave the bin can\\'t be retrieved'\r\n          });\r\n        },\r\n        error: function (xhr) {\r\n          if (xhr.status === 403) {\r\n            $document.trigger('tip', {\r\n              content: 'You don\\'t own this bin, so you can\\'t delete it.',\r\n              autohide: 5000\r\n            });\r\n          }\r\n        }\r\n      });\r\n\r\n    }\r\n    } else {\r\n      $document.trigger('tip', {\r\n        type: 'error',\r\n        content: 'You must be logged in <em><strong>the bin owner</strong></em> to delete all snapshots. <a target=\"_blank\" href=\"/help/delete-a-bin\">Need help?</a>'\r\n      });\r\n    }\r\n  });\r\n\r\n  $('a.deletebin').on('click', function (e) {\r\n    e.preventDefault();\r\n    if (confirm('Delete this bin?')) {\r\n      analytics['delete']();\r\n      $.ajax({\r\n        type: 'post',\r\n        url: jsbin.getURL({ withRevision: true }) + '/delete',\r\n        data: { checksum: jsbin.state.checksum },\r\n        success: function () {\r\n          jsbin.state.deleted = true;\r\n          $document.trigger('tip', {\r\n            type: 'error',\r\n            content: 'This bin is now deleted. You can continue to edit, but once you leave the bin can\\'t be retrieved'\r\n          });\r\n        },\r\n        error: function (xhr) {\r\n          if (xhr.status === 403) {\r\n            $document.trigger('tip', {\r\n              content: 'You don\\'t own this bin, so you can\\'t delete it.',\r\n              autohide: 5000\r\n            });\r\n          }\r\n        }\r\n      });\r\n\r\n    }\r\n  });\r\n\r\n  $('a.archivebin').on('click', function (e) {\r\n    e.preventDefault();\r\n    archive();\r\n  });\r\n\r\n  $('a.unarchivebin').on('click', function (e) {\r\n    e.preventDefault();\r\n    archive(false);\r\n  });\r\n\r\n  var $enableUniversalEditor = $('#enableUniversalEditor').on('change', function (e) {\r\n    e.preventDefault();\r\n\r\n    jsbin.settings.editor.simple = this.checked;\r\n    analytics.universalEditor(jsbin.settings.editor.simple);\r\n    settings.save(function () {\r\n      window.location.reload();\r\n    });\r\n  });\r\n\r\n  if (jsbin.settings.editor.simple) {\r\n    $enableUniversalEditor.prop('checked', true);\r\n  }\r\n\r\n  $('#skipToEditor').on('click keypress', function () {\r\n    var first = (jsbin.panels.getVisible() || ['html']).shift();\r\n    if (jsbin.settings.editor.simple || jsbin.mobile) {\r\n      $('#' + first.id).focus();\r\n    } else if (first) {\r\n      first.editor.focus();\r\n    } else {\r\n      jsbin.panels.panels.html.editor.focus();\r\n    }\r\n    return false;\r\n  });\r\n\r\n  }());\r\n\r\n});\ndefine('skylark-jsbin-client/chrome/file-drop',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n  function allowDrop(holder) {\r\n    var cursorPosition = null;\r\n    var panel = null;\r\n\r\n    var guid = (function() {\r\n    function s4() {\r\n      return Math.floor((1 + Math.random()) * 0x10000)\r\n        .toString(16)\r\n        .substring(1);\r\n      }\r\n      return function() {\r\n        return s4() + s4();\r\n      };\r\n    })();\r\n\r\n    function uploadAsset(file) {\r\n      var loading = document.createElement('div');\r\n      loading.className = 'assetLoading';\r\n      loading.innerHTML = '0% uploading...';\r\n      var currentStatus = 0;\r\n\r\n      var progress = function progress(percent, status) {\r\n        if (percent - currentStatus < 10) {\r\n          currentStatus = percent;\r\n        } else {\r\n          currentStatus += 10;\r\n          requestAnimationFrame(function () {\r\n            progress(percent, status);\r\n          });\r\n        }\r\n\r\n        if (loading && currentStatus > 0) {\r\n          if (currentStatus > 97) {\r\n            loading.innerHTML = '97% uploaded...';\r\n            // because there's some lag between 100% and actually rendering\r\n          } else {\r\n            loading.innerHTML = currentStatus + '% uploaded...';\r\n          }\r\n        }\r\n      };\r\n\r\n      var widget = null;\r\n      var insertPosition = cursorPosition || panel.getCursor();\r\n      if (!jsbin.lameEditor) {\r\n        var line = cursorPosition ? cursorPosition.line : panel.getCursor().line;\r\n        widget = panel.addLineWidget(line, loading, {coverGutter: false, nohscroll: true});\r\n      } else {\r\n        insertTextArea(panel, 'Uploading ...', true);\r\n      }\r\n\r\n      var s3upload = new S3Upload({\r\n        s3_sign_put_url: '/account/assets/sign',\r\n        s3_object_name: file.name.replace(/\\s+/g, '-'),\r\n        files: [file],\r\n\r\n        onProgress: function (percent, status) {\r\n          if (!jsbin.lameEditor) {\r\n            requestAnimationFrame(function () {\r\n              progress(percent, status);\r\n            });\r\n          }\r\n        },\r\n\r\n        onError: function (reason, fromServer) {\r\n          currentStatus = -1;\r\n          console.error('Failed to upload: ' + fromServer);\r\n          loading.innerHTML = fromServer || 'Failed to complete';\r\n          loading.style.color = 'red';\r\n          panel = null;\r\n          cursorPosition = null;\r\n          if (widget) {\r\n            setTimeout(function () {\r\n              widget.clear();\r\n            }, 4000);\r\n          }\r\n        },\r\n\r\n        onFinishS3Put: function (url) {\r\n          if (!jsbin.lameEditor) {\r\n            widget.clear();\r\n            panel.replaceRange(getInsertText(file.type, panel, url), insertPosition);\r\n          } else {\r\n            insertTextArea(panel, getInsertText(file.type, panel, url));\r\n            $(document).trigger('codeChange', { panelId: panel.id });\r\n          }\r\n          panel = null;\r\n          cursorPosition = null;\r\n        }\r\n      });\r\n    }\r\n\r\n    function insertTextArea(el, string, select) {\r\n      var start = el.selectionStart;\r\n      var end = el.selectionEnd;\r\n\r\n      var target = el;\r\n      var value = target.value;\r\n\r\n      // set textarea value to: text before caret + tab + text after caret\r\n      target.value = value.substring(0, start) + string + value.substring(end);\r\n\r\n      // put caret at right position again (add one for the tab)\r\n      el.selectionStart = el.selectionEnd = start + 1;\r\n\r\n      if (select) {\r\n        el.selectionStart -= 1;\r\n        el.selectionEnd = el.selectionEnd + string.length;\r\n      } else {\r\n        el.selectionStart = el.selectionEnd = start + string.length;\r\n      }\r\n    }\r\n\r\n    function getInsertText(mime, cm, url) {\r\n      // var panel = jsbin.panels.panels[cm.id];\r\n      var processor = jsbin.state.processors[cm.id];\r\n\r\n      if (cm.id === 'html') {\r\n        if (mime.indexOf('image/') === 0) {\r\n          if (processor === 'markdown') {\r\n            return '![' + url + '](' + url + ')';\r\n          }\r\n\r\n          if (processor === 'jade') {\r\n            return 'img(src=\"' + url + '\")';\r\n          }\r\n\r\n          return '<img src=\"' + url + '\">';\r\n        }\r\n\r\n        return url;\r\n      }\r\n\r\n      if (cm.id === 'css') {\r\n        if (mime.indexOf('image/') === 0) {\r\n          return 'url(' + url + ')';\r\n        }\r\n\r\n        return url;\r\n      }\r\n\r\n      // note: js just gets the url...\r\n      return url;\r\n    }\r\n\r\n    var dragging = false;\r\n\r\n    holder.ondragover = function () {\r\n      dragging = true;\r\n      return false;\r\n    };\r\n\r\n    holder.ondragend = function () {\r\n      dragging = false;\r\n      return false;\r\n    };\r\n\r\n    function getFileData(item) {\r\n      return new Promise(function (resolve, reject) {\r\n        if (item.kind === 'string') {\r\n          item.getAsString(function (filename) {\r\n            resolve(filename);\r\n          });\r\n        } else {\r\n          resolve(item.getAsFile());\r\n        }\r\n      });\r\n    }\r\n\r\n    $('#bin textarea').on('paste', function (jQueryEvent) {\r\n      if ($(this).closest('.CodeMirror').length) {\r\n        panel = $(this).closest('.CodeMirror')[0].CodeMirror;\r\n      } else {\r\n        panel = this;\r\n      }\r\n\r\n      var event = jQueryEvent.originalEvent;\r\n      var items = event.clipboardData.items;\r\n\r\n      // this means we've copied a file that's an app icon, or it's just text\r\n      // which we don't want to kick in anyway.\r\n      if (!items || event.clipboardData.types[0].indexOf('text/') === 0) {\r\n        return;\r\n      }\r\n\r\n      var file = null;\r\n      var promises = [];\r\n      for (var i = 0; i < items.length; i++) {\r\n        promises.push(getFileData(items[i]));\r\n      }\r\n\r\n      Promise.all(promises).then(function (data) {\r\n        var blobname = data.sort(function (a, b) {\r\n          return typeof a === 'string' ? 1 : -1;\r\n        });\r\n        var file = data[0];\r\n        file.name = data[1] || guid() + '.' + file.type.split('/')[1];\r\n\r\n        uploadAsset(file);\r\n      }).catch(function (error) {\r\n        console.log(error.stack);\r\n      });\r\n\r\n      // FIXME???\r\n      jQueryEvent.preventDefault();\r\n    });\r\n\r\n    $('.CodeMirror').on('mousemove', function (e) {\r\n      if (!dragging) {\r\n        return;\r\n      }\r\n\r\n      panel = this.CodeMirror;\r\n      cursorPosition = this.CodeMirror.coordsChar({ top: event.y, left: event.x });\r\n      this.CodeMirror.setCursor(cursorPosition);\r\n    });\r\n\r\n    var jstypes = ['javascript', 'coffeescript', 'coffee', 'js'];\r\n    var csstypes = ['css', 'less', 'sass', 'scss'];\r\n    var htmltypes = ['html', 'markdown', 'plain'];\r\n\r\n    holder.ondrop = function (e) {\r\n      dragging = false;\r\n      e.preventDefault();\r\n\r\n      if ($(e.target).closest('.CodeMirror').length) {\r\n        panel = $(e.target).closest('.CodeMirror')[0].CodeMirror;\r\n      } else {\r\n        panel = e.target;\r\n      }\r\n\r\n      var file = e.dataTransfer.files[0],\r\n          reader = new FileReader();\r\n\r\n      if (file.type.indexOf('text/') !== 0) {\r\n        // this isn't a text file for populating the panel, try uploading instead\r\n        uploadAsset(file);\r\n        return;\r\n      }\r\n\r\n      reader.onload = function (event) {\r\n        // put JS in the JavaScript panel\r\n        var type = file.type ? file.type.toLowerCase().replace(/^(text|application)\\//, '') : file.name.toLowerCase().replace(/.*\\./g, ''),\r\n            panelId = null,\r\n            panel = editors[panelId],\r\n            syncCode = event.target.result,\r\n            scroller = null;\r\n\r\n        if (jstypes.indexOf(type) !== -1) {\r\n          panelId = 'javascript';\r\n        } else if (csstypes.indexOf(type) !== -1) {\r\n          panelId = 'css';\r\n        } else if (htmltypes.indexOf(type) !== -1) {\r\n          panelId = 'html';\r\n        }\r\n\r\n        if (panelId === null) {\r\n          // then we have an asset upload\r\n          return uploadAsset(file);\r\n        }\r\n\r\n        panel = editors[panelId];\r\n        scroller = panel.editor.scroller;\r\n\r\n        panel.setCode(event.target.result);\r\n        panel.show();\r\n\r\n        try {\r\n          // now kick off - basically just doing a copy and paste job from @wookiehangover - thanks man! :)\r\n          var worker = new Worker(jsbin['static'] + '/js/editors/sync-worker.js');\r\n\r\n          // pass the worker the file object\r\n          worker.postMessage(file);\r\n\r\n          panel.$el.find('> .label').append('<small> (live: edit & save in your fav editor)</small>');\r\n\r\n          // bind onmessage handler\r\n          worker.onmessage = function (event) {\r\n            var top = scroller.scrollTop;\r\n            panel.setCode(event.data.body);\r\n            scroller.scrollTop = top;\r\n            syncCode = event.data.body;\r\n          };\r\n        } catch (e) {\r\n          // fail on the awesomeness...oh well\r\n        }\r\n      };\r\n\r\n      reader.readAsText(file);\r\n\r\n      return false;\r\n    };\r\n  }\r\n\r\n  // test for dnd and file api first\r\n  if (!!(window.File && window.FileList && window.FileReader)) {\r\n    allowDrop(document.body);\r\n  }\r\n});\ndefine('skylark-jsbin-client/chrome/gist',[\r\n  \"skylark-jquery\",\r\n  \"skylark-jsbin-coder/editors/panels\",\r\n   \"../jsbin\"\r\n],function ($,panels,jsbin) {\r\n    /*global $:true, jsbin:true, processors:true, $document*/\r\n    'use strict';\r\n\r\n    // Only allow gist import/export if CORS is supported\r\n    var CORS = !!('withCredentials' in new XMLHttpRequest() ||\r\n                  typeof XDomainRequest !== 'undefined');\r\n    if (!CORS) {\r\n      return $(function () {\r\n        $('#export-as-gist').remove();\r\n      });\r\n    }\r\n\r\n    var Gist = function (id) {\r\n      var gist = this,\r\n          token = '';\r\n      gist.code = {};\r\n      if (jsbin.user && jsbin.user.github_token) { // jshint ignore:line\r\n        token = '?access_token=' + jsbin.user.github_token; // jshint ignore:line\r\n      }\r\n      $.get('https://api.github.com/gists/' + id + token, function (data) {\r\n        if (!data) {return;}\r\n        $.each(data.files, function (fileName, fileData) {\r\n          var ext = fileName.split('.').slice(-1).join('');\r\n          gist.code[ext] = fileData.content;\r\n        });\r\n        gist.setCode();\r\n      });\r\n      return this;\r\n    };\r\n\r\n    Gist.prototype.setCode = function () {\r\n      var gist = this;\r\n      $.each(gist.code, function (ext, data) {\r\n        var processorInit = jsbin.processors.findByExtension(ext),\r\n            target = processorInit.target || processorInit.id,\r\n            panel = panels.named[target];\r\n        if (!panel) {return;}\r\n        processors.set(target, processorInit.id);\r\n        jsbin.saveDisabled = true;\r\n        panel.setCode(data);\r\n        jsbin.saveDisabled = false;\r\n      });\r\n    };\r\n\r\n    /**\r\n     * Export as gist\r\n     */\r\n\r\n    $('a.export-as-gist').click(function () {\r\n      var gist = {\r\n        public: true,\r\n        files: {}\r\n      };\r\n\r\n      var panels = {\r\n        html: panels.named.html.render(),\r\n        javascript: panels.named.javascript.render(),\r\n        css: panels.named.css.render()\r\n      };\r\n\r\n      Promise.all(panels).then(function (panels) { // RSVP.hash\r\n        // Build a file name\r\n        Object.keys(panels).forEach(function (key) {\r\n          var ext = processors[key].extensions ? processors[key].extensions[0] : key;\r\n          var file = ['jsbin', (jsbin.state.code || 'untitled'), ext].join('.');\r\n          if (panels[key].length) {\r\n            gist.files[file] = {\r\n              content: panels[key]\r\n            };\r\n          }\r\n        });\r\n\r\n        if (!gist.files.javascript && !gist.files.css) {\r\n          delete gist.files[['jsbin', (jsbin.state.code || 'untitled'), 'html'].join('.')]\r\n        }\r\n\r\n        if (jsbin.state.processors) {\r\n          panels.source = jsbin.state.processors;\r\n          Object.keys(panels.source).forEach(function (key) {\r\n            panels.source[key] = jsbin.panels.panels[key].getCode();\r\n          });\r\n        }\r\n\r\n        var index = binToFile(panels);\r\n\r\n        gist.files['index.html'] = {\r\n          content: index\r\n        };\r\n\r\n        var desc = [];\r\n\r\n        if (jsbin.state.title) {\r\n          desc.push(jsbin.state.title);\r\n        }\r\n\r\n        if (jsbin.state.description) {\r\n          desc.push(jsbin.state.description);\r\n        }\r\n\r\n        desc.push('// source ' + jsbin.getURL());\r\n\r\n        gist.description = desc.join('\\n\\n');\r\n\r\n        var token = '';\r\n        if (jsbin.user && jsbin.user.github_token) { // jshint ignore:line\r\n          token = '?access_token=' + jsbin.user.github_token; // jshint ignore:line\r\n        }\r\n\r\n        $.ajax({\r\n          type: 'POST',\r\n          url: 'https://api.github.com/gists' + token,\r\n          data: JSON.stringify(gist),\r\n          dataType: 'json',\r\n          crossDomain: true,\r\n          success: function (data) {\r\n            jsbin.$document.trigger('tip', {\r\n              type: 'notification',\r\n              content: 'Gist created! <a href=\"' + data.html_url + '\" target=\"_blank\">Open in new tab.</a>' // jshint ignore:line\r\n            });\r\n          },\r\n          error: function (xhr, status, error) {\r\n            jsbin.$document.trigger('tip', {\r\n              type: 'error',\r\n              content: 'There was a problem creating the gist: ' + error\r\n            });\r\n            console.group('gist');\r\n            console.log(gist);\r\n            console.groupEnd('gist');\r\n          }\r\n        });\r\n      }, function (error) {\r\n        console.error(error.stack);\r\n      });\r\n\r\n      // return false becuase there's weird even stuff going on. ask @rem.\r\n      return false;\r\n    });\r\n\r\n    return Gist;\r\n\r\n\r\n});\ndefine('skylark-jsbin-client/chrome/spinner',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n  function spinner(element) {\r\n    'use strict';\r\n    var c = element || document.createElement('canvas');\r\n    if (!c.getContext) {\r\n      return false;\r\n    }\r\n    var ctx = c.getContext('2d');\r\n\r\n    var rafID = null;\r\n\r\n    c.height = c.width = 11;\r\n\r\n    var TORADIAN = Math.PI / 180;\r\n    var w = c.width;\r\n    var h = c.height;\r\n    var deg = 0;\r\n    var r = 4;\r\n    var speed = 4;\r\n    var tailspeed = 1/7;\r\n\r\n    ctx.strokeStyle = 'rgba(0,0,0,.5)';\r\n    ctx.lineWidth = 1.5;\r\n\r\n    var last = true;\r\n    function draw() {\r\n      rafID = window.requestAnimationFrame(draw);\r\n\r\n      deg += speed;\r\n\r\n      var start = ((deg * tailspeed)) % 360; // A / TAIL\r\n      var end = deg % 360;              // B / HEAD\r\n      var flip = end === start;\r\n\r\n      if (flip) {\r\n        last = !last;\r\n        // this prevents a single blank frame when\r\n        // the start and end have the same value\r\n        start -= 1;\r\n      }\r\n\r\n      ctx.fillStyle = '#f9f9f9';\r\n      ctx.strokeStyle = '#111';\r\n      ctx.fillRect(w/2 - r*2, h/2 - r*2, r * 4, r * 4);\r\n      ctx.beginPath();\r\n      ctx.arc(w/2 + 0.5, h/2 + 0.5, r, start * TORADIAN, end * TORADIAN, last);\r\n      ctx.stroke();\r\n\r\n      ctx.strokeStyle = '#999';\r\n      ctx.beginPath();\r\n      ctx.arc(w/2 + 0.5, h/2 + 0.5, r, end * TORADIAN, start * TORADIAN, last);\r\n      ctx.stroke();\r\n\r\n      ctx.closePath();\r\n\r\n    }\r\n\r\n    return {\r\n      element: c,\r\n      start: draw,\r\n      stop: function () {\r\n        window.cancelAnimationFrame(rafID);\r\n      }\r\n    };\r\n  }\r\n\r\n  return jsbin.spinner = spinner;\r\n});\ndefine('skylark-jsbin-client/chrome/infocard',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n  if ('EventSource' in global) {\r\n    return setupInfocard()\r\n  } else {\r\n    $.getScript(jsbin['static'] + '/js/vendor/eventsource.js', setupInfocard);\r\n  }\r\n  function setupInfocard() {\r\n    /*global spinner, $, jsbin, prettyDate, EventSource, throttle, $document, analytics, throttle*/\r\n    'use strict';\r\n\r\n    // don't insert this on embeded views\r\n    if (jsbin.embed) {\r\n      return;\r\n    }\r\n\r\n    var $template = $('#infocard'); // donkey way of cloning from template\r\n    var $header = $template.find('header');\r\n    var canvas = $header.find('canvas')[0];\r\n    var s = spinner(canvas);\r\n    var htmlpanel = jsbin.panels.panels.html;\r\n    var viewers = 0;\r\n    var es = null;\r\n\r\n    var re = {\r\n      head: /<head(.*)\\n/i,\r\n      meta: /(<meta name=\"description\" content=\")([^\"]*)/im,\r\n      title: /<title>(.*)<\\/title>/im\r\n    };\r\n\r\n    if ($template.length === 0) {\r\n      return;\r\n    }\r\n\r\n\r\n\r\n    function updateStats(event, _data) {\r\n      var data = _data ? JSON.parse(_data) : JSON.parse(event.data);\r\n\r\n      if (data.connections > 0 && viewers === 0) {\r\n        $template.addClass('viewers');\r\n      }\r\n\r\n      if (viewers !== data.connections) {\r\n        var $b = $header.find('.viewers b').removeClass('up down').html('<b>' + data.connections + '<br>' + viewers + '<br>' + data.connections + '</b>'),\r\n            c = viewers > data.connections ? 'down' : 'up';\r\n        setTimeout(function () {\r\n          $b.addClass(c);\r\n        }, 0);\r\n      }\r\n\r\n      viewers = data.connections;\r\n\r\n      if (viewers === 0) {\r\n        setTimeout(function () {\r\n          $template.removeClass('viewers');\r\n        }, 250);\r\n      }\r\n\r\n    }\r\n\r\n    function listenStats(owner) {\r\n      if (window.EventSource && owner) {\r\n        // TODO use pagevisibility api to close connection\r\n        if (es) {\r\n          es.close();\r\n        }\r\n        es = new EventSource(jsbin.getURL() + '/stats?checksum=' + jsbin.state.checksum);\r\n        es.addEventListener('stats', throttle(updateStats, 1000));\r\n      }\r\n    }\r\n\r\n    function insertTag(tag) {\r\n      var cm = htmlpanel.editor;\r\n      var html = htmlpanel.getCode();\r\n\r\n      if (tag === 'meta') {\r\n        tag = 'meta name=\"description';\r\n      }\r\n\r\n\r\n      if (html.indexOf('<' + tag) === -1) {\r\n        var userhtml = getPanelText(tag === 'title' ? 'title' : 'description', '');\r\n        if (re.head.test(html)) {\r\n          html = html.replace(re.head, '<head$1\\n' + userhtml);\r\n        } else {\r\n          // slap in the top\r\n          html = userhtml + html;\r\n        }\r\n        htmlpanel.setCode(html);\r\n      }\r\n    }\r\n\r\n    function getPanelText(type, text) {\r\n      var processor = jsbin.state.processors.html;\r\n\r\n      text = text.replace(/\"/g, '&quot;');\r\n\r\n      if (type === 'title') {\r\n        if (processor === 'jade') {\r\n          return 'title ' + text + '\\n';\r\n        }\r\n\r\n        return '<title>' + text + '</title>\\n';\r\n      }\r\n\r\n      if (type === 'description') {\r\n        if (processor === 'jade') {\r\n          return 'meta(name=\"description\", content=\"' + text + '\")\\n';\r\n        }\r\n\r\n        return '<meta name=\"description\" content=\"' + text + '\">\\n';\r\n      }\r\n\r\n      return text;\r\n    }\r\n\r\n\r\n    if ($template.find('.settings')) {\r\n      $template.find('#title').on('input', function () {\r\n        insertTag('title');\r\n        var html = htmlpanel.getCode();\r\n        var value = this.value;\r\n        var result = html.replace(re.title, function (all, capture) {\r\n          return '<title>' + value.replace(/</g, '&lt;').replace(/>/g, '&gt;') + '</title>';\r\n        });\r\n        updateCode(result);\r\n        jsbin.state.updateSettings({ title: this.value });\r\n      });\r\n\r\n      $template.find('#description').on('input', function () {\r\n        insertTag('meta');\r\n        var html = htmlpanel.getCode();\r\n        var value = this.value;\r\n        var result = html.replace(re.meta, function (all, capture) {\r\n          return capture + value.replace(/\"/g, '&quot;');\r\n        });\r\n        updateCode(result);\r\n        jsbin.state.updateSettings({ description: this.value });\r\n      });\r\n    }\r\n\r\n    function updateCode(result) {\r\n      // capture selection and cursor\r\n      var state = null;\r\n      var cursor = null;\r\n      var cm = htmlpanel.editor;\r\n      var selected = cm.somethingSelected();\r\n      if (jsbin.panels.panels.html.visible) {\r\n        if (selected) {\r\n          state = cm.listSelections();\r\n        }\r\n        cursor = cm.getCursor();\r\n      }\r\n\r\n      htmlpanel.setCode(result);\r\n\r\n      // then restore\r\n      if (jsbin.panels.panels.html.visible) {\r\n        if (!jsbin.mobile) cm.setCursor(cursor);\r\n        if (selected) {\r\n          cm.setSelections(state);\r\n        }\r\n      }\r\n    }\r\n\r\n    function updateInfoCard(event) {\r\n      var meta = jsbin.state.metadata || {};\r\n      var classes = [];\r\n      var owner = false;\r\n\r\n      if (meta.name) {\r\n        $header.find('.name b').html(meta.name);\r\n        $header.find('img').attr('src', meta.avatar);\r\n        classes.push(meta.name);\r\n      }\r\n\r\n      if (jsbin.state.checksum || (jsbin.user && (meta.name === jsbin.user.name))) {\r\n        owner = true;\r\n        classes.push('author');\r\n      }\r\n\r\n      if (s) {\r\n        s.stop();\r\n      }\r\n\r\n      if (!jsbin.state.streaming || owner === true) {\r\n        $header.find('time').html(event ? 'just now' : prettyDate(meta.last_updated));\r\n      } else if (owner === false) {\r\n        $header.find('time').html('Streaming');\r\n        classes.push('streaming');\r\n        if (s) {\r\n          s.start();\r\n        }\r\n      }\r\n\r\n      if (!jsbin.checksum) {\r\n        classes.push('meta');\r\n      }\r\n\r\n      if (meta.pro) {\r\n        classes.push('pro');\r\n      }\r\n\r\n      $header.find('.visibility').text(meta.visibility);\r\n\r\n      if (meta.visibility === 'private') {\r\n        classes.push('private');\r\n      } else if (meta.visibility === 'public') {\r\n        classes.push('public');\r\n      } // TODO handle team\r\n\r\n      if (jsbin.state.code) {\r\n        $template.addClass(classes.join(' ')).parent().removeAttr('hidden');\r\n      }\r\n\r\n      if (jsbin.state.streaming) {\r\n        if (window.EventSource && owner) {\r\n          listenStats(owner);\r\n          handleVisibility(owner);\r\n          var url = jsbin.getURL();\r\n          $document.on('saved', function () {\r\n            var newurl = window.location.toString();\r\n            if (url !== newurl) {\r\n              es.close();\r\n              listenStats(owner);\r\n            }\r\n          });\r\n        } else if (jsbin.saveDisabled === true && window.location.pathname.slice(-5) === '/edit') {\r\n          $.getScript(jsbin.static + '/js/spike.js?' + jsbin.version);\r\n          $document.on('stats', throttle(updateStats, 1000));\r\n        }\r\n      }\r\n    }\r\n\r\n    function handleVisibility(owner) {\r\n      var hiddenProperty = 'hidden' in document ? 'hidden' :\r\n        'webkitHidden' in document ? 'webkitHidden' :\r\n        'mozHidden' in document ? 'mozHidden' :\r\n        null;\r\n      var visibilityStateProperty = 'visibilityState' in document ? 'visibilityState' :\r\n        'webkitVisibilityState' in document ? 'webkitVisibilityState' :\r\n        'mozVisibilityState' in document ? 'mozVisibilityState' :\r\n        null;\r\n\r\n      if (visibilityStateProperty) {\r\n        var visibilityChangeEvent = hiddenProperty.replace(/hidden/i, 'visibilitychange');\r\n        document.addEventListener(visibilityChangeEvent, function visibilityChangeEvent() {\r\n          if (document[hiddenProperty]) { // hidden\r\n            es.close();\r\n          } else {\r\n            listenStats(owner);\r\n          }\r\n        });\r\n      }\r\n    }\r\n\r\n    function initHandlers() {\r\n      $('a.more').add($header).on('mousedown touchstart', function (e) {\r\n        infocardVisible = !infocardVisible; // this is hack :-\\\r\n        hideOpen();\r\n        e.preventDefault();\r\n        analytics.infocard('click', 'no-result');\r\n        var toTrigger;\r\n        $template.toggleClass(function (index, klass) {\r\n          toTrigger = klass.indexOf('open') === -1 ? 'open' : 'close';\r\n          infocardVisible = toTrigger === 'open';\r\n          return 'open';\r\n        }).trigger(toTrigger);\r\n      });\r\n\r\n      $template.one('open', function () {\r\n        var statusCode = $('#status').data('status') || 200;\r\n        $.getJSON(jsbin.static + '/js/http-codes.json', function (codes) {\r\n          var html = '';\r\n          codes.forEach(function (code) {\r\n            html += '<option value=\"' + code.code + '\">' + code.string + '</option>';\r\n          });\r\n          $('#status').html(html).val(statusCode).on('change', function () {\r\n            jsbin.state.updateSettings({ statusCode: this.value });\r\n          });\r\n        });\r\n      }).on('close', function () {\r\n\r\n      });\r\n\r\n      function updateHeaders() {\r\n        // grab all the headers with values and send that instead\r\n        var headers = {};\r\n        $template.find('.row').each(function () {\r\n          if ($(this).find('[name=\"header-value\"]').val().trim()) {\r\n            headers[$(this).find('input:first').val()] = $(this).find('input:last').val();\r\n          }\r\n        });\r\n\r\n        jsbin.state.updateSettings({ headers: headers }, 'PUT');\r\n      }\r\n\r\n      var $headers = $template.find('#headers');\r\n      $template.on('click', '#headers button', function (event) {\r\n        event.preventDefault();\r\n        var $fields = $headers.find('span:last');\r\n        updateHeaders();\r\n\r\n        var $clones = $fields.clone(true);\r\n        $fields.before($clones);\r\n        $fields.find('input').val('').eq(0).focus();\r\n      });\r\n\r\n      $template.on('input', '.row input', function () {\r\n        updateHeaders($(this).closest('.row'));\r\n      });\r\n    }\r\n\r\n    initHandlers();\r\n    updateInfoCard();\r\n    $document.bind('saved', updateInfoCard);\r\n  }\r\n});\r\n\ndefine('skylark-jsbin-client/chrome/last-bin',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n  'use strict';\r\n\r\n  function getExpires() {\r\n    var d = new Date();\r\n\r\n    // expires in 1 hour from now\r\n    d.setTime(+d + 1000 * 60 * 60);\r\n    return d.toUTCString();\r\n  }\r\n\r\n  function save() {\r\n    var url = window.location.href;\r\n    if (url) {\r\n      document.cookie = 'last=' + encodeURIComponent(url) + '; expires=' + getExpires() + '; path=/';\r\n    } else {\r\n      // expire cookie\r\n      document.cookie = 'last=\"\"; expires=-1; path=/';\r\n    }\r\n  }\r\n\r\n  function readCookie(name) {\r\n    var nameEQ = name + '=';\r\n    var ca = document.cookie.split(';');\r\n    for(var i=0;i < ca.length;i++) {\r\n      var c = ca[i];\r\n      while (c.charAt(0)==' ') c = c.substring(1,c.length);\r\n      if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);\r\n    }\r\n    return null;\r\n  }\r\n\r\n  function updateBackButton() {\r\n    var el = document.getElementById('back');\r\n    var back = readCookie('last');\r\n\r\n    if (el && back !== null && back !== '%2Fedit') {\r\n      el.href = decodeURIComponent(back);\r\n    }\r\n  }\r\n\r\n  // save the bin url when the bin is saved, changed and when we load first time\r\n  if (jsbin && jsbin.getURL) {\r\n    $document.on('saved', save);\r\n    save();\r\n  } else {\r\n    updateBackButton();\r\n  }\r\n});\ndefine('skylark-jsbin-client/chrome/archive',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\",\r\n   \"./analytics\"\r\n],function ($,jsbin,analytics) {\r\n  function archive(unarchive) {\r\n    /*global jsbin, $, $document, analytics*/\r\n    'use strict';\r\n    var type = unarchive === false ? 'unarchive' : 'archive';\r\n    var text = unarchive === false ? 'restore from archive' : 'archiving';\r\n    analytics[type](jsbin.getURL({ withRevision: true }));\r\n    if (!jsbin.user.name) {\r\n      jsbin.$document.trigger('tip', {\r\n        type: 'notication',\r\n        content: 'You must be logged in and the owner of the bin to archive.'\r\n      });\r\n    } else if (jsbin.owner()) {\r\n      $.ajax({\r\n        type: 'POST',\r\n        url: jsbin.getURL({ withRevision: true }) + '/' + type,\r\n        error: function () {\r\n          $document.trigger('tip', {\r\n            type: 'error',\r\n            content: 'The ' + text + ' failed. If this continues, please can you file an issue?'\r\n          });\r\n        },\r\n        success: function () {\r\n          jsbin.state.metadata.archive = unarchive !== false;\r\n          updateArchiveMenu();\r\n          $document.trigger('tip', {\r\n            type: 'notication',\r\n            autohide: 5000,\r\n            content: 'This bin is now ' + (unarchive === false ? 'restored from the archive.' : 'archived.')\r\n          });\r\n        }\r\n      });\r\n    } else {\r\n      jsbin.$document.trigger('tip', {\r\n        type: 'notication',\r\n        content: 'The ' + text + ' failed. You can only archive bins that you own.'\r\n      });\r\n    }\r\n  }\r\n\r\n  function updateArchiveMenu() {\r\n    if (jsbin.state.metadata && jsbin.state.metadata.archive) {\r\n      $('a.archivebin').hide();\r\n      $('a.unarchivebin').show();\r\n    } else {\r\n      $('a.archivebin').show();\r\n      $('a.unarchivebin').hide();\r\n    }\r\n  }\r\n\r\n  updateArchiveMenu();\r\n\r\n  return jsbin.archive = archive;\r\n});\ndefine('skylark-jsbin-client/chrome/transfer',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n   var $transfers = $('a.transfer').on('click', function (event) {\r\n      event.preventDefault();\r\n      var to = prompt('Enter the username to transfer this bin to');\r\n      to = (to || '').trim().toLowerCase();\r\n\r\n      if (to.length) {\r\n        $.ajax({\r\n          url: jsbin.getURL({ withRevision: true }) + '/transfer',\r\n          method: 'post',\r\n          data: {\r\n            to: to,\r\n            _csrf: jsbin.state.token,\r\n          },\r\n          success: function () {\r\n            window.location.reload();\r\n          },\r\n          error: function (e) {\r\n            console.log(e);\r\n            if (e.status === 403) {\r\n              alert('This bin cannot be transferred as you do not own it.');\r\n            } else if (e.status === 400) {\r\n              alert('The user \"' + to + '\" couldn\\'t be found, sorry.');\r\n            } else {\r\n              alert('Failed to transfer bin');\r\n            }\r\n          }\r\n        });\r\n      }\r\n\r\n    });\r\n\r\n    var updateTransfer = function () {\r\n      if (jsbin.owner()) {\r\n        $transfers.show();\r\n      } else {\r\n        $transfers.hide();\r\n      }\r\n    }\r\n\r\n    ///updateTransfer();\r\n\r\n    return updateTransfer;\r\n});\ndefine('skylark-jsbin-client/chrome/welcome-panel',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\",\r\n   \"./analytics\"\r\n],function ($,jsbin,analytics) {\r\n    /*global jsbin, $, $body, $document, analytics, settings*/\r\n    'use strict';\r\n\r\n    if (!$('#toppanel').length) {\r\n      return;\r\n    }\r\n\r\n    if (jsbin.settings.gui === undefined) {\r\n      jsbin.settings.gui = {};\r\n    }\r\n    if (jsbin.settings.gui.toppanel === undefined) {\r\n      jsbin.settings.gui.toppanel = true;\r\n      store.localStorage.setItem('settings', JSON.stringify(jsbin.settings));\r\n    }\r\n\r\n    if ($body.hasClass('toppanel') && jsbin.settings.gui.toppanel === false) {\r\n      $body.addClass('toppanel-close');\r\n      $body.removeClass('toppanel');\r\n    }\r\n\r\n    // analytics for panel state\r\n    analytics.welcomePanelState(jsbin.settings.gui.toppanel);\r\n\r\n    var removeToppanel = function() {\r\n      jsbin.settings.gui.toppanel = false;\r\n      settings.save();\r\n      $body.addClass('toppanel-close');\r\n      $body.removeClass('toppanel');\r\n\r\n      // $document.trigger('sizeeditors');\r\n    };\r\n\r\n    var showToppanel = function() {\r\n      jsbin.settings.gui.toppanel = true;\r\n      settings.save();\r\n      $body.removeClass('toppanel-close');\r\n      $body.addClass('toppanel');\r\n    };\r\n\r\n    var goSlow = function(e) {\r\n      $body.removeClass('toppanel-slow');\r\n      if (e.shiftKey) {\r\n        $body.addClass('toppanel-slow');\r\n      }\r\n    };\r\n\r\n    $('.toppanel-logo').on('webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend', function(e) {\r\n      $document.trigger('sizeeditors');\r\n    });\r\n\r\n    $('.toppanel-hide').click(function(event) {\r\n      event.preventDefault();\r\n      goSlow(event);\r\n      removeToppanel();\r\n    });\r\n    $('.toppanel-logo').click(function(event) {\r\n      event.preventDefault();\r\n      goSlow(event);\r\n      showToppanel();\r\n    });\r\n    // $document.keydown(function (event) {\r\n    //   if (event.which === 27) {\r\n    //     if ($body.hasClass('toppanel')) {\r\n    //       removeToppanel();\r\n    //     }\r\n    //   }\r\n    // });\r\n\r\n    function shuffle(array) {\r\n      var m = array.length, t, i;\r\n\r\n      // While there remain elements to shuffle...\r\n      while (m) {\r\n\r\n        // Pick a remaining element...\r\n        i = Math.floor(Math.random() * m--);\r\n\r\n        // And swap it with the current element.\r\n        t = array[m];\r\n        array[m] = array[i];\r\n        array[i] = t;\r\n      }\r\n\r\n      return array;\r\n    }\r\n\r\n    $.ajax({\r\n      // tries to cache once a day\r\n      url: '/blog/all.json?' + (new Date()).toString().split(' ').slice(0, 4).join('-'),\r\n      dataType: 'json',\r\n      cache: true,\r\n      success: function (data) {\r\n        var blogpost = data.blog[0];\r\n        // this is daft, but it means that the landing page is the same\r\n        // for all, and ensures that blog comments end up on a single place\r\n        var root = jsbin.root.replace(/^https/, 'http');\r\n        $('.toppanel-blog ul').html('<li><a href=\"' + root + '/' + blogpost.slug + '\" target=\"_blank\" class=\"toppanel-link\">' + blogpost.title.replace(/TWDTW.*:\\s/, '') + '</a></li>');\r\n\r\n        var last = null;\r\n        var count = 1;\r\n        try {\r\n          last = store.localStorage.getItem('lastpost') || null;\r\n        } catch (e) {}\r\n\r\n        if (last !== null) {\r\n          last *= 1;\r\n          if (last < blogpost.timestamp) {\r\n            count = data.blog.reduce(function (prev, current) {\r\n              if (last < current.timestamp) {\r\n                return prev + 1;\r\n              }\r\n              return prev;\r\n            }, 0);\r\n          } else {\r\n            count = 0;\r\n          }\r\n        }\r\n\r\n        if (count) {\r\n          $('.blog a').attr('href', root + '/' + data.blog[count-1].slug).attr('data-count', count).on('click', function () {\r\n            // this is a weird hack work around to try to clear the storage\r\n            // item that says which was the last post viewed. so we update\r\n            // the timestamp when the user clicks the link, because we know\r\n            // they'll land on the latest post\r\n            try {\r\n              localStorage.lastpost = data.blog[count-1].timestamp;\r\n            } catch (e) {}\r\n          });\r\n        }\r\n\r\n        var help = shuffle(data.help);\r\n\r\n        $('.toppanel-help ul').html('<li><a href=\"' + root + '/' + help[0].slug + '\" target=\"_blank\" class=\"toppanel-link\">' + help[0].title + '</a></li><li><a href=\"' + root + '/' + help[1].slug + '\" target=\"_blank\" class=\"toppanel-link\">' + help[1].title + '</a></li>');\r\n\r\n      }\r\n    })\r\n\r\n    // analytics for links\r\n    $('#toppanel').find('.toppanel-link').mousedown(function() {\r\n      analytics.welcomePanelLink(this.href);\r\n    });\r\n\r\n });\ndefine('skylark-jsbin-client/chrome/help-search',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n\r\n    'use strict';\r\n    var results = $('#results');\r\n    var resultCount = $('#result-count');\r\n    var searchTerms = [];\r\n    var search = $('#helpsearch');\r\n    var position = -1;\r\n\r\n    search.on('input', throttle(function () {\r\n      if (searchTerms.length === 0) {\r\n        $.ajax({\r\n          url: '/help/search.json?' + (new Date()).toString().split(' ').slice(0, 4).join('-'),\r\n          dataType: 'json',\r\n          cache: true,\r\n          success: function (data) {\r\n            searchTerms = data;\r\n            searchFor(this.value, searchTerms);\r\n          }.bind(this)\r\n        });\r\n      } else {\r\n        searchFor(this.value, searchTerms);\r\n      }\r\n      position = -1;\r\n    }, 200));\r\n\r\n    // document.documentElement.addEventListener('click', function (event) {\r\n    //   if (event.target.id === 'search' || event.target.id === 'results') {\r\n\r\n    //   } else {\r\n    //     resultsEl.hidden = true;\r\n    //   }\r\n    // });\r\n\r\n    results.on('mousemove', function () {\r\n      if (position !== -1) {\r\n        results.children().remove('highlight');\r\n        position = -1;\r\n      }\r\n    });\r\n\r\n    search.on('keydown', function (event) {\r\n      var key = event.which;\r\n      if (key === 38 || key === 40) { // up / down\r\n        event.preventDefault();\r\n        var inc = 1;\r\n        if (key === 38) {\r\n          inc = -1;\r\n        }\r\n\r\n        position += inc;\r\n\r\n        var children = results.children();\r\n\r\n        var length = children.length;\r\n        children.removeClass('hover');\r\n\r\n        if (position < 0) {\r\n          position = length - 1;\r\n        } else if (position > length - 1) {\r\n          position = 0;\r\n        }\r\n\r\n        children.eq(position).addClass('hover');\r\n      } else if (key === 13) { // select\r\n        var url = results.find('.hover')[0];\r\n        if (url) {\r\n          window.open(url.href);\r\n          // window.location = url.href;\r\n        }\r\n      }\r\n    });\r\n\r\n    // search.on('focus', function () {\r\n    //   results.hide();\r\n    // });\r\n\r\n    function wordmap(input) {\r\n      var ignore = \"a an and on in it of if for the i is i'm i'd it's or to me be not was do so at are what bin bins\".split(' ');\r\n\r\n      var endings = 'ing ly lies s';\r\n      var endingRe = new RegExp('(' + endings.split(' ').join('|') + ')$');\r\n\r\n      return (input||'')\r\n        //- strip html\r\n        .replace(/(<([^>]+)>)/ig,'')\r\n        //- strip non-letters\r\n        .replace(/\\W/g, ' ').replace(/[\"'\\.,]/g, '')\r\n        //- turn in to array of lower case words\r\n        .toLowerCase().split(' ')\r\n        //- filter out ignored words\r\n        .filter(function (word) {\r\n          return ignore.indexOf(word.trim()) === -1;\r\n        }).filter(function (e, i, words) {\r\n          //- return unique\r\n          return words.lastIndexOf(e) === i;\r\n        }).filter(function (word) {\r\n          //- return words 3 chars or longer\r\n          return word.length > 2;\r\n        }).map(function (word) {\r\n          return word.trim().replace(endingRe, '');\r\n        }).sort();\r\n    }\r\n\r\n    function searchFor(needles, haystack) {\r\n      'use strict';\r\n      needles = wordmap(needles);\r\n      var matches = haystack.map(function (data) {\r\n        var matches = needles.filter(function (needle) {\r\n          return data.words.indexOf(needle) !== -1;\r\n        }).length;\r\n\r\n        return {\r\n          type: data.type,\r\n          title: data.title,\r\n          slug: data.slug,\r\n          category: data.category,\r\n          matches: matches\r\n        };\r\n      }).filter(function (data) {\r\n        return data.matches > 0;\r\n      }).sort(function (a, b) {\r\n        return b.matches - a.matches;\r\n      });\r\n\r\n      results.html(matches.map(function (result) {\r\n        return '<a target=\"_blank\" class=\"button\" href=\"/' + result.slug + '\">' + result.title + (result.type === 'blog' ? ' (blog)' : '') + '</a>';\r\n      }).join('\\n'));\r\n\r\n      results.show();\r\n      var s = '';\r\n      if (matches.length !== 1) {\r\n        s = 's';\r\n      }\r\n      resultCount.html(matches.length + ' result' + s);\r\n    }\r\n\r\n\r\n});\r\n\ndefine('skylark-jsbin-client/chrome/app',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\",\r\n   \"./gist\",\r\n   \"./analytics\"\r\n],function ($,jsbin,Gist,analytics) {\r\n  // if a gist has been requested, lazy load the gist library and plug it in\r\n  if (/gist\\/.*/.test(window.location.pathname)) {\r\n    window.editors = editors; // needs to be global when the callback triggers to set the content\r\n    loadGist = function () {\r\n      window.gist = new Gist(window.location.pathname.replace(/.*\\/([^/]+)$/, \"$1\"));\r\n    };\r\n\r\n    if (editors.ready) {\r\n      loadGist();\r\n    } else {\r\n      $document.on('jsbinReady', loadGist);\r\n    }\r\n  }\r\n\r\n  // prevent the app from accidently getting scrolled out of view\r\n  if (!jsbin.mobile) {\r\n    document.body.onscroll = window.onscroll = function () {\r\n      if (document.body.scrollTop !== 0) {\r\n        window.scrollTo(0,0);\r\n      }\r\n      return false;\r\n    };\r\n  }\r\n\r\n  window.CodeMirror = CodeMirror; // fix to allow code mirror to break naturally\r\n\r\n  // These are keys that CodeMirror (and Emmet) should never take over\r\n  // ref: https://gist.github.com/rodneyrehm/5213304\r\n  if (CodeMirror.keyMap && CodeMirror.keyMap['default']) {\r\n    var cmd = $.browser.platform === 'mac' ? 'Cmd' : 'Ctrl';\r\n    delete CodeMirror.keyMap['default'][cmd + '-L'];\r\n    delete CodeMirror.keyMap['default'][cmd + '-T'];\r\n    delete CodeMirror.keyMap['default'][cmd + '-W'];\r\n    delete CodeMirror.keyMap['default'][cmd + '-J'];\r\n    delete CodeMirror.keyMap['default'][cmd + '-R'];\r\n  }\r\n\r\n  // var link = document.createElement('link');\r\n  // link.rel = 'stylesheet';\r\n  // link.href = jsbin['static'] + '/css/font.css?' + jsbin.version;\r\n  // link.type = 'text/css';\r\n  // document.getElementsByTagName('head')[0].appendChild(link);\r\n\r\n  if (jsbin.embed) {\r\n    analytics.embed();\r\n  }\r\n\r\n});\ndefine('skylark-jsbin-client/main',[\r\n\t\"skylark-jsbin-coder\",\r\n\t\"./jsbin\",\r\n    \"./chrome/font\",\r\n    \"./chrome/splitter\",\r\n    \"./chrome/analytics\",\r\n    \"./chrome/settings\",\r\n    \"./render/saved-history-preview\",\r\n    \"./chrome/esc\",\r\n    \"./chrome/share\",\r\n    \"./chrome/issue\",\r\n    \"./chrome/download\",\r\n    \"./chrome/login\",\r\n    \"./chrome/tips\",\r\n    \"./chrome/keys\",\r\n    \"./chrome/save\",\r\n    \"./chrome/navigation\",\r\n    \"./chrome/file-drop\",\r\n    \"./chrome/gist\",\r\n    \"./chrome/spinner\",\r\n    \"./chrome/infocard\",\r\n    \"./chrome/last-bin\",\r\n    \"./chrome/archive\",\r\n    \"./chrome/transfer\",\r\n    \"./chrome/welcome-panel\",\r\n    \"./chrome/help-search\",\r\n    \"./chrome/app\"\r\n\r\n],function(coder,jsbin){\r\n\treturn jsbin;\r\n});\ndefine('skylark-jsbin-client', ['skylark-jsbin-client/main'], function (main) { return main; });\n\n"]}