{"version":3,"sources":["skylark-jsbin-client.js"],"names":["define","jsbin","$","cache","font","document","head","getElementsByTagName","selectors","size","settings","cssText","el","createElement","type","styleSheet","appendChild","createTextNode","Object","defineProperty","configurable","enumerable","get","set","val","e","insertFont","value","style","innerHTML","window","localStorage","getItem","JSON","parse","md5","removeItem","addEventListener","request","XMLHttpRequest","url","static","version","open","onload","this","status","response","setItem","send","analytics","track","category","action","label","ga","experiment","universalEditor","library","infocard","embed","top","location","milestone","pathname","clone","delete","lock","openShare","saveTemplate","createNew","from","openFromAvatar","openMenu","closeMenu","selectMenu","item","share","download","showPanel","panelId","hidePanel","logout","register","success","undefined","ok","login","enableLiveJS","archiveView","visible","archive","unarchive","loadGist","id","layout","panelsVisible","panel","push","sort","join","run","publishVanity","runconsole","welcomePanelState","state","s","welcomePanelLink","on","text","user","name","$history","$body","loaded","requestAttempts","$document","panels","getVisible","length","appendTo","detach","loadList","hasClass","hookUserHistory","ajax","dataType","root","error","remove","setTimeout","console","html","frag","mobile","find","append","updatePreview","$iframe","attr","removeAttr","updateViewing","$viewing","updateLayout","$tbodys","archiveMode","$parent","parent","each","$tbody","filter","$trs","removeClass","first","addClass","$bins","$toggle","delegate","$this","$row","parents","toggleClass","indexOf","data","alert","change","selected","event","shiftKey","metaKey","closest","preventDefault","stopImmediatePropagation","$tr","editUrl","allEditors","editor","getCode","trim","show","click","i","replace","prettyDate","trigger","$panelButtons","$homebtn","loginVisible","dropdownOpen","keyboardHelpVisible","urlHelpVisible","sideNavVisible","infocardVisible","hideOpen","closedropdown","hide","keydown","which","target","is","mapping","live","javascript","$sharepanels","selectedSnapshot","revision","changed","history","replaceState","getURL","withRevision","getQuery","$sharemenu","bind","prop","forEach","p","latest","checksum","$realtime","$snapshot","$andlive","checked","$withLiveReload","disabled","update","saveChecksum","$sharepreview","link","linkselect","form","$directLinks","$share","shareElement","$showShare","opendropdown","blur","formData","shareRoot","OGurl","shareurl","query","view","hidden","className","empty","directLinksHTML","code","ext","named","processors","extensions","toLowerCase","css","href","documentTitle","m","<",">","\"","&","githubIssue","body","navigator","userAgent","encodeURIComponent","$newissue","submit","key","email","$loginFeedback","username","complete","jqXHR","parseJSON","responseText","avatar","end","prepend","message","search","tipTimeout","$html","documentElement","$tip","$tipContent","removeTip","cb","resize","setTip","clearTimeout","content","autohide","parseInt","tipData","keys","withoutRoot","c","revsion","d","Date","getTime","stringify","init","store","saving","todo","_inprogress","inprogress","save","pop","updateCode","getTagContent","tag","result","re","all","capture1","capture2","meta","title","saveDisabled","owner","saveCode","$shareLinks","$panelCheckboxes","split","updateSavedState","map","getAttribute","path","nodeName","hash","getHighlightLines","lastHTML","updateDocMeta","currentHTML","description","updateSettings","sessionStorage","onSaveError","savingLabels","animate","opacity","_console","unbind","one","shown","sandbox","origin","ismac","cmd","shift","plus","stop","throttle","delay","deleted","savecontent","compressKeys","obj","compressed","LZString","compressToUTF16","callback","panelSettings","method","useCompression","protocol","processed","headers","Accept","$form","setupform","token","editors","ajaxCallback","saveOnExit","serializeArray","reduce","metadata","pushState","edit","updateArchiveMenu","processor","hideAll","$lockrevision","menuDown","dropdownButtons","f","focused","focus","mousedown","$dropdownLinks","nofocus","menu","substring","input","select","mouseup","ignoreUp","fromClick","hostname","triggerHandler","mouseover","render","renderLivePreview","jsconsole","clear","dblclick","lineNumbers","getOption","setOption","restore","$privateButton","$publicButton","$visibilityButtons","visibility","includejs","hideheader","cancelUp","mackeys","ctrl","del","shortcut","toUpperCase","metaContent","metatag","cm","test","setCode","cursor","getSearchCursor","findNext","contentCursor","line","pos","ch","to","setCursor","setSelection","mark","markText","xhr","confirm","deleteAll","$enableUniversalEditor","simple","reload","File","FileList","FileReader","holder","cursorPosition","guid","s4","Math","floor","random","toString","uploadAsset","file","loading","currentStatus","widget","insertPosition","getCursor","lameEditor","insertTextArea","addLineWidget","coverGutter","nohscroll","S3Upload","s3_sign_put_url","s3_object_name","files","onProgress","percent","requestAnimationFrame","progress","onError","reason","fromServer","color","onFinishS3Put","getInsertText","replaceRange","string","start","selectionStart","selectionEnd","mime","dragging","getFileData","Promise","resolve","reject","kind","getAsString","filename","getAsFile","ondragover","ondragend","jQueryEvent","CodeMirror","originalEvent","items","clipboardData","types","promises","then","a","b","catch","log","stack","coordsChar","y","left","x","jstypes","csstypes","htmltypes","ondrop","dataTransfer","reader","scroller","worker","Worker","postMessage","$el","onmessage","scrollTop","readAsText","allowDrop","CORS","XDomainRequest","Gist","gist","github_token","fileName","fileData","slice","prototype","processorInit","findByExtension","public","source","index","binToFile","desc","crossDomain","html_url","group","groupEnd","spinner","element","getContext","ctx","rafID","height","width","TORADIAN","PI","w","h","deg","r","speed","tailspeed","strokeStyle","lineWidth","last","draw","flip","fillStyle","fillRect","beginPath","arc","stroke","closePath","cancelAnimationFrame","global","setupInfocard","$template","$header","canvas","htmlpanel","viewers","es","insertTag","capture","updateHeaders","add","toTrigger","klass","statusCode","getJSON","codes","$headers","$fields","$clones","before","eq","initHandlers","updateInfoCard","updateStats","_data","connections","$b","listenStats","EventSource","close","userhtml","getPanelText","somethingSelected","listSelections","setSelections","classes","streaming","last_updated","pro","hiddenProperty","visibilityChangeEvent","handleVisibility","newurl","getScript","cookie","setTime","toUTCString","back","getElementById","nameEQ","ca","charAt","readCookie","decodeURIComponent","$transfers","prompt","_csrf","gui","toppanel","goSlow","blogpost","blog","slug","count","timestamp","prev","current","lastpost","help","array","t","shuffle","results","resultCount","searchTerms","position","searchFor","needles","haystack","ignore","endingRe","RegExp","word","words","lastIndexOf","matches","needle","children","inc","ready","onscroll","scrollTo","keyMap","browser","platform","coder","main"],"mappings":";;;;;;;g4BAAAA,EAAA,8BACA,sBACA,SAAAC,GACA,OAAAA,IAIAD,EAAA,oCACA,iBACA,YACA,SAAAE,EAAAD,GAMA,IA4CAE,EA5CAC,EAAA,SAAAC,GACA,IAAAC,EAAAD,EAAAE,qBAAA,QAAA,GACAC,EAAA,uHACAC,EAAAR,EAAAS,SAAAN,MAAA,GAGA,SAAAA,EAAAK,GACA,IAAAE,EAAAH,EAAA,gBAAAC,EAAA,QACAG,EAAAP,EAAAQ,cAAA,SAEAD,EAAAE,KAAA,WACAF,EAAAG,WACAH,EAAAG,WAAAJ,QAAAA,EAEAC,EAAAI,YAAAX,EAAAY,eAAAN,IAEAL,EAAAU,YAAAJ,GAGA,GAAAM,OAAAC,gBAAAlB,EAAAS,SACA,IACAQ,OAAAC,eAAAlB,EAAAS,SAAA,QACAU,cAAA,EACAC,YAAA,EACAC,IAAA,WACA,OAAAb,GAEAc,IAAA,SAAAC,GAEApB,EADAK,EAAA,EAAAe,MAIA,MAAAC,IAOA,OAFArB,EAAAK,GAEAL,EAvCA,CAwCAC,UAMA,SAAAqB,EAAAC,GACA,IAAAC,EAAAvB,SAAAQ,cAAA,SACAe,EAAAC,UAAAF,EACAtB,SAAAC,KAAAU,YAAAY,GAGA,KACAzB,EAAA2B,OAAAC,aAAAC,QAVA,YADA,sCAaA7B,EAAA8B,KAAAC,MAAA/B,IACAgC,IACAT,EAAAvB,EAAAwB,QAGAG,OAAAC,aAAAK,WAjBA,SAkBAjC,EAAA,OAGA,MAAAsB,GA/EA,OAyBA,OAtBAtB,GAEA2B,OAAAO,iBAAA,OAAA,WACA,IAAAC,EAAA,IAAAC,eAEAC,EAAAvC,EAAAwC,OAAA,yDAAAxC,EAAAyC,QACAJ,EAAAK,KAAA,MAAAH,GAAA,GACAF,EAAAM,OAAA,WACA,GAAA,KAAAC,KAAAC,OACA,IAEApB,EADAO,KAAAC,MAAAW,KAAAE,UACApB,OACAG,OAAAC,aAAAiB,QA2CA,QA3CAH,KAAAE,UACA,MAAAtB,MAKAa,EAAAW,SAIAhD,EAAAG,KAAAA,IAEAJ,EAAA,yCACA,iBACA,YACA,SAAAE,EAAAD,GACA,IAAAiD,GACAC,MAAA,SAAAC,EAAAC,EAAAC,GACAxB,OAAAyB,IAAAA,GAAA,OAAA,QAAAH,EAAAC,EAAAC,IAEAE,WAAA,SAAA1C,GACAoC,EAAAC,MAAA,aAAArC,IAEA2C,gBAAA,SAAA9B,GACAuB,EAAAC,MAAA,OAAA,kBAAAxB,IAEA+B,QAAA,SAAAL,EAAA1B,GACAuB,EAAAC,MAAA,OAAAE,EAAA,UAAA1B,IAEAgC,SAAA,SAAAN,EAAA1B,GACAuB,EAAAC,MAAA,WAAAE,EAAA1B,IAEAiC,MAAA,WACA,IACAV,EAAAC,MAAA,QAAA,QAAArB,OAAA+B,IAAAC,UACA,MAAArC,GACAyB,EAAAC,MAAA,QAAA,WAGAY,UAAA,WACAb,EAAAC,MAAA,MAAA,OAAArB,OAAAgC,SAAAE,WAEAC,MAAA,WACAf,EAAAC,MAAA,MAAA,QAAArB,OAAAgC,SAAAE,WAEAE,OAAA,WACAhB,EAAAC,MAAA,MAAA,SAAArB,OAAAgC,SAAAE,WAEAG,KAAA,WACAjB,EAAAC,MAAA,MAAA,OAAArB,OAAAgC,SAAAE,WAEAI,UAAA,WACAlB,EAAAC,MAAA,OAAA,OAAA,UAEAkB,aAAA,WACAnB,EAAAC,MAAA,OAAA,SAAA,kBAEAmB,UAAA,SAAAC,GACArB,EAAAC,MAAAoB,GAAA,OAAA,SAAA,QAEA5B,KAAA,SAAA4B,GACArB,EAAAC,MAAAoB,GAAA,OAAA,SAAA,SAEAC,eAAA,WACAtB,EAAAC,MAAA,OAAA,SAAA,oBAEAsB,SAAA,SAAAnB,GACAJ,EAAAC,MAAA,OAAA,OAAAG,IAEAoB,UAAA,SAAApB,GACAJ,EAAAC,MAAA,OAAA,QAAAG,IAEAqB,WAAA,SAAAC,GACAA,GACA1B,EAAAC,MAAA,OAAA,SAAAyB,IAGAC,MAAA,SAAAxB,EAAAC,GACAJ,EAAAC,MAAA,QAAAE,EAAAC,IAEAwB,SAAA,SAAAP,GACArB,EAAAC,MAAAoB,GAAA,OAAA,SAAA,aAEAQ,UAAA,SAAAC,GACA9B,EAAAC,MAAA,QAAA,OAAA6B,IAEAC,UAAA,SAAAD,GACA9B,EAAAC,MAAA,QAAA,OAAA6B,IAEAE,OAAA,WACAhC,EAAAC,MAAA,OAAA,SAAA,WAEAgC,SAAA,SAAAC,QACAC,IAAAD,EACAlC,EAAAC,MAAA,OAAA,OAAA,SAEAD,EAAAC,MAAA,OAAA,WAAAmC,GAAA,UAAA,SAGAC,MAAA,SAAAD,QACAD,IAAAC,EACApC,EAAAC,MAAA,OAAA,OAAA,SAEAD,EAAAC,MAAA,OAAA,QAAAmC,EAAA,UAAA,SAGAE,aAAA,SAAAF,GACApC,EAAAC,MAAA,SAAA,cAAAmC,EAAA,KAAA,QAEAG,YAAA,SAAAC,GACAxC,EAAAC,MAAA,SAAA,eAAAuC,EAAA,KAAA,QAEAC,QAAA,SAAAnD,GACAU,EAAAC,MAAA,SAAA,UAAAX,IAEAoD,UAAA,SAAApD,GACAU,EAAAC,MAAA,SAAA,YAAAX,IAEAqD,SAAA,SAAAC,GACA5C,EAAAC,MAAA,QAAA,YAAA2C,IAEAC,OAAA,SAAAC,GACA,IAAAD,KAAAE,EAAA,GAEA,IAAAA,KAAAD,EACAD,EAAAG,KAAAD,EAAAH,IAGA5C,EAAAC,MAAA,SAAA,SAAA4C,EAAAI,OAAAC,KAAA,MAAA,SAEAC,IAAA,SAAA9B,GACArB,EAAAC,MAAAoB,GAAA,SAAA,gBAEA+B,cAAA,WACApD,EAAAC,MAAA,MAAA,mBAEAoD,WAAA,SAAAhC,GACArB,EAAAC,MAAAoB,GAAA,SAAA,gBAEAiC,kBAAA,SAAAC,GACA,IAAAC,EAAA,QACAD,IACAC,EAAA,QAEAxD,EAAAC,MAAA,QAAA,gBAAAuD,IAEAC,iBAAA,SAAAnE,GACAU,EAAAC,MAAA,qBAAAX,KASA,OAJAtC,EAAA,sBAAA0G,GAAA,QAAA,WACA1D,EAAAC,MAAA,UAAAjD,EAAA2C,MAAAgE,UAGA5G,EAAAiD,UAAAA,IAEAlD,EAAA,wCACA,iBACA,YACA,SAAAE,EAAAD,MA+BAD,EAAA,qDACA,iBACA,YACA,SAAAE,EAAAD,GAEA,aACA,GAAAA,EAAA6G,MAAA7G,EAAA6G,KAAAC,OAAA9G,EAAA2D,MAAA,CAIA,IAGAoD,EAHAC,EAAA/G,EAAA,QACAgH,GAAA,EACAC,EAAA,EAGAlH,EAAAmH,UAAAR,GAAA,eAAA,WACAI,GAAA,IAAA/G,EAAAoH,OAAAC,aAAAC,QACAP,EAAAQ,SAAA,UAEAZ,GAAA,gBAAA,WACA,OAAAI,IACAA,EAAA9G,EAAA,YAAAuH,YAIA,IAAAC,EAAA,WACAR,IAIAhH,EAAA,QAAAyH,SAAA,kBACAC,IAEA1H,EAAA2H,MACAC,SAAA,OACAtF,IAAAvC,EAAA8H,KAAA,QACAC,MAAA,aACAb,EACA,GACAjH,EAAA,YAAA+H,SACAC,WAAAR,EAAA,MAEAS,QAAAH,MAAA,8BAGA5C,QAAA,SAAAgD,GACAlI,EAAA,YAAA+H,SACA,IAAAI,EAAAnI,EAAAkI,GACAnI,EAAAqI,QAGAD,EAAAE,KAAA,gBAAAN,SAEAhB,EAAAuB,OAAAH,GACAT,IACAV,GAAA,OAMAuB,EAAA,SAAAjG,EAAAkG,GACAA,EAAAC,KAAA,MAAAnG,EAAA,UACAkG,EAAAE,WAAA,WAGAC,EAAA,SAAArG,EAAAsG,GACAA,EAAAV,KAAA,YAAA5F,EAAA,KAAAA,EAAA,SAGAuG,EAAA,SAAAC,EAAAC,GACA,IAAAC,EAAAF,EAAAG,SACAH,EACAvB,SACA2B,KAAA,WACA,IAAAC,EAAAnJ,EAAA2C,MACAyG,EAAAL,EAAA,YAAA,kBACAM,EAAArJ,EAAA,KAAAoJ,EAAAD,GAAAC,OAAA,iBACAC,EAAAhC,OAAA,GACAgC,EAAAD,OAAA,UAAAE,YAAA,SACAH,EAAAG,YAAA,UACAD,EAAAE,QAAAC,SAAA,UAEAL,EAAAK,SAAA,YAGAlC,SAAA0B,IAGAtB,EAAA,WAGA,KADAZ,EAAA9G,EAAA,YAAAuH,UACAF,OACA,OAAAP,EAIA,IAAA0B,EAAAxI,EAAA,SAAA8G,GACA8B,EAAA5I,EAAA,WAAA8G,GACA2C,EAAA3C,EACAgC,EAAA9I,EAAA,QAAA8G,GACAuC,EAAArJ,EAAA,KAAA8G,GACA4C,EAAA1J,EAAA,kBAAA8G,GAKA2C,EAAAE,SAAA,uBAAA,QAAA,WACA,IAAAC,EAAA5J,EAAA2C,MACAkH,EAAAD,EAAAE,QAAA,MAmBA,OAjBAD,EAAAE,YAAA,YAEA/G,WAAA,IAAAL,KAAAmB,SAAAkG,QAAA,aAAA,UAAA,aAAAjK,EAAA8H,KAAAgC,EAAAI,KAAA,QAEApB,EAAAC,EAAAhC,EAAAW,SAAA,iBAEAzH,EAAA2H,MACA/G,KAAA,OACA0B,IAAAsH,EAAAnB,KAAA,QACAX,MAAA,WAEAoC,MAAA,0CACAL,EAAAE,YAAA,YACAlB,EAAAC,EAAAhC,EAAAW,SAAA,kBAEAvC,QAAA,gBAEA,IAIAwE,EAAAS,OAAA,WACArD,EAAAiD,YAAA,gBACA,IAAAtE,EAAAqB,EAAAW,SAAA,gBACAzE,UAAAuC,YAAAE,GACAoD,EAAAC,EAAArD,KAGA,IAAA2E,EAAA,KAyDA,OAxDAX,EAAAE,SAAA,IAAA,QAAA,SAAAU,GACA,IAAAA,EAAAC,WAAAD,EAAAE,QAAA,CAEA,IAAAX,EAAA5J,EAAA2C,MAEA,IAAAiH,EAAAY,QAAA,WAAAnD,OAOA,GAFAgD,EAAAI,iBACAJ,EAAAK,2BACA,YAAAd,EAAAK,KAAA,UAAA,CAQA,IAAAU,EAAAf,EAAAY,QAAA,MACAP,EAAAU,EAAAV,OACA3H,EAAAvC,EAAA8H,KAAAoC,EAAA3H,IAEA8H,IAAAzH,KACAf,OAAAgC,SAAAqG,EAAAW,SAEAvB,EAAAC,YAAA,YACAqB,EAAAnB,SAAA,YACAjB,EAAAjG,EAAAkG,GACAG,EAAArG,EAAAsG,GAEAwB,EAAAzH,WAnBA5C,EAAAoH,OAAA0D,WAAA,SAAA9E,GACAA,EAAA+E,OAAAC,UAAAC,OAAA3D,QACAtB,EAAAkF,YAsBAxB,EAAAE,SAAA,kBAAA,QAAA,SAAAU,GACAA,EAAAC,UAAAD,EAAAE,SACAvK,EAAA2C,MAAA0F,KAAA,gBAAA6C,UAMAlL,EAAA,aAAA8G,GAAA2B,KAAA,UAAA,SAAA0C,EAAA7J,GACA,OAAAA,EAAA8J,QAAA,IAAA,WACAC,aAGArD,WAAA,WACAa,EAAAC,GAAA,IACA,GAEA/I,EAAAmH,UAAAoE,QAAA,gBAEAxE,GAyCA,OArCA9G,EAAAG,UAAAuG,GAAA,aAAA,WACA,IAAA3G,EAAA2D,MAAA,CAIA,IAAA6H,EAAAvL,EAAA,aACAwL,EAAAxL,EAAA,YACA8F,EAAAiB,EAAAU,SAAA,iBAmBA+D,EAAA9E,GAAA,QAAAc,GACA+D,EAAA7E,GAAA,YAlBA,WAEA,IADA6E,EAAAnC,OAAA,WAAA/B,QACArH,EAAA2C,MAAA8E,SAAA,WACAD,MAiBAzH,EAAAmH,UAAAR,GAAA,eAAAc,GAEA1B,GACA0B,QAMAA,SAAAA,EACAe,cAAAA,EACAI,cAAAA,EACAE,aAAAA,EACAnB,gBAAAA,MAIA5H,EAAA,mCACA,iBACA,YACA,SAAAE,EAAAD,GACA,IAAA0L,GAAA,EACAC,GAAA,EACAC,GAAA,EACAC,GAAA,EACAC,GAAA,EACAC,GAAA,EAQA,SAAAC,IACAD,IACA9L,EAAA,aAAAsJ,YAAA,QACAwC,GAAA,GAEAD,IACA9E,MAAAuC,YAAA,YACAuC,GAAA,GAEAD,GACA7E,MAAAuC,YAAA,WACAsC,GAAA,EACA5I,UAAAwB,UAAA,SACAmH,GACA5E,MAAAuC,YAAA,gBACAqC,GAAA,EACA3I,UAAAwB,UAAA,iBACAkH,EACAM,gBACAP,IACAzL,EAAA,UAAAiM,OACAjJ,UAAAwB,UAAA,SACAiH,GAAA,GA5BA1L,EAAAmH,UAAAgF,QAAA,SAAA7B,GACA,IAAAA,EAAA8B,OACAJ,MA8BAhM,EAAAmH,UAAAyC,SAAA,SAAA,QAAA,SAAAU,GACArK,EAAAqK,EAAA+B,QAAAC,GAAA,WACAN,QAKAjM,EAAA,qCACA,iBACA,qCACA,YACA,SAAAE,EAAAmH,EAAApH,GACA,aAIA,GAAA,IAAAC,EAAA,2BAAAqH,OAAA,CAIA,IAAAiF,GACAC,KAAA,SACAC,WAAA,MAEAC,EAAAzM,EAAA,uCAEA0M,EAAA3M,EAAAwG,MAAAoG,SAEA5M,EAAAmH,UAAAR,GAAA,QAAA,WACAgG,EAAA3M,EAAAwG,MAAAoG,WAGA5M,EAAAmH,UAAAR,GAAA,WAAA,WACA3G,EAAAwG,MAAAqG,SAAA,EACAhL,OAAAiL,QAAAC,cACAlL,OAAAiL,QAAAC,aAAA,KAAA,GAAA/M,EAAAgN,QAAAC,cAAA,IAAA,SAAA7F,EAAA8F,cAIA,IAAAC,EAAAlN,EAAA,cAAAmN,KAAA,OAAA,WAGAV,EAAAW,KAAA,WAAA,GACArN,EAAAoH,OAAAC,aAAAiG,QAAA,SAAAC,GACAb,EAAArD,OAAA,YAAAkD,EAAAgB,EAAA1H,KAAA0H,EAAA1H,IAAA,MAAAwH,KAAA,WAAA,KAIArN,EAAAwG,MAAAgH,QAEAxN,EAAAwG,MAAAiH,UACAC,EAAAL,KAAA,UAAArN,EAAAwG,MAAAgH,QACAG,EAAAN,KAAA,WAAA,GAEAO,EAAA1C,SAGAwC,EAAAL,MAAAQ,SAAA,IACAF,EAAAN,KAAA,WAAA,GACAO,EAAA1B,QAGA4B,EAAA5C,SAGAwC,EAAAL,MAAAQ,SAAA,EAAAE,UAAA,IACAJ,EAAAN,KAAA,WAAA,GACAS,EAAA5B,QAGA8B,MAEAb,EAAA7E,KAAA,iBAAA3B,GAAA,SAAA,WACA3G,EAAAiO,cAAA,EACAjO,EAAAwG,MAAAiH,UAAA,EACAzN,EAAAmH,UAAAoE,QAAA,YAEA,IAAA2C,EAAAjO,EAAA,kBACAyN,EAAAzN,EAAA,qDACA0N,EAAA1N,EAAA,qDACAkO,EAAAhB,EAAA7E,KAAA,UAAA,GACA8F,EAAAjB,EAAA7E,KAAA,qBAAA,GACA3E,EAAAwJ,EAAA7E,KAAA,YAAA,GACA+F,EAAAlB,EAAA7E,KAAA,QAAA,GACAgG,EAAAnB,EAAA7E,KAAA,iBACAsF,EAAA3N,EAAA,YACA6N,EAAAX,EAAA7E,KAAA,gBAgJArI,EAAA,mCAAA0G,GAAA,SAAA,WACA,aAAA/D,KAAAlB,OACA1B,EAAAwG,MAAAiH,UAAA,EACAzN,EAAAiO,cAAA,EACAH,EAAA5B,QAEA4B,EAAA5C,SAIAiC,EAAA7E,KAAA,SAAA3B,GAAA,SAAAqH,GAEAhO,EAAAmH,UAAAR,GAAA,QAAA,WAGA+G,EAAAL,KAAA,WAAA,GAGAF,EAAA5D,YAAA,UAEAyE,MAGA,IAAAO,EAAAtO,EAAA,UAAAwK,QAAA,SACA+D,EAAAvO,EAAA,gBAAA,GACAwO,EAAAxO,EAAA,gBAAA0G,GAAA,QAAA,WACA4H,EAAA7G,SAAA,QACAuE,cAAAuC,GAEAE,aAAAF,GAAA,GAEAC,EAAAE,SAhIA,SAAAX,IACA,IAAA9D,EA7CA,SAAAmE,GAmBA,IAlBA,IAEA3M,EACAf,EACAE,EACAiG,EALAQ,EAAA+G,EAAA/G,OACA4C,KAMA3B,EAAA,SAAA2B,EAAApD,EAAApF,QACA0D,IAAA8E,EAAApD,GACAoD,EAAApD,GAAApF,GAEA,iBAAAwI,EAAApD,KACAoD,EAAApD,IAAAoD,EAAApD,KAEAoD,EAAApD,GAAAb,KAAAvE,KAIA0J,EAAA,EAAAA,EAAA9D,EAAA8D,IACAzK,EAAA0N,EAAAjD,GACA1J,EAAAf,EAAAe,MACAb,EAAAF,EAAAE,KACAiG,EAAAnG,EAAAmG,KAEA,UAAAjG,EACAF,EAAAkN,SACAtF,EAAA2B,EAAApD,EAAApF,GAEA,aAAAb,QACAuE,IAAA8E,EAAApD,KACAoD,EAAApD,OAEAnG,EAAAkN,SACAtF,EAAA2B,EAAApD,EAAApF,IAGA6G,EAAA2B,EAAApD,EAAApF,GAIA,OAAAwI,EAIA0E,CAAAP,GACA9L,EAAAvC,EAAAgN,QAAAlF,KAAA9H,EAAA6O,YACAC,EAAA9O,EAAAgN,SAEA,aAAA9C,EAAA1D,OAAAxG,EAAAwG,MAAAgH,SACAjL,GAAA,IAAAoK,EACAmC,GAAA,IAAAnC,GAGA,IAAAoC,EAAAxM,EAGAyM,EAAA9E,EAAAlE,MAAAG,KAAA,KAEA6I,IACAA,EAAA,IAAAA,GAGAtC,EAAAW,KAAA,WAAA,WAAAnD,EAAA+E,MACAf,EAAAxF,KAAA,QAAAwB,EAAA+E,MAEA,WAAA/E,EAAA+E,MACAf,EAAA5F,KAAA,eAAAa,KAAA,WACAvG,KAAAsM,QAAA,IAAAhF,EAAAlE,MAAAiE,QAAArH,KAAAuM,aAIA,WAAAjF,EAAA+E,KACAF,GAAA,QAEAC,EAAA,GAKAV,EAAAc,QAEA,IAAAC,KAEAC,EAAA,GACAC,EAAA,GAuBA,IArBAD,EAAAtP,EAAAoH,OAAAoI,MAAArH,KAAA6C,UAAAC,UAIA,UADAsE,EAAAE,WAAAzP,EAAAwG,MAAAiJ,WAAAtH,MAAA,QAAAuH,WAAA,IAEAL,EAAApJ,KAAA,4BAAA1D,EAAA,IAAAgN,EAAA,KAAAA,EAAA,QACA,IAAAD,EAAAK,cAAA1F,QAAA,SACAoF,EAAApJ,KAAA,4BAAA1D,EAAA,kBAIAvC,EAAAoH,OAAAoI,MAAAI,IAAA5E,UAAAC,SAEA,SADAsE,EAAAE,WAAAzP,EAAAwG,MAAAiJ,WAAAG,KAAA,OAAAF,WAAA,KAEAL,EAAApJ,KAAA,4BAAA1D,EAAA,iBAEA8M,EAAApJ,KAAA,4BAAA1D,EAAA,IAAAgN,EAAA,KAAAA,EAAA,SAGAD,EAAAtP,EAAAoH,OAAAoI,MAAA/C,WAAAzB,UAAAC,OAEA,CAGA,QAFAsE,EAAAE,WAAAzP,EAAAwG,MAAAiJ,WAAAhD,YAAA,cAAAiD,WAAA,KAGAL,EAAApJ,KAAA,4BAAA1D,EAAA,eAGA,IACAP,KAAAC,MAAAqN,GACAD,EAAApJ,KAAA,4BAAA1D,EAAA,mBACA,MAAAf,GACA6N,EAAApJ,KAAA,4BAAA1D,EAAA,IAAAgN,EAAA,KAAAA,EAAA,SAKAjB,EAAAnG,KAAAkH,EAAAlJ,KAAA,KAEAiI,EAAA1M,MAAAyM,EAAA0B,KAAAd,EAAAC,EACArL,EAAAjC,OAAA,gCAAAoN,EAAA,SAAAE,EAAA,KAAAhP,EAAA8P,cAAA,iCAAA9P,EAAAwC,OAAA,oBAAAxC,EAAAyC,QAAA,gBAAA4I,QAAA,QAAA,SAAA0E,GACA,OACAC,IAAA,OACAC,IAAA,OACAC,IAAA,SACAC,IAAA,SACAJ,QA4CAhQ,EAAA,qCACA,iBACA,YACA,SAAAE,EAAAD,GAGA,aAEA,SAAAoQ,IACA,IACAC,GAAA,kEACA,0EACA,oEACAxO,OAAAyO,UAAAC,UAAA,KACAvQ,EAAA6G,MAAA7G,EAAA6G,KAAAC,KAAA,KAAA9G,EAAA6G,KAAAC,KAAA,GACA,MAAAX,KAAA,IAEA,MAAA5D,iDAAAiO,mBAAAH,EAAAhF,QAAA,SAAArL,EAAAgN,QAAAC,cAAA,MAGA,IAAAwD,EAAAxQ,EAAA,aAMA,OAJAA,EAAA,SAAAiJ,SAAAvC,GAAA,OAAA,WACA8J,EAAA/H,KAAA,OAAA0H,OAGAA,IAIArQ,EAAA,wCACA,iBACA,WACA,eACA,SAAAE,EAAAD,EAAAiD,GACAhD,EAAA,aAAAkL,MAAA,SAAAb,GACAA,EAAAI,iBACA7I,OAAAgC,SAAA7D,EAAAgN,QAAAC,cAAA,IAAA,YACAhK,EAAA4B,eAGA9E,EAAA,qCACA,iBACA,YACA,SAAAE,EAAAD,GAGAC,EAAA,cAAAyQ,OAAA,SAAApG,GACA,aACAA,EAAAI,iBAEA,IAAA2D,EAAApO,EAAA2C,MACAkE,EAAAuH,EAAA/F,KAAA,wBAAA/G,MACAoP,EAAAtC,EAAA/F,KAAA,wBAAA/G,MACAqP,EAAAvC,EAAA/F,KAAA,qBAAA/G,MACAsP,EAAAxC,EAAA/F,KAAA,kBAIAuI,EAAA3F,OAAAtE,KAAA,eAEA3G,EAAA2H,MACArF,IAAA8L,EAAA3F,KAAA,UACAwB,MAAA4G,SAAAhK,EAAA6J,IAAAA,EAAAC,MAAAA,GACA/P,KAAA,OACAgH,SAAA,OACAkJ,SAAA,SAAAC,GACA,IAAA9G,EAAAjK,EAAAgR,UAAAD,EAAAE,kBAEA,MAAAF,EAAAnO,QACAqH,EAAAiH,QACAlR,EAAA,YAAAqI,KAAA,OAAAN,SAAAoJ,MAAAC,QAAA,aAAAnH,EAAAiH,OAAA,MAEAjH,EAAAoH,QACAT,EAAAjK,KAAAsD,EAAAoH,SAEAzP,OAAAgC,SAAAhC,OAAAgC,SAAAE,SAAAlC,OAAAgC,SAAA0N,SAGAtO,UAAAqC,OAAA,GACAuL,EAAAjK,KAAAsD,EAAAoH,SAAA,IAAAxK,EAAA,0GAOA/G,EAAA,oCACA,iBACA,YACA,SAAAE,EAAAD,GAEA,IAGAwR,EAHAC,EAAAxR,EAAAG,SAAAsR,iBACAC,EAAA1R,EAAA,QACA2R,EAAA3R,EAAA,IAAA0R,GAGAE,EAAA,SAAAC,GACAL,EAAAlI,YAAA,WACAoI,EAAApI,cACAqI,EAAAzJ,KAAA,IACAlI,EAAA4B,QAAAkQ,SACAD,GAAA7J,WAAA6J,EAAA,IAGAE,EAAA,SAAA9H,GACA+H,aAAAT,GACAI,EAAAzJ,KAAA+B,EAAAgI,SACAP,EAAApI,cAAAE,SAAAS,EAAArJ,MAAA,QACA4Q,EAAAhI,SAAA,WACAS,EAAAiI,WACAX,EAAAvJ,WAAA,WACA4J,KACAO,SAAAlI,EAAAiI,SAAA,KAAA,OAcAnS,EAAAmH,UAAAR,GAAA,MAAA,SAAA2D,EAAAJ,GACA,IAAAmI,EAAAnI,EAOA,GANA,iBAAAA,KACAmI,MACAH,QAAAhI,EACAmI,EAAAxR,KAAA,QAGA+Q,EAAAzJ,SAAAkK,EAAAH,SACAP,EAAAjK,SAAA2K,EAAAxR,MAAA,OAAAmR,EAAA9H,GACA2H,EAAA,WACAG,EAAAK,OAIApS,EAAA,QAAA0G,GAAA,QAAA,YAAA,WAEA,OADAkL,KACA,IAIA7R,EAAAmH,UAAAgF,QAAA,SAAA7B,GACA,IAAAA,EAAA8B,OACAyF,QAKA9R,EAAA,oCACA,iBACA,YACA,SAAAE,EAAAD,GAGA,aAGA,IAAAA,EAAA6G,OAAA7G,EAAA6G,KAAAC,KAAA,CAIA,IAAAwL,KAEAhK,EAAA,SAAA/F,GACA,IAAAoO,EAAA2B,EAAA/P,GAAAvC,EAAAgN,QAAAC,cAAA,EAAAsF,aAAA,SACA,OAAA5B,EAAA6B,GAGA,IACA,iBAAA3Q,QAAAA,OAAA,aAGA,MAAAL,GACA,OAAA8G,EAqBA,OAdAtI,EAAAmH,UAAAR,GAAA,QAAA,WACA2L,EAAAtS,EAAAgN,QAAAC,cAAA,EAAAsF,aAAA,MAAA9L,EAAAzG,EAAAwG,MAAAiM,QAAAD,EAAAxS,EAAAwG,MAAAiH,SAAAiF,GAAA,IAAAC,MAAAC,WACA9Q,aAAAwQ,KAAAtQ,KAAA6Q,UAAAP,KAIAzQ,OAAAO,iBAAA,UAAA,SAAAkI,GACA,SAAAA,EAAAqG,KACAmC,MAIAA,IAEA9S,EAAAsS,KAAAhK,EAlBA,SAAAwK,IACAR,EAAAtQ,KAAAC,MAAAH,aAAAwQ,MAAA,SAoBAvS,EAAA,oCACA,iBACA,6BACA,qCACA,WACA,eACA,SAAAE,EAAA8S,EAAA3L,EAAApH,EAAAiD,GAGA,IAAA+P,GACAC,MACA9K,MAAA,EACAyH,KAAA,EACAnD,YAAA,GAEAyG,aAAA,EACAC,WAAA,SAAAA,GACA,QAAA,IAAAA,EACA,OAAAH,EAAAE,YAIA,GADAF,EAAAE,YAAAC,GACA,IAAAA,EAAA,CACA,IAAA/L,GAAA,OAAA,MAAA,cAEAgM,EAAA,WACA,IAAAH,EAAA7L,EAAAiM,MACAJ,GAAAD,EAAAC,KAAAA,IACAD,EAAAE,aAAA,EACAI,EAAAL,EAAAG,GACAJ,EAAAC,KAAAA,IAAA,GACAA,GACAG,KAIAA,OAKA,SAAAG,EAAAC,GACA,IAAArL,EAAAnI,EAAAoH,OAAAoI,MAAArH,KAAA6C,UACAyI,EAAA,GAGA,OAAA,IAAAtL,EAAA8B,QAAA,IAAAuJ,GACAC,EAGA,UAAAD,GAAA,SAAAA,GACAtL,QAAAH,MAAA,qBAAAyL,EAAA,qBACAC,IAIAtL,EAAAkD,QAAAkI,EAAAG,GAAAF,GAAA,SAAAG,EAAAC,EAAAC,GACAJ,EAAA,UAAAD,EAAAI,EAAAC,IAGAJ,GAGAF,EAAAG,IACAI,KAAA,gDACAC,MAAA,0BAKA9T,EAAA,UAAAkL,MAAA,SAAAb,GACAA,EAAAI,iBAEAzH,EAAAa,YAEA,IAAA8D,GAAA,EASA,OARA,IAAA5H,EAAAgU,eACApM,GAAA,IAGA5H,EAAAwG,MAAAqG,SAAA7M,EAAAqI,SAAArI,EAAAiU,UACAC,EAAA,OAAAtM,IAGA,IAGA,IAAAuM,EAAAlU,EAAA,gBACAmU,EAAAnU,EAAA,iCAGAoU,EAAApU,EAAA,2BAAAqH,OAGA,SAAAgN,IACA,aACA,IAAAD,EAAA,CAIA,IAAA9H,GACAC,KAAA,SACAC,WAAA,KACAmD,IAAA,MACAzH,KAAA,OACAD,QAAA,WAKA8G,EAAAoF,EAAA/K,OAAA,YAAAkL,IAAA,WACA,OAAAhI,EAAA3J,KAAA4R,aAAA,iBACAnT,MAAA8E,KAAA,KACAgO,EAAAhL,KAAA,WACA,IAAAsL,EAAA7R,KAAA4R,aAAA,aACAjS,EAAAvC,EAAAgN,QAAAC,cAPA,IAOAwH,GAAAzF,GAAA,gBAAApM,KAAAiD,GAAA,IAAAmJ,EAAA,IACA0F,EAAA9R,KAAA8R,SACAC,EAAAvN,EAAAwN,oBAEAD,IACAA,EAAA,IAAAA,GAGA,MAAAD,EACA9R,KAAAiN,KAAAtN,EACA,UAAAmS,GACA9R,KAAAlB,MAAAa,EACA,UAAAkS,IACA7R,KAAAlB,OAAAiT,IAEA,aAAAD,IACA9R,KAAAlB,OAAA,gCAAAa,EAAAoS,EAAA,KAAA3U,EAAA8P,cAAA,oBAAA9P,EAAAwC,OAAA,4BAAA6I,QAAA,QAAA,SAAA0E,GACA,OACAC,IAAA,OACAC,IAAA,OACAC,IAAA,SACAC,IAAA,SACAJ,SAMA9P,EAAA,cAAAmN,KAAA,OAAAkH,GACArU,EAAA,mCAAA0G,GAAA,QAAA,WACA,aAAA/D,KAAAlB,QACA1B,EAAAwG,MAAAiH,UAAA,EACAQ,GAAA,GAEAqG,MAGA,IAAAO,EAAA,KAEA,SAAAC,EAAAxK,EAAAJ,GACA,IAAAA,GACA,SAAAA,EAAAnF,QADA,CAMA,IAAAgQ,EAAA/U,EAAAoH,OAAAoI,MAAArH,KAAA6C,UACA,GAAA6J,IAAAE,EAAA,CACAF,EAAAE,EAEA,IAAAC,EAAAzB,EAAA,QACAyB,IAAAhV,EAAAwG,MAAAwO,cACAhV,EAAAwG,MAAAwO,YAAAA,EACAhV,EAAAwG,MAAAyO,gBAAAD,YAAAA,KAGA,IAAAjB,EAAAR,EAAA,SACAQ,IAAA/T,EAAAwG,MAAAuN,QACA/T,EAAAwG,MAAAuN,MAAAA,EACA/T,EAAAwG,MAAAyO,gBAAAlB,MAAAA,IAEA/T,EAAA8P,cAAAiE,EACA/T,EAAA8P,cACA1P,SAAA2T,MAAA/T,EAAA8P,cAAA,MAAA9P,EAAA8G,KAEA1G,SAAA2T,MAAA/T,EAAA8G,QAMA9G,EAAAmH,UAAAR,GAAA,eAAAmO,GAEA9U,EAAAmH,UAAAR,GAAA,QAAA,WACA3G,EAAAwG,MAAAqG,SAAA,EACAyH,IAEArU,EAAA,qDAAAoN,KAAA,WAAA,GAEA8G,EAAA1J,QAAA,SAAAlB,YAAA,UAEAtJ,EAAA,aAAAyI,KAAA,OAAA1I,EAAAgN,UAAAzD,YAAA,UACAtJ,EAAA,UAAAsJ,YAAA,UAEAuL,MAGA,IAAA7G,EAAAjO,EAAAwG,MAAAiH,UAAAsF,EAAAmC,eAAAnT,QAAA,cAAA,EAmBA,SAAAoT,EAAAnE,EAAAjM,GACA,MAAAiM,EAAAnO,QAEA5C,EAAA,UAAAkI,KAAA,8CACAlI,EAAAG,SAAAsR,iBAAAjI,SAAA,YACA,MAAAuH,EAAAnO,OACA7C,EAAAmH,UAAAoE,QAAA,OACA1K,KAAA,QACAqR,QAAA,uFAAArQ,OAAAgC,SAAA,8FAEAkB,IACAA,GAAAqQ,EAAArQ,GAAA6B,KAAA,aAAAyO,SAAAC,QAAA,GAAA,KACAzT,OAAA0T,SAAAxN,OAAAuJ,QAAA,qFAOA,GAnCAtR,EAAAwG,MAAAiH,SAAAQ,EAEAA,EAEAhO,EAAA,uBAAAsJ,YAAA,YAAAiM,OAAA,2BAEAvV,EAAA,uBAAAwV,IAAA,QAAA,SAAAnL,GACAA,EAAAI,iBACAzK,EAAA,UAAAkL,UAIAnL,EAAAmH,UAAAsO,IAAA,QAAA,WACAxV,EAAA,uBAAAsJ,YAAA,YAAAiM,OAAA,6BAsBAxV,EAAAgU,aAqEAhU,EAAAmH,UAAAsO,IAAA,aAAA,WACA,aACA,IAAAC,GAAA,EACA1V,EAAA2D,OAAA3D,EAAA2V,SACA3V,EAAAmH,UAAAR,GAAA,kBAAA,SAAA2D,EAAAJ,GACA,IAAAA,EAAAvH,SAAA+S,GAAA,aAAAxL,EAAA0L,OAAA,CACAF,GAAA,EACA,IAAAG,GAAA,IAAAvF,UAAAC,UAAAtG,QAAA,SACA6L,EAAAD,EAAA,IAAA,OACAE,EAAAF,EAAA,IAAA,QACAG,EAAAH,EAAA,GAAA,IAEA7V,EAAAmH,UAAAoE,QAAA,OACA1K,KAAA,eACAqR,QAAA,qGAAAlS,EAAA8H,KAAA,6CAAAgO,EAAAE,EAAAD,EAAAC,EAAA,+CAnFA,CACA/V,EAAA,4BAAAsI,OAAA,oCAEA,IAAA6M,GACAjN,KAAAlI,EAAA,gCACAwM,WAAAxM,EAAA,sCACA2P,IAAA3P,EAAA,gCAGAD,EAAAmH,UAAAiG,KAAA,aAAA,WACApN,EAAAwG,MAAAqG,SAAA,EACA7M,EAAAoH,OAAA0D,WAAA,SAAA9E,GACAA,EAAAW,GAAA,YAAA,WAEA3G,EAAA8H,OAAA9H,EAAAgN,UACAhN,EAAAmH,UAAAoE,QAAA,eAAAxG,QAAAiB,EAAAH,UAKA7F,EAAAmH,UAAAiG,KAAA,aAAA,SAAA9C,EAAAJ,GACAlK,EAAAwG,MAAAqG,SAAA,EAEAuI,EAAAlL,EAAAnF,UACAqQ,EAAAlL,EAAAnF,SAAA6K,KAAA0F,QAAA,IAAAW,MAAA,GAAA,KAIAjW,EAAAmH,UAAAiG,KAAA,eAAApN,EAAAkW,SAAA,SAAA5L,EAAAJ,GAEAkL,EAAAlL,EAAAnF,SACA6B,KAAA,SACAqP,MAAA,GAAA,GACAZ,SAAAC,QAAA,GAAA,KACAa,MAAA,MACAd,SAAAC,QAAA,GAAA,MACA,MAEAtV,EAAAmH,UAAAiG,KAAA,aAAApN,EAAAkW,SAAA,SAAA5L,EAAAJ,GACA,GAAAA,EAAAnF,UAIA/E,EAAAwG,MAAA4P,QAAA,CAIA,IAAArR,EAAAmF,EAAAnF,QAEA/E,EAAAoH,OAAAiP,cAEArD,EAAAG,aAEAH,EAAAC,KAAAlO,IAAA,GAIAiO,EAAAG,YAAA,GAGAlF,GAAAjO,EAAAwG,MAAA8I,KAIAgE,EAAAvO,GAFAmP,EAAA,QAAA,MAIA,QAyBA,SAAAoC,EAAAhE,EAAAiE,GACAA,EAAAC,WAAAlE,EACAA,EAAA+B,MAAA,KAAA/G,QAAA,SAAAqD,GACA4F,EAAA5F,GAAA8F,SAAAC,gBAAAH,EAAA5F,MAIA,SAAA2C,EAAAvO,EAAA4R,GACA,IAAAC,KAEA5W,EAAAwG,MAAAiJ,aACAmH,EAAAnH,WAAAzP,EAAAwG,MAAAiJ,YAGA,IAAAvF,GACAoF,KAAAtP,EAAAwG,MAAA8I,KACA1C,SAAA5M,EAAAwG,MAAAoG,SACAiK,OAAA,SACA7Q,MAAAjB,EACAmN,QAAA9K,EAAAoI,MAAAzK,GAAAiG,UACAyC,SAAAzN,EAAAiO,aACAxN,SAAAuB,KAAA6Q,UAAA+D,IAGA5W,EAAAS,SAAAqW,gBAAA,UAAAjT,SAAAkT,UACAT,EAAA,UAAApM,GAGAlK,EAAAwG,MAAAiJ,WAAA1K,IACA/E,EAAAwG,MAAAiJ,WAAA1K,KAAAA,GACA/E,EAAAwG,MAAAtG,MAAA6E,KACAmF,EAAA8M,UAAAhX,EAAAwG,MAAAtG,MAAA6E,GAAA0O,QAGAxT,EAAA2H,MACArF,IAAAvC,EAAAgN,QAAAC,cAAA,IAAA,QACA/C,KAAAA,EACArJ,KAAA,OACAgH,SAAA,OACAoP,SAAAC,OAAA,oBACA/R,QAAA,SAAA+E,GACAlK,EAAAmH,UAAAoE,QAAA,gBAAAxG,QAAAA,IACAmF,EAAAnC,MACAmM,EAAA,QAAA,EAAA,cAIAlU,EAAAwG,MAAAgH,QAAA,GAGAzF,MAAA,SAAAiJ,GACAmE,EAAAnE,EAAAjM,IAEAgM,SAAA,WACAiC,EAAAG,YAAA,GACAwD,GAAAA,OAQA,SAAA3S,EAAAsG,GACAA,EAAAI,iBAGA1K,EAAAoH,OAAAgM,OACAnQ,EAAAe,QAEA,IAAAmT,EAAAC,EAAA,YAGA,OAFAD,EAAAzG,UAEA,EAGA,SAAA0G,EAAAP,GACA,IAAAM,EAAAlX,EAAA,iBAAAmP,QACA7G,OAAA,6CACAA,OAAA,uCACAA,OAAA,sCACAA,OAAA,yCACAA,OAAA,4CAAAvI,EAAAwG,MAAA6Q,MAAA,QACA9O,OAAA,2CACAA,OAAA,2CAEA9H,KAmBA,OAjBAT,EAAAwG,MAAAiJ,aACAhP,EAAAgP,WAAAzP,EAAAwG,MAAAiJ,YAKA,YAAAzP,EAAAwG,MAAA8I,MACA6H,EAAAzO,KAAA,SAAA,SAGAyO,EAAA7O,KAAA,wBAAA/G,IAAAS,KAAA6Q,UAAApS,IACA0W,EAAA7O,KAAA,0BAAA/G,IAAA+V,QAAA7K,WAAAzB,WACAmM,EAAA7O,KAAA,mBAAA/G,IAAA+V,QAAA1H,IAAA5E,WACAmM,EAAA7O,KAAA,oBAAA/G,IAAA+V,QAAAnP,KAAA6C,WACAmM,EAAA7O,KAAA,sBAAA/G,IAAAsV,GACAM,EAAA7O,KAAA,wBAAA/G,IAAAvB,EAAAwG,MAAAiH,UAEA0J,EAgBA,SAAAjD,EAAA2C,EAAAjP,EAAA2P,GAEA,IAAAJ,EAAAC,EAAAP,GAEA7W,EAAAoH,OAAAgM,OACApT,EAAAoH,OAAAoQ,YAAA,EAEA,IAAAtN,EAAAiN,EAAAM,iBAAAC,OAAA,SAAAnB,EAAArM,GAEA,OADAqM,EAAArM,EAAApD,MAAAoD,EAAAxI,MACA6U,OAGAvW,EAAAS,SAAAqW,gBACAR,EAAA,sBAAApM,GAGAtC,EACA3H,EAAA2H,MACArF,IAAAvC,EAAAgN,QAAAC,cAAA,IAAA,QACA/C,KAAAA,EACArC,SAAA,OACAhH,KAAA,OACAoW,SAAAC,OAAA,oBACA/R,QAAA,SAAA+E,GAeA,GAdAqN,GACAA,EAAArN,GAGA6I,EAAAmC,eAAAnS,QAAA,WAAAmH,EAAAuD,UACAQ,EAAA/D,EAAAuD,SAEAzN,EAAAwG,MAAAiH,SAAAQ,EACAjO,EAAAwG,MAAA8I,KAAApF,EAAAoF,KACAtP,EAAAwG,MAAAoG,SAAA1C,EAAA0C,SACA5M,EAAAwG,MAAAgH,QAAA,EACAxN,EAAAwG,MAAAmR,UAAA7Q,KAAA9G,EAAA6G,KAAAC,MACAqQ,EAAAzO,KAAA,SAAA1I,EAAAgN,QAAAC,cAAA,IAAA,SAEApL,OAAAiL,SAAAjL,OAAAiL,QAAA8K,UAAA,CAEA,IAAAjD,EAAAvN,EAAAwN,oBACAD,IAAAA,EAAA,IAAAA,GACA,IAAA3F,EAAA5H,EAAA8F,WACA8B,IAAAA,EAAA,IAAAA,GAGAnN,OAAAiL,QAAA8K,UAAA,KAAA,GAAA5X,EAAAgN,QAAAC,cAAAoH,IAAA,QAAArF,EAAA2F,GACA5B,EAAAmC,eAAAnS,QAAA,MAAA/C,EAAAgN,QAAAC,cAAAoH,UAEAxS,OAAAgC,SAAA8Q,KAAAzK,EAAA2N,KAGA7X,EAAAmH,UAAAoE,QAAA,UAEAxD,MAAA,SAAAiJ,GACAmE,EAAAnE,EAAA,OAEAD,SAAA,WACAiC,EAAAG,YAAA,MAIAgE,EAAAzG,SA3HAzQ,EAAA,WAAAkL,MAAAnH,GACA/D,EAAA,QAAA2J,SAAA,UAAA,QAAA5F,KA+HAjE,EAAA,uCACA,iBACA,WACA,eACA,SAAAE,EAAAD,EAAAiD,GAwCA,SAAA6U,IACA9X,EAAAwG,MAAAmR,UAAA3X,EAAAwG,MAAAmR,SAAAjS,SACAzF,EAAA,gBAAAiM,OACAjM,EAAA,kBAAAiL,SAEAjL,EAAA,gBAAAiL,OACAjL,EAAA,kBAAAiM,QAMA,OAFA4L,IAEA9X,EAAA0F,QAnDA,SAAAC,GAEA,aACA,IAAA9E,GAAA,IAAA8E,EAAA,YAAA,UACAiB,GAAA,IAAAjB,EAAA,uBAAA,YACA1C,EAAApC,GAAAb,EAAAgN,QAAAC,cAAA,KACAjN,EAAA6G,KAAAC,KAKA9G,EAAAiU,QACAhU,EAAA2H,MACA/G,KAAA,OACA0B,IAAAvC,EAAAgN,QAAAC,cAAA,IAAA,IAAApM,EACAkH,MAAA,WACA/H,EAAAmH,UAAAoE,QAAA,OACA1K,KAAA,QACAqR,QAAA,OAAAtL,EAAA,+DAGAzB,QAAA,WACAnF,EAAAwG,MAAAmR,SAAAjS,SAAA,IAAAC,EACAmS,IACA9X,EAAAmH,UAAAoE,QAAA,OACA1K,KAAA,aACAsR,SAAA,IACAD,QAAA,qBAAA,IAAAvM,EAAA,6BAAA,kBAKA3F,EAAAmH,UAAAoE,QAAA,OACA1K,KAAA,aACAqR,QAAA,OAAAtL,EAAA,qDA3BA5G,EAAAmH,UAAAoE,QAAA,OACA1K,KAAA,aACAqR,QAAA,kEA4CAnS,EAAA,0CACA,iBACA,WACA,cACA,aACA,SAAAE,EAAAD,EAAAiD,EAAAyC,GACAzF,EAAA,mBAAAkL,MAAA,SAAAb,GAyBA,OAxBAA,EAAAI,iBACA5I,cACAmB,EAAAmB,eACAtC,aAAAiB,QAAA,mBAAAuU,QAAA7K,WAAAzB,WACAlJ,aAAAiB,QAAA,aAAAuU,QAAAnP,KAAA6C,WACAlJ,aAAAiB,QAAA,YAAAuU,QAAA1H,IAAA5E,WAEAlJ,aAAAiB,QAAA,mBAAAf,KAAA6Q,WACApG,WAAAzM,EAAAoH,OAAAoI,MAAA/C,WAAAsL,UAAAlS,GACAsC,KAAAnI,EAAAoH,OAAAoI,MAAArH,KAAA4P,UAAAlS,GACA+J,IAAA5P,EAAAoH,OAAAoI,MAAAI,IAAAmI,UAAAlS,MAGA7F,EAAAmH,UAAAoE,QAAA,OACA1K,KAAA,eACAqR,QAAA,sCACAC,SAAA,OAGAnS,EAAAmH,UAAAoE,QAAA,OACA1K,KAAA,QACAqR,QAAA,wEAGA,IAOAjS,EAAA,cAAA0G,GAAA,0BAAA,SAAA2D,GAEA,OADAA,EAAAK,4BACA,IAGA1K,EAAA,aAAAkL,MAAA,WACAlI,EAAAqC,QACArF,EAAA2C,MAAAoH,YAAA,UAMA/J,EAAA,YAAAkL,MAAA,SAAAb,GAQA,IAPAA,EAAAI,iBAKAzK,EAAA2C,KAAA+R,MAAAjE,SAEAtF,EAAA,EAAAA,EAAA2H,MAAAmC,eAAA5N,OAAA8D,IACAuF,IAAAoC,MAAAmC,eAAAvE,IAAAvF,GACA,IAAAuF,IAAA1G,QAAA,mBACA8I,MAAAmC,eAAA/S,WAAAwO,OAKA1Q,EAAA,YAAAkL,MAAA,SAAAb,EAAAJ,GAaA,MAZA,WAAAtH,KAAAiD,GACA5C,EAAAsB,iBACA,YAAA3B,KAAAiD,IACA5C,EAAAsB,iBACAtE,EAAA2C,MAAA6H,QAAA,SAAAlB,YAAA,SAEAtG,EAAAP,KAAAwH,GAGA8B,WAEAhM,EAAAoH,OAAA4Q,WACA,IAGA,IAAAC,EAAAhY,EAAA,oBAAA0G,GAAA,QAAA,SAAA2D,GACAA,EAAAI,iBACA1K,EAAAiO,cAAA,EACAjO,EAAAmH,UAAAoE,QAAA,YACA5E,GAAA,UAAA,WACA,OAAA,IA0BA,GAvBA3G,EAAAmH,UAAAR,GAAA,SAAA,WACAsR,EAAA/N,KAAA,YACAjH,EAAAiB,OACA+T,EAAA1O,YAAA,iBAAAE,SAAA,aACAwO,EAAA9P,KAAA,4DACA8P,EAAA/N,KAAA,UAAA,MAOAlK,EAAAmH,UAAAR,GAAA,QAAA,WACAsR,EAAA1O,YAAA,aAAAE,SAAA,iBAAAS,KAAA,UAAA,GACA+N,EAAA9P,KAAA,6DASAlI,EAAA,2BAAAqH,OAAA,CACA,IAAA8M,EAAAnU,EAAA,uCAAA0G,GAAA,SAAA,WACA2N,qBAEArU,EAAA,cAAAmN,KAAA,OAAA,WACAgH,EAAA1L,KAAA,WAAA,GACA1I,EAAAoH,OAAAC,aAAAiG,QAAA,SAAAtH,GACAoO,EAAA/K,OAAA,gBAAArD,EAAAH,GAAA,MAAAwH,KAAA,WAAA,GAAAjD,aAOA,IAAAuB,GAAA,EAEAuM,GAAA,EAoBA,SAAAjM,IAEA,GADAiM,GAAA,EACAvM,EAAA,CACAwM,EAAA1N,QAAA,SAAAlB,YAAA,QAAAgC,QAAA,SAEAI,GAAA,GACA,EACA,IAAAyM,EAAApY,EAAAoH,OAAAiR,QACAD,IAAApY,EAAAqI,SACA+P,EAAAE,QACAF,EAAArN,QACAqN,EAAArN,OAAAuN,UAMA,IAAAH,EAAAlY,EAAA,kCAAAsY,UAAA,SAAA/W,GAUA,OATAgX,EAAAjP,YAAA,SACAoC,GAAAA,IAAA/I,MACAqJ,IAEAN,IACAuM,GAAA,EAzCA,SAAAvX,EAAA8X,GACA,IAAAC,EACA,IAAA/M,EAAA,CACA+M,EAAAzY,EAAAU,GAAA8J,QAAA,SAAAhB,SAAA,QAAA8B,QAAA,QAEAtI,EAAAuB,SAAA7D,EAAAgU,KAAAgE,UAAA,IACA,IAAAC,EAAAF,EAAApQ,KAAA,uBAEAsQ,EAAAtR,SAAAtH,EAAAqI,SACAuQ,EAAAN,QACArQ,WAAA,WACA2Q,EAAA,GAAAC,UACA,IAEAlN,EAAAhL,GA4BA+N,CAAA9L,OAEApB,EAAAkJ,kBACA,IACAoO,QAAA,WACA,GAAAZ,EAAA,OAAA,IACA/M,MAAA,WAKA,OAJA+M,IACAjV,EAAAwB,UAAA7B,KAAA+R,KAAAgE,UAAA,IACA1M,KAEAiM,GACAjY,EAAA2C,KAAA+R,MAAAjM,KAAA,WAAA,GACAwP,GAAA,EACAlY,EAAAqI,SAGA6P,GAAA,EAEAjY,EAAA2C,KAAA+R,MAAAjM,KAAA,YAAA,IACA,KAGAzI,EAAA,eAAAkL,MAAA,WACAQ,GAAA,IAGA,IAAAoN,GAAA,EACA/R,MAAAoG,KAAA,YAAA,SAAA9C,GACAqB,GACA1L,EAAAqK,EAAA+B,QAAA5B,QAAA,SAAAnD,SACAyR,GAAA,KAGA3L,KAAA,gBAAA,SAAA9C,GACA,GAAAqB,IAAAoN,IACA9Y,EAAAqK,EAAA+B,QAAA5B,QAAA,SAAAnD,OAEA,OADA2E,KACA,EAGA8M,GAAA,IAGA,IAAAC,GAAA,EACAR,EAAAvY,EAAA,0CAAA6Y,QAAA,SAAAtX,GACA,UAAAA,EAAA6K,OAAAqI,WAIAzM,WAAAgE,EAAA,GACAhJ,EAAAyB,WAAA9B,KAAA4R,aAAA,eAAA5R,KAAA+R,KAAAgE,UAAA,IAAA/V,KAAAiN,MACAmJ,IACApW,KAAAqW,WAAApX,OAAAgC,SAAAoV,UACA,IAAAhZ,EAAA2C,MAAAsW,eAAA,WACArX,OAAAgC,SAAAjB,KAAAiN,MAGAjN,KAAA4R,aAAA,UACA3S,OAAAa,KAAAE,KAAAiN,MAEAhO,OAAAgC,SAAAjB,KAAAiN,MAIAmJ,GAAA,KACAG,UAAA,WACAX,EAAAjP,YAAA,SACAtJ,EAAA2C,MAAA6G,SAAA,WACA8O,UAAA,SAAA/W,GACA,UAAAA,EAAA6K,OAAAqI,WAGAsE,GAAA,KAGA/Y,EAAA,aAAAkL,MAAA,SAAA3J,GACAyG,WAAA,WACAjI,EAAAoH,OAAAoI,MAAAhD,KAAAN,QACA,KAGAjM,EAAA,oCAAAkL,MAAA,SAAAb,EAAAJ,GAOA,OANAjH,EAAAmD,IAAA8D,GACAoN,QAAApP,QAAAzC,QACA6R,QAAApP,QAAAkR,QAAA,GAEAC,mBAAA,IAEA,IAGApZ,EAAA,eAAAkL,MAAA,WAGA,OAFAlI,EAAAqD,aACAgR,QAAApP,QAAAkR,QAAA,IACA,IAGAnZ,EAAA,iBAAAkL,MAAA,WAEA,OADAmO,UAAAC,SACA,IAGAtZ,EAAA,aAAAkL,MAAA,WAMA,OALAnE,MAAAgD,YAAA,gBACA4B,oBAAA5E,MAAAsF,GAAA,iBACAV,qBAGA,IAGA3L,EAAA,qBAAA0G,GAAA3G,EAAAqI,OAAA,aAAA,QAAA,WAOA,OANArB,MAAAgD,YAAA,YACA8B,eAAA9E,MAAAsF,GAAA,aACAR,gBAAA9L,EAAAqI,QAEApI,EAAA,iBAAAkL,QAEAW,iBAIA7L,EAAA,aAAAkL,MAAA,WAMA,OALAnE,MAAAgD,YAAA,WACA6B,eAAA7E,MAAAsF,GAAA,YACAT,gBAGA,IAGA5L,EAAA,oCAAAuZ,SAAA,WACAxZ,EAAAoH,OAAA0D,WAAA,SAAA9E,GACA,IAAAyT,GAAAzT,EAAA+E,OAAA2O,UAAA,eACA1T,EAAA+E,OAAA4O,UAAA,cAAAF,GACAzZ,EAAAS,SAAAsK,OAAA0O,YAAAA,MAIAxZ,EAAA,eAAAkL,MAAA,SAAAb,GAEA,IAAAc,EAAAuF,EAIA,IALArG,EAAAI,iBAEAzH,EAAAoB,YAEArE,EAAAoH,OAAAiP,YAAA,aACAjL,EAAA,EAAAA,EAAA2H,MAAAmC,eAAA5N,OAAA8D,IAEA,KADAuF,EAAAoC,MAAAmC,eAAAvE,IAAAvF,IACAnB,QAAA,mBACA8I,MAAAmC,eAAA/S,WAAAwO,GAKAoC,MAAAmC,eAAA/S,WAAA,YAEAnC,EAAAoH,OAAAoQ,YAAA,EAGAxX,EAAAoH,OAAAwS,UAGA3R,WAAA,WACA,IAAAjI,EAAAoH,OAAAC,aAAAC,SACAtH,EAAAoH,OAAAoI,MAAArH,KAAA+C,OACAlL,EAAAoH,OAAAoI,MAAAhD,KAAAtB,QAEArJ,OAAAgC,SAAA7D,EAAA8H,MACA,KAGA,IAAA+R,EAAA5Z,EAAA,uCACA6Z,EAAA7Z,EAAA,sCAEA8Z,EAAA9Z,EAAA,+BAAAkL,MAAA,SAAAb,GACAA,EAAAI,iBAEA,IAAAsP,EAAA/Z,EAAA2C,MAAAsH,KAAA,OAEAjK,EAAA2H,MACArF,IAAAvC,EAAAgN,QAAAC,cAAA,IAAA,IAAA+M,EACAnZ,KAAA,OACAsE,QAAA,SAAA+E,GAEAlK,EAAAmH,UAAAoE,QAAA,OACA1K,KAAA,eACAqR,QAAA,mBAAA8H,EACA7H,SAAA,MAGA4H,EAAAnK,IAAA,UAAA,QAEA,WAAAoK,EACAH,EAAAjK,IAAA,UAAA,SAEAkK,EAAAlK,IAAA,UAAA,cAOA3P,EAAA,cAAAwK,QAAA,SAAA2C,KAAA,QAAA,WACAnN,EAAA2C,MAAA0F,KAAA,kBAAA8G,QAAAlD,OACAjM,EAAA,UAAAsJ,YAAA,YAGAtJ,EAAA,aAAAkL,MAAA,SAAA3J,GAEA,OADAvB,EAAA,UAAAwJ,SAAA,UAAAnB,KAAA,qBAAAgQ,SACA,IAGAtY,EAAAS,SAAAwZ,eAAA7U,IAAApF,EAAAS,SAAAwZ,WAAAja,EAAAS,SAAAwZ,WAGAja,EAAA2D,OAAAoP,MAAAmC,eAAAnT,QAAA,mBACA/B,EAAAmH,UAAAoE,QAAA,OACA2G,QAAA,4FACArR,KAAA,UAEAkS,MAAAmC,eAAA/S,WAAA,iBACAnC,EAAAS,SAAAwZ,WAAA,GAGAha,EAAA,aAAAmK,OAAA,WACApK,EAAAS,SAAAwZ,UAAArX,KAAAiL,QACA5K,EAAAsC,aAAAvF,EAAAS,SAAAwZ,WACA3C,QAAA9K,KAAA4M,WACA1Q,KAAA,UAAA1I,EAAAS,SAAAwZ,YAEAja,EAAA2D,OAAA3D,EAAAS,SAAAyZ,YACAlT,MAAAyC,SAAA,cAGA,IAAA0Q,GAAA,EACAla,EAAA,6BAAAqY,MAAA,WACA1V,KAAAiW,SACAsB,GAAA,IACArB,QAAA,WACA,GAAAqB,EAEA,OADAA,GAAA,GACA,IAIAtY,OAAAgC,SAAA8Q,MACA1U,EAAA,YAAA4B,OAAAgC,SAAA8Q,KAAA,MAAA4D,YAGA,IAAA1C,GAAA,IAAAvF,UAAAC,UAAAtG,QAAA,SACAmQ,GACAC,KAAA,IACAtE,MAAA,IACAuE,IAAA,KAGAra,EAAA,YAAAqI,KAAA,oBAAAa,KAAA,WACA,IAAAU,EAAA5J,EAAA2C,MACAsH,EAAAL,EAAAK,OAEAyG,EAAAzG,EAAAqQ,SACA1E,IACAlF,EAAAA,EAAAtF,QAAA,QAAA+O,EAAAC,MAAAhP,QAAA,QAAA+O,EAAArE,OAAA1K,QAAA,MAAA+O,EAAAE,KAAAjP,QAAA,MAAA,IAAAmP,eAGA3Q,EAAAtB,OAAA,6BAAAoI,EAAA,aAGA,WAEA,IAAA+C,GACArT,KAAA,eACAyT,KAAA,gCACA2G,YAAA,kBAGAC,EAAA,mEAEAza,EAAA,YAAAkL,MAAA,WAIA,IAAAJ,EAAA/K,EAAAoH,OAAAoI,MAAArH,KACAwS,EAAA5P,EAAAA,OACA5C,EAAA4C,EAAAC,UAEAD,EAAAtF,SACAsF,EAAAG,OAGAwI,EAAAI,KAAA8G,KAAAzS,KAEAA,EADAuL,EAAArT,KAAAua,KAAAzS,GACAA,EAAAkD,QAAAqI,EAAArT,KAAA,YAAAqa,GAGAA,EAAAvS,GAIA4C,EAAA8P,QAAA1S,GAIA,IAAA2S,EAAAH,EAAAI,gBAAArH,EAAAI,MACAgH,EAAAE,WAEA,IAAAC,EAAAN,EAAAI,gBAAArH,EAAA+G,aACAQ,EAAAD,WAEA,IAAA1W,GAAA4W,KAAAJ,EAAAK,IAAA7W,KAAA4W,KAAAE,GAAAN,EAAAK,IAAA7W,KAAA8W,GAAA,qCAAA9T,QACA+T,GAAAH,KAAAD,EAAAE,IAAAE,GAAAH,KAAAE,GAAAH,EAAAE,IAAAE,GAAAD,GAAA,GAEAT,EAAAW,UAAAhX,GACAqW,EAAAY,aAAAjX,EAAA+W,GACAV,EAAAhU,GAAA,iBAAA,WACAgU,EAAAhU,GAAA,iBAAA,MACA6U,EAAAjC,UAGA,IAAAiC,EAAAb,EAAAc,SAAAnX,EAAA+W,GAAAlM,UAAA,cAIA,OAFAwL,EAAArC,SAEA,IAGArY,EAAA,uBAAA0G,GAAA,QAAA,SAAA2D,GACAA,EAAAI,iBACAzH,EAAAoD,gBAEApG,EAAA2H,MACA/G,KAAA,OACA0B,IAAAK,KAAAiN,KACA3F,MAAA3H,IAAAvC,EAAAgN,QAAAC,cAAA,KACA9H,QAAA,WACAnF,EAAAmH,UAAAoE,QAAA,OACA1K,KAAA,eACAqR,QAAA,0EAAAlS,EAAA6O,UAAA,KAAA7O,EAAA6O,UAAA,UAGA9G,MAAA,SAAA2T,GACA1b,EAAAmH,UAAAoE,QAAA,OACA1K,KAAA,QACAqR,QAAA,2GAAA9B,cAAA,0BAMApQ,EAAAmH,UAAAR,GAAA,QAAA,kBAAA,WACA3G,EAAA6G,MAAA7G,EAAAwG,MAAAmR,SAAA7Q,OAAA9G,EAAA6G,KAAAC,KACA6U,QAAA,0DACA1Y,EAAA2Y,YACA3b,EAAA2H,MACA/G,KAAA,OACA0B,IAAAvC,EAAAgN,SAAA,cACA7H,QAAA,WACAnF,EAAAwG,MAAA4P,SAAA,EACApW,EAAAmH,UAAAoE,QAAA,OACA1K,KAAA,QACAqR,QAAA,kHAGAnK,MAAA,SAAA2T,GACA,MAAAA,EAAA7Y,QACA7C,EAAAmH,UAAAoE,QAAA,OACA2G,QAAA,kDACAC,SAAA,UAQAnS,EAAAmH,UAAAoE,QAAA,OACA1K,KAAA,QACAqR,QAAA,yJAKAjS,EAAA,eAAA0G,GAAA,QAAA,SAAAnF,GACAA,EAAAkJ,iBACAiR,QAAA,sBACA1Y,EAAA,SACAhD,EAAA2H,MACA/G,KAAA,OACA0B,IAAAvC,EAAAgN,QAAAC,cAAA,IAAA,UACA/C,MAAAuD,SAAAzN,EAAAwG,MAAAiH,UACAtI,QAAA,WACAnF,EAAAwG,MAAA4P,SAAA,EACApW,EAAAmH,UAAAoE,QAAA,OACA1K,KAAA,QACAqR,QAAA,sGAGAnK,MAAA,SAAA2T,GACA,MAAAA,EAAA7Y,QACA7C,EAAAmH,UAAAoE,QAAA,OACA2G,QAAA,kDACAC,SAAA,YASAlS,EAAA,gBAAA0G,GAAA,QAAA,SAAAnF,GACAA,EAAAkJ,iBACAhF,MAGAzF,EAAA,kBAAA0G,GAAA,QAAA,SAAAnF,GACAA,EAAAkJ,iBACAhF,GAAA,KAGA,IAAAmW,EAAA5b,EAAA,0BAAA0G,GAAA,SAAA,SAAAnF,GACAA,EAAAkJ,iBAEA1K,EAAAS,SAAAsK,OAAA+Q,OAAAlZ,KAAAiL,QACA5K,EAAAO,gBAAAxD,EAAAS,SAAAsK,OAAA+Q,QACArb,SAAA2S,KAAA,WACAvR,OAAAgC,SAAAkY,aAIA/b,EAAAS,SAAAsK,OAAA+Q,QACAD,EAAAxO,KAAA,WAAA,GAGApN,EAAA,iBAAA0G,GAAA,iBAAA,WACA,IAAA6C,GAAAxJ,EAAAoH,OAAAC,eAAA,SAAA0O,QAQA,OAPA/V,EAAAS,SAAAsK,OAAA+Q,QAAA9b,EAAAqI,OACApI,EAAA,IAAAuJ,EAAA3D,IAAAyS,QACA9O,EACAA,EAAAuB,OAAAuN,QAEAtY,EAAAoH,OAAAoI,MAAArH,KAAA4C,OAAAuN,SAEA,IA/KA,KAqLAvY,EAAA,yCACA,iBACA,YACA,SAAAE,EAAAD,GAuSA6B,OAAAma,MAAAna,OAAAoa,UAAApa,OAAAqa,YAtSA,SAAAC,GACA,IAAAC,EAAA,KACApW,EAAA,KAEAqW,EAAA,WACA,SAAAC,IACA,OAAAC,KAAAC,MAAA,OAAA,EAAAD,KAAAE,WACAC,SAAA,IACA/D,UAAA,GAEA,OAAA,WACA,OAAA2D,IAAAA,KAPA,GAWA,SAAAK,EAAAC,GACA,IAAAC,EAAAzc,SAAAQ,cAAA,OACAic,EAAA1N,UAAA,eACA0N,EAAAjb,UAAA,kBACA,IAAAkb,EAAA,EAsBAC,EAAA,KACAC,EAAAZ,GAAApW,EAAAiX,YACA,GAAAjd,EAAAkd,WAIAC,EAAAnX,EAAA,iBAAA,OAJA,CACA,IAAAkV,EAAAkB,EAAAA,EAAAlB,KAAAlV,EAAAiX,YAAA/B,KACA6B,EAAA/W,EAAAoX,cAAAlC,EAAA2B,GAAAQ,aAAA,EAAAC,WAAA,IAKA,IAAAC,UACAC,gBAAA,uBACAC,eAAAb,EAAA9V,KAAAuE,QAAA,OAAA,KACAqS,OAAAd,GAEAe,WAAA,SAAAC,EAAA/a,GACA7C,EAAAkd,YACAW,sBAAA,YApCA,SAAAC,EAAAF,EAAA/a,GACA+a,EAAAd,EAAA,GACAA,EAAAc,GAEAd,GAAA,GACAe,sBAAA,WACAC,EAAAF,EAAA/a,MAIAga,GAAAC,EAAA,IAEAD,EAAAjb,UADAkb,EAAA,GACA,kBAGAA,EAAA,iBAsBAgB,CAAAF,EAAA/a,MAKAkb,QAAA,SAAAC,EAAAC,GACAnB,GAAA,EACA5U,QAAAH,MAAA,qBAAAkW,GACApB,EAAAjb,UAAAqc,GAAA,qBACApB,EAAAlb,MAAAuc,MAAA,MACAlY,EAAA,KACAoW,EAAA,KACAW,GACA9U,WAAA,WACA8U,EAAAxD,SACA,MAIA4E,cAAA,SAAA5b,GACAvC,EAAAkd,YAIAC,EAAAnX,EAAAoY,EAAAxB,EAAA/b,KAAAmF,EAAAzD,IACAtC,EAAAG,UAAAmL,QAAA,cAAAxG,QAAAiB,EAAAH,OAJAkX,EAAAxD,QACAvT,EAAAqY,aAAAD,EAAAxB,EAAA/b,KAAAmF,EAAAzD,GAAAya,IAKAhX,EAAA,KACAoW,EAAA,QAKA,SAAAe,EAAAxc,EAAA2d,EAAAzF,GACA,IAAA0F,EAAA5d,EAAA6d,eACApN,EAAAzQ,EAAA8d,aAEApS,EAAA1L,EACAe,EAAA2K,EAAA3K,MAGA2K,EAAA3K,MAAAA,EAAAiX,UAAA,EAAA4F,GAAAD,EAAA5c,EAAAiX,UAAAvH,GAGAzQ,EAAA6d,eAAA7d,EAAA8d,aAAAF,EAAA,EAEA1F,GACAlY,EAAA6d,gBAAA,EACA7d,EAAA8d,aAAA9d,EAAA8d,aAAAH,EAAAhX,QAEA3G,EAAA6d,eAAA7d,EAAA8d,aAAAF,EAAAD,EAAAhX,OAIA,SAAA8W,EAAAM,EAAA/D,EAAApY,GAEA,IAAAwV,EAAA/X,EAAAwG,MAAAiJ,WAAAkL,EAAA9U,IAEA,MAAA,SAAA8U,EAAA9U,GACA,IAAA6Y,EAAAzU,QAAA,UACA,aAAA8N,EACA,KAAAxV,EAAA,KAAAA,EAAA,IAGA,SAAAwV,EACA,YAAAxV,EAAA,KAGA,aAAAA,EAAA,KAGAA,EAGA,QAAAoY,EAAA9U,IACA,IAAA6Y,EAAAzU,QAAA,UACA,OAAA1H,EAAA,IAOAA,EAGA,IAAAoc,GAAA,EAYA,SAAAC,EAAAja,GACA,OAAA,IAAAka,QAAA,SAAAC,EAAAC,GACA,WAAApa,EAAAqa,KACAra,EAAAsa,YAAA,SAAAC,GACAJ,EAAAI,KAGAJ,EAAAna,EAAAwa,eAjBAhD,EAAAiD,WAAA,WAEA,OADAT,GAAA,GACA,GAGAxC,EAAAkD,UAAA,WAEA,OADAV,GAAA,GACA,GAeA1e,EAAA,iBAAA0G,GAAA,QAAA,SAAA2Y,GAEAtZ,EADA/F,EAAA2C,MAAA6H,QAAA,eAAAnD,OACArH,EAAA2C,MAAA6H,QAAA,eAAA,GAAA8U,WAEA3c,KAGA,IAAA0H,EAAAgV,EAAAE,cACAC,EAAAnV,EAAAoV,cAAAD,MAIA,GAAAA,GAAA,IAAAnV,EAAAoV,cAAAC,MAAA,GAAA1V,QAAA,SAAA,CAMA,IAFA,IACA2V,KACAxU,EAAA,EAAAA,EAAAqU,EAAAnY,OAAA8D,IACAwU,EAAA3Z,KAAA2Y,EAAAa,EAAArU,KAGAyT,QAAAlL,IAAAiM,GAAAC,KAAA,SAAA3V,GACAA,EAAAhE,KAAA,SAAA4Z,EAAAC,GACA,MAAA,iBAAAD,EAAA,GAAA,IADA,IAGAlD,EAAA1S,EAAA,GACA0S,EAAA9V,KAAAoD,EAAA,IAAAmS,IAAA,IAAAO,EAAA/b,KAAAwT,MAAA,KAAA,GAEAsI,EAAAC,KACAoD,MAAA,SAAAjY,GACAG,QAAA+X,IAAAlY,EAAAmY,SAIAZ,EAAA5U,oBAGAzK,EAAA,eAAA0G,GAAA,YAAA,SAAAnF,GACAmd,IAIA3Y,EAAApD,KAAA2c,WACAnD,EAAAxZ,KAAA2c,WAAAY,YAAAvc,IAAA0G,MAAA8V,EAAAC,KAAA/V,MAAAgW,IACA1d,KAAA2c,WAAAjE,UAAAc,MAGA,IAAAmE,GAAA,aAAA,eAAA,SAAA,MACAC,GAAA,MAAA,OAAA,OAAA,QACAC,GAAA,OAAA,WAAA,SAEAtE,EAAAuE,OAAA,SAAAlf,GACAmd,GAAA,EACAnd,EAAAkJ,iBAGA1E,EADA/F,EAAAuB,EAAA6K,QAAA5B,QAAA,eAAAnD,OACArH,EAAAuB,EAAA6K,QAAA5B,QAAA,eAAA,GAAA8U,WAEA/d,EAAA6K,OAGA,IAAAuQ,EAAApb,EAAAmf,aAAAjD,MAAA,GACAkD,EAAA,IAAA1E,WAEA,GAAA,IAAAU,EAAA/b,KAAAoJ,QAAA,SAwDA,OAlDA2W,EAAAje,OAAA,SAAA2H,GAEA,IAAAzJ,EAAA+b,EAAA/b,KAAA+b,EAAA/b,KAAA8O,cAAAtE,QAAA,wBAAA,IAAAuR,EAAA9V,KAAA6I,cAAAtE,QAAA,QAAA,IACAtG,EAAA,KACAiB,EAAAsR,QAAAvS,GAEA8b,GADAvW,EAAA+B,OAAAoH,OACA,MAUA,IARA,IAAA8M,EAAAtW,QAAApJ,GACAkE,EAAA,cACA,IAAAyb,EAAAvW,QAAApJ,GACAkE,EAAA,OACA,IAAA0b,EAAAxW,QAAApJ,KACAkE,EAAA,QAGA,OAAAA,EAEA,OAAA4X,EAAAC,GAGA5W,EAAAsR,QAAAvS,GACA8b,EAAA7a,EAAA+E,OAAA8V,SAEA7a,EAAA6U,QAAAvQ,EAAA+B,OAAAoH,QACAzN,EAAAkF,OAEA,IAEA,IAAA4V,EAAA,IAAAC,OAAA/gB,EAAA,OAAA,8BAGA8gB,EAAAE,YAAApE,GAEA5W,EAAAib,IAAA3Y,KAAA,YAAAC,OAAA,0DAGAuY,EAAAI,UAAA,SAAA5W,GACA,IAAA1G,EAAAid,EAAAM,UACAnb,EAAA6U,QAAAvQ,EAAAJ,KAAAmG,MACAwQ,EAAAM,UAAAvd,EACA0G,EAAAJ,KAAAmG,MAEA,MAAA7O,MAKAof,EAAAQ,WAAAxE,IAEA,EAtDAD,EAAAC,IA4DAyE,CAAAjhB,SAAAiQ,QAGAtQ,EAAA,oCACA,iBACA,qCACA,YACA,SAAAE,EAAAmH,EAAApH,GAEA,aAGA,IAAAshB,KAAA,oBAAA,IAAAhf,gBACA,oBAAAif,gBACA,IAAAD,EACA,OAAArhB,EAAA,WACAA,EAAA,mBAAA+H,WAIA,IAAAwZ,EAAA,SAAA3b,GACA,IAAA4b,EAAA7e,KACAyU,EAAA,GAaA,OAZAoK,EAAAnS,QACAtP,EAAA6G,MAAA7G,EAAA6G,KAAA6a,eACArK,EAAA,iBAAArX,EAAA6G,KAAA6a,cAEAzhB,EAAAoB,IAAA,gCAAAwE,EAAAwR,EAAA,SAAAnN,GACAA,IACAjK,EAAAkJ,KAAAe,EAAAwT,MAAA,SAAAiE,EAAAC,GACA,IAAArS,EAAAoS,EAAAtN,MAAA,KAAAwN,OAAA,GAAA1b,KAAA,IACAsb,EAAAnS,KAAAC,GAAAqS,EAAA1P,UAEAuP,EAAA5G,aAEAjY,MA+GA,OA5GA4e,EAAAM,UAAAjH,QAAA,WAEA5a,EAAAkJ,KADAvG,KACA0M,KAAA,SAAAC,EAAArF,GACA,IAAA6X,EAAA/hB,EAAAyP,WAAAuS,gBAAAzS,GACAlD,EAAA0V,EAAA1V,QAAA0V,EAAAlc,GACAG,EAAAoB,EAAAoI,MAAAnD,GACArG,IACAyJ,WAAAnO,IAAA+K,EAAA0V,EAAAlc,IACA7F,EAAAgU,cAAA,EACAhO,EAAA6U,QAAA3Q,GACAlK,EAAAgU,cAAA,MAQA/T,EAAA,oBAAAkL,MAAA,WACA,IAAAsW,GACAQ,QAAA,EACAvE,UAGAtW,GACAe,KAAAf,EAAAoI,MAAArH,KAAAiR,SACA3M,WAAArF,EAAAoI,MAAA/C,WAAA2M,SACAxJ,IAAAxI,EAAAoI,MAAAI,IAAAwJ,UA8EA,OA3EAyF,QAAAlL,IAAAvM,GAAAyY,KAAA,SAAAzY,GAEAnG,OAAAqR,KAAAlL,GAAAkG,QAAA,SAAAqD,GACA,IAAApB,EAAAE,WAAAkB,GAAAjB,WAAAD,WAAAkB,GAAAjB,WAAA,GAAAiB,EACAiM,GAAA,QAAA5c,EAAAwG,MAAA8I,MAAA,WAAAC,GAAApJ,KAAA,KACAiB,EAAAuJ,GAAArJ,SACAma,EAAA/D,MAAAd,IACA1K,QAAA9K,EAAAuJ,OAKA8Q,EAAA/D,MAAAjR,YAAAgV,EAAA/D,MAAA9N,YACA6R,EAAA/D,OAAA,QAAA1d,EAAAwG,MAAA8I,MAAA,WAAA,QAAAnJ,KAAA,MAGAnG,EAAAwG,MAAAiJ,aACArI,EAAA8a,OAAAliB,EAAAwG,MAAAiJ,WACAxO,OAAAqR,KAAAlL,EAAA8a,QAAA5U,QAAA,SAAAqD,GACAvJ,EAAA8a,OAAAvR,GAAA3Q,EAAAoH,OAAAA,OAAAuJ,GAAA3F,aAIA,IAAAmX,EAAAC,UAAAhb,GAEAqa,EAAA/D,MAAA,eACAxL,QAAAiQ,GAGA,IAAAE,KAEAriB,EAAAwG,MAAAuN,OACAsO,EAAApc,KAAAjG,EAAAwG,MAAAuN,OAGA/T,EAAAwG,MAAAwO,aACAqN,EAAApc,KAAAjG,EAAAwG,MAAAwO,aAGAqN,EAAApc,KAAA,aAAAjG,EAAAgN,UAEAyU,EAAAzM,YAAAqN,EAAAlc,KAAA,QAEA,IAAAkR,EAAA,GACArX,EAAA6G,MAAA7G,EAAA6G,KAAA6a,eACArK,EAAA,iBAAArX,EAAA6G,KAAA6a,cAGAzhB,EAAA2H,MACA/G,KAAA,OACA0B,IAAA,+BAAA8U,EACAnN,KAAAlI,KAAA6Q,UAAA4O,GACA5Z,SAAA,OACAya,aAAA,EACAnd,QAAA,SAAA+E,GACAlK,EAAAmH,UAAAoE,QAAA,OACA1K,KAAA,eACAqR,QAAA,0BAAAhI,EAAAqY,SAAA,4CAGAxa,MAAA,SAAA2T,EAAA7Y,EAAAkF,GACA/H,EAAAmH,UAAAoE,QAAA,OACA1K,KAAA,QACAqR,QAAA,0CAAAnK,IAEAG,QAAAsa,MAAA,QACAta,QAAA+X,IAAAwB,GACAvZ,QAAAua,SAAA,YAGA,SAAA1a,GACAG,QAAAH,MAAAA,EAAAmY,UAIA,IAGAsB,IAIAzhB,EAAA,uCACA,iBACA,YACA,SAAAE,EAAAD,GAkEA,OAAAA,EAAA0iB,QAjEA,SAAAC,GACA,aACA,IAAAnQ,EAAAmQ,GAAAviB,SAAAQ,cAAA,UACA,IAAA4R,EAAAoQ,WACA,OAAA,EAEA,IAAAC,EAAArQ,EAAAoQ,WAAA,MAEAE,EAAA,KAEAtQ,EAAAuQ,OAAAvQ,EAAAwQ,MAAA,GAEA,IAAAC,EAAA1G,KAAA2G,GAAA,IACAC,EAAA3Q,EAAAwQ,MACAI,EAAA5Q,EAAAuQ,OACAM,EAAA,EACAC,EAAA,EACAC,EAAA,EACAC,EAAA,EAAA,EAEAX,EAAAY,YAAA,iBACAZ,EAAAa,UAAA,IAEA,IAAAC,GAAA,EAiCA,OACAhB,QAAAnQ,EACA+L,MAlCA,SAAAqF,IACAd,EAAAjhB,OAAAgc,sBAAA+F,GAEAP,GAAAE,EAEA,IAAAhF,EAAA8E,EAAAG,EAAA,IACA,IAAApS,EAAAiS,EAAA,IACA,IAAAQ,EAAAzS,IAAAmN,EAEAsF,IACAF,GAAAA,EAGApF,GAAA,GAGAsE,EAAAiB,UAAA,UACAjB,EAAAY,YAAA,OACAZ,EAAAkB,SAAAZ,EAAA,EAAA,EAAAG,EAAAF,EAAA,EAAA,EAAAE,EAAA,EAAAA,EAAA,EAAAA,GACAT,EAAAmB,YACAnB,EAAAoB,IAAAd,EAAA,EAAA,GAAAC,EAAA,EAAA,GAAAE,EAAA/E,EAAA0E,EAAA7R,EAAA6R,EAAAU,GACAd,EAAAqB,SAEArB,EAAAY,YAAA,OACAZ,EAAAmB,YACAnB,EAAAoB,IAAAd,EAAA,EAAA,GAAAC,EAAA,EAAA,GAAAE,EAAAlS,EAAA6R,EAAA1E,EAAA0E,EAAAU,GACAd,EAAAqB,SAEArB,EAAAsB,aAOAlO,KAAA,WACApU,OAAAuiB,qBAAAtB,QAOA/iB,EAAA,wCACA,iBACA,WACA,eACA,SAAAE,EAAAD,EAAAiD,GACA,GAAA,gBAAAohB,OACA,OAAAC,IAIA,SAAAA,IAEA,aAGA,IAAAtkB,EAAA2D,MAAA,CAIA,IAAA4gB,EAAAtkB,EAAA,aACAukB,EAAAD,EAAAjc,KAAA,UACAmc,EAAAD,EAAAlc,KAAA,UAAA,GACA7B,EAAAic,QAAA+B,GACAC,EAAA1kB,EAAAoH,OAAAoI,MAAArH,KACAwc,EAAA,EACAC,EAAA,KAEAlR,GACArT,KAAA,eACAyT,KAAA,gDACAC,MAAA,0BAGA,IAAAwQ,EAAAjd,SAwFAid,EAAAjc,KAAA,eACAic,EAAAjc,KAAA,UAAA3B,GAAA,QAAA,WACAke,EAAA,SACA,IAAA1c,EAAAuc,EAAA1Z,UACAtJ,EAAAkB,KAAAlB,MACA+R,EAAAtL,EAAAkD,QAAAqI,EAAAK,MAAA,SAAAJ,EAAAmR,GACA,MAAA,UAAApjB,EAAA2J,QAAA,KAAA,QAAAA,QAAA,KAAA,QAAA,aAEAiI,EAAAG,GACAzT,EAAAwG,MAAAyO,gBAAAlB,MAAAnR,KAAAlB,UAGA6iB,EAAAjc,KAAA,gBAAA3B,GAAA,QAAA,WACAke,EAAA,QACA,IAAA1c,EAAAuc,EAAA1Z,UACAtJ,EAAAkB,KAAAlB,MACA+R,EAAAtL,EAAAkD,QAAAqI,EAAAI,KAAA,SAAAH,EAAAmR,GACA,OAAAA,EAAApjB,EAAA2J,QAAA,KAAA,YAEAiI,EAAAG,GACAzT,EAAAwG,MAAAyO,gBAAAD,YAAApS,KAAAlB,WAuHA,WA6BA,SAAAqjB,IAEA,IAAA9N,KACAsN,EAAAjc,KAAA,QAAAa,KAAA,WACAlJ,EAAA2C,MAAA0F,KAAA,yBAAA/G,MAAA0J,SACAgM,EAAAhX,EAAA2C,MAAA0F,KAAA,eAAA/G,OAAAtB,EAAA2C,MAAA0F,KAAA,cAAA/G,SAIAvB,EAAAwG,MAAAyO,gBAAAgC,QAAAA,GAAA,OArCAhX,EAAA,UAAA+kB,IAAAR,GAAA7d,GAAA,uBAAA,SAAAnF,GAKA,IAAAyjB,EAJAlZ,iBAAAA,gBACAC,WACAxK,EAAAkJ,iBACAzH,EAAAS,SAAA,QAAA,aAEA6gB,EAAAva,YAAA,SAAAmY,EAAA+C,GAGA,OAFAD,GAAA,IAAAC,EAAAjb,QAAA,QAAA,OAAA,QACA8B,gBAAA,SAAAkZ,EACA,SACA1Z,QAAA0Z,KAGAV,EAAA9O,IAAA,OAAA,WACA,IAAA0P,EAAAllB,EAAA,WAAAiK,KAAA,WAAA,IACAjK,EAAAmlB,QAAAplB,EAAAwC,OAAA,sBAAA,SAAA6iB,GACA,IAAAld,EAAA,GACAkd,EAAA/X,QAAA,SAAAgC,GACAnH,GAAA,kBAAAmH,EAAAA,KAAA,KAAAA,EAAAgP,OAAA,cAEAre,EAAA,WAAAkI,KAAAA,GAAA5G,IAAA4jB,GAAAxe,GAAA,SAAA,WACA3G,EAAAwG,MAAAyO,gBAAAkQ,WAAAviB,KAAAlB,cAGAiF,GAAA,QAAA,cAgBA,IAAA2e,EAAAf,EAAAjc,KAAA,YACAic,EAAA5d,GAAA,QAAA,kBAAA,SAAA2D,GACAA,EAAAI,iBACA,IAAA6a,EAAAD,EAAAhd,KAAA,aACAyc,IAEA,IAAAS,EAAAD,EAAAvhB,OAAA,GACAuhB,EAAAE,OAAAD,GACAD,EAAAjd,KAAA,SAAA/G,IAAA,IAAAmkB,GAAA,GAAApN,UAGAiM,EAAA5d,GAAA,QAAA,aAAA,WACAoe,EAAA9kB,EAAA2C,MAAA6H,QAAA,WAIAkb,GACAC,IACAze,UAAAiG,KAAA,QAAAwY,IAxRA,SAAAC,EAAAvb,EAAAwb,GACA,IAAA5b,EAAA4b,EAAA9jB,KAAAC,MAAA6jB,GAAA9jB,KAAAC,MAAAqI,EAAAJ,MAMA,GAJAA,EAAA6b,YAAA,GAAA,IAAApB,GACAJ,EAAA9a,SAAA,WAGAkb,IAAAza,EAAA6b,YAAA,CACA,IAAAC,EAAAxB,EAAAlc,KAAA,cAAAiB,YAAA,WAAApB,KAAA,MAAA+B,EAAA6b,YAAA,OAAApB,EAAA,OAAAza,EAAA6b,YAAA,QACAvT,EAAAmS,EAAAza,EAAA6b,YAAA,OAAA,KACA9d,WAAA,WACA+d,EAAAvc,SAAA+I,IACA,GAKA,KAFAmS,EAAAza,EAAA6b,cAGA9d,WAAA,WACAsc,EAAAhb,YAAA,YACA,KAKA,SAAA0c,EAAAhS,GACApS,OAAAqkB,aAAAjS,IAEA2Q,GACAA,EAAAuB,SAEAvB,EAAA,IAAAsB,YAAAlmB,EAAAgN,SAAA,mBAAAhN,EAAAwG,MAAAiH,WACArL,iBAAA,QAAApC,EAAAkW,SAAA2P,EAAA,OAIA,SAAAhB,EAAArR,GACAkR,EAAA3Z,OAAA,IACA5C,EAAAuc,EAAA1Z,UAOA,GALA,SAAAwI,IACAA,EAAA,2BAIA,IAAArL,EAAA8B,QAAA,IAAAuJ,GAAA,CACA,IAAA4S,EAWA,SAAAvlB,EAAA+F,GACA,IAAAmR,EAAA/X,EAAAwG,MAAAiJ,WAAAtH,KAIA,GAFAvB,EAAAA,EAAAyE,QAAA,KAAA,UAEA,UAAAxK,EACA,MAAA,SAAAkX,EACA,SAAAnR,EAAA,KAGA,UAAAA,EAAA,aAGA,GAAA,gBAAA/F,EACA,MAAA,SAAAkX,EACA,qCAAAnR,EAAA,OAGA,qCAAAA,EAAA,OAGA,OAAAA,EAhCAyf,CAAA,UAAA7S,EAAA,QAAA,cAAA,IAEArL,EADAuL,EAAArT,KAAAua,KAAAzS,GACAA,EAAAkD,QAAAqI,EAAArT,KAAA,YAAA+lB,GAGAA,EAAAje,EAEAuc,EAAA7J,QAAA1S,IAqDA,SAAAmL,EAAAG,GAEA,IAAAjN,EAAA,KACAsU,EAAA,KACAH,EAAA+J,EAAA3Z,OACAV,EAAAsQ,EAAA2L,oBACAtmB,EAAAoH,OAAAoI,MAAArH,KAAA1C,UACA4E,IACA7D,EAAAmU,EAAA4L,kBAEAzL,EAAAH,EAAAsC,aAGAyH,EAAA7J,QAAApH,GAGAzT,EAAAoH,OAAAoI,MAAArH,KAAA1C,UACAzF,EAAAqI,QAAAsS,EAAAW,UAAAR,GACAzQ,GACAsQ,EAAA6L,cAAAhgB,IAKA,SAAAof,EAAAtb,GACA,IAAAwJ,EAAA9T,EAAAwG,MAAAmR,aACA8O,KACAxS,GAAA,EA+CA,GA7CAH,EAAAhN,OACA0d,EAAAlc,KAAA,WAAAH,KAAA2L,EAAAhN,MACA0d,EAAAlc,KAAA,OAAAI,KAAA,MAAAoL,EAAA3C,QACAsV,EAAAxgB,KAAA6N,EAAAhN,QAGA9G,EAAAwG,MAAAiH,UAAAzN,EAAA6G,MAAAiN,EAAAhN,OAAA9G,EAAA6G,KAAAC,QACAmN,GAAA,EACAwS,EAAAxgB,KAAA,WAGAQ,GACAA,EAAAwP,OAGAjW,EAAAwG,MAAAkgB,YAAA,IAAAzS,GAEA,IAAAA,IACAuQ,EAAAlc,KAAA,QAAAH,KAAA,aACAse,EAAAxgB,KAAA,aACAQ,GACAA,EAAA8X,SALAiG,EAAAlc,KAAA,QAAAH,KAAAmC,EAAA,WAAAgB,WAAAwI,EAAA6S,eASA3mB,EAAAyN,UACAgZ,EAAAxgB,KAAA,QAGA6N,EAAA8S,KACAH,EAAAxgB,KAAA,OAGAue,EAAAlc,KAAA,eAAA1B,KAAAkN,EAAAkG,YAEA,YAAAlG,EAAAkG,WACAyM,EAAAxgB,KAAA,WACA,WAAA6N,EAAAkG,YACAyM,EAAAxgB,KAAA,UAGAjG,EAAAwG,MAAA8I,MACAiV,EAAA9a,SAAAgd,EAAAtgB,KAAA,MAAA+C,SAAAP,WAAA,UAGA3I,EAAAwG,MAAAkgB,UACA,GAAA7kB,OAAAqkB,aAAAjS,EAAA,CACAgS,EAAAhS,GAiBA,SAAAA,GACA,IAAA4S,EAAA,WAAAzmB,SAAA,SACA,iBAAAA,SAAA,eACA,cAAAA,SAAA,YACA,KAMA,GALA,oBAAAA,WACA,0BAAAA,UACA,uBAAAA,UAGA,CACA,IAAA0mB,EAAAD,EAAAxb,QAAA,UAAA,oBACAjL,SAAAgC,iBAAA0kB,EAAA,WACA1mB,SAAAymB,GACAjC,EAAAuB,QAEAF,EAAAhS,MAhCA8S,CAAA9S,GACA,IAAA1R,EAAAvC,EAAAgN,SACAhN,EAAAmH,UAAAR,GAAA,QAAA,WACA,IAAAqgB,EAAAnlB,OAAAgC,SAAA6Y,WACAna,IAAAykB,IACApC,EAAAuB,QACAF,EAAAhS,WAGA,IAAAjU,EAAAgU,cAAA,UAAAnS,OAAAgC,SAAAE,SAAA8d,OAAA,KACA5hB,EAAAgnB,UAAAjnB,EAAAwC,OAAA,gBAAAxC,EAAAyC,SACAzC,EAAAmH,UAAAR,GAAA,QAAA3G,EAAAkW,SAAA2P,EAAA,QAjOA5lB,EAAAgnB,UAAAjnB,EAAA,OAAA,4BAAAskB,KA2TAvkB,EAAA,wCACA,iBACA,YACA,SAAAE,EAAAD,GACA,aAUA,SAAAoT,IACA,IARAV,EAQAnQ,EAAAV,OAAAgC,SAAAgM,KAEAzP,SAAA8mB,OADA3kB,EACA,QAAAiO,mBAAAjO,GAAA,eAVAmQ,EAAA,IAAAC,MAGAwU,SAAAzU,EAAA,MACAA,EAAA0U,eAMA,WAGA,8BAeA,IACAzmB,EACA0mB,EAQArnB,GAAAA,EAAAgN,QACAhN,EAAAmH,UAAAR,GAAA,QAAAyM,GACAA,MAXAzS,EAAAP,SAAAknB,eAAA,QACAD,EAbA,SAAAvgB,GAGA,IAFA,IAAAygB,EAAAzgB,EAAA,IACA0gB,EAAApnB,SAAA8mB,OAAA7S,MAAA,KACAjJ,EAAA,EAAAA,EAAAoc,EAAAlgB,OAAA8D,IAAA,CAEA,IADA,IAAAoH,EAAAgV,EAAApc,GACA,KAAAoH,EAAAiV,OAAA,IAAAjV,EAAAA,EAAAmG,UAAA,EAAAnG,EAAAlL,QACA,GAAA,GAAAkL,EAAAvI,QAAAsd,GAAA,OAAA/U,EAAAmG,UAAA4O,EAAAjgB,OAAAkL,EAAAlL,QAEA,OAAA,KAKAogB,CAAA,QAEA/mB,GAAA,OAAA0mB,GAAA,YAAAA,IACA1mB,EAAAkP,KAAA8X,mBAAAN,OAYAtnB,EAAA,wCACA,iBACA,YACA,SAAAE,EAAAD,GACA,IAAA4nB,EAAA3nB,EAAA,cAAA0G,GAAA,QAAA,SAAA2D,GACAA,EAAAI,iBACA,IAAA2Q,EAAAwM,OAAA,+CACAxM,GAAAA,GAAA,IAAApQ,OAAA0E,eAEArI,QACArH,EAAA2H,MACArF,IAAAvC,EAAAgN,QAAAC,cAAA,IAAA,YACA4J,OAAA,OACA3M,MACAmR,GAAAA,EACAyM,MAAA9nB,EAAAwG,MAAA6Q,OAEAlS,QAAA,WACAtD,OAAAgC,SAAAkY,UAEAhU,MAAA,SAAAvG,GACA0G,QAAA+X,IAAAze,GACA,MAAAA,EAAAqB,OACAsH,MAAA,wDACA,MAAA3I,EAAAqB,OACAsH,MAAA,aAAAkR,EAAA,gCAEAlR,MAAA,+BAkBA,OAVA,WACAnK,EAAAiU,QACA2T,EAAA1c,OAEA0c,EAAA1b,UAQAnM,EAAA,6CACA,iBACA,6BACA,WACA,eACA,SAAAE,EAAA8S,EAAA/S,EAAAiD,GAEA,aAEA,GAAAhD,EAAA,aAAAqH,OAAA,MAIAlC,IAAApF,EAAAS,SAAAsnB,MACA/nB,EAAAS,SAAAsnB,aAEA3iB,IAAApF,EAAAS,SAAAsnB,IAAAC,WACAhoB,EAAAS,SAAAsnB,IAAAC,UAAA,EACAjV,EAAAjR,aAAAiB,QAAA,WAAAf,KAAA6Q,UAAA7S,EAAAS,YAGAuG,MAAAU,SAAA,cAAA,IAAA1H,EAAAS,SAAAsnB,IAAAC,WACAhoB,EAAAgH,MAAAyC,SAAA,kBACAzJ,EAAAgH,MAAAuC,YAAA,aAIAtG,EAAAsD,kBAAAvG,EAAAS,SAAAsnB,IAAAC,UAEA,IAgBAC,EAAA,SAAAzmB,GACAxB,EAAAgH,MAAAuC,YAAA,iBACA/H,EAAA+I,UACAvK,EAAAgH,MAAAyC,SAAA,kBAIAxJ,EAAA,kBAAA0G,GAAA,kFAAA,SAAAnF,GACAxB,EAAAmH,UAAAoE,QAAA,iBAGAtL,EAAA,kBAAAkL,MAAA,SAAAb,GACAA,EAAAI,iBACAud,EAAA3d,GA5BAtK,EAAAS,SAAAsnB,IAAAC,UAAA,EACAvnB,SAAA2S,OACApT,EAAAgH,MAAAyC,SAAA,kBACAzJ,EAAAgH,MAAAuC,YAAA,cA4BAtJ,EAAA,kBAAAkL,MAAA,SAAAb,GACAA,EAAAI,iBACAud,EAAA3d,GAxBAtK,EAAAS,SAAAsnB,IAAAC,UAAA,EACAvnB,SAAA2S,OACApT,EAAAgH,MAAAuC,YAAA,kBACAvJ,EAAAgH,MAAAyC,SAAA,cAkDAxJ,EAAA2H,MAEArF,IAAA,mBAAA,IAAAoQ,MAAA+J,WAAArI,MAAA,KAAAwN,MAAA,EAAA,GAAA1b,KAAA,KACA0B,SAAA,OACA3H,OAAA,EACAiF,QAAA,SAAA+E,GACA,IAAAge,EAAAhe,EAAAie,KAAA,GAGArgB,EAAA9H,EAAA8H,KAAAuD,QAAA,SAAA,QACApL,EAAA,qBAAAkI,KAAA,gBAAAL,EAAA,IAAAogB,EAAAE,KAAA,2CAAAF,EAAAnU,MAAA1I,QAAA,aAAA,IAAA,aAEA,IAAAsY,EAAA,KACA0E,EAAA,EACA,IACA1E,EAAA5Q,EAAAjR,aAAAC,QAAA,aAAA,KACA,MAAAP,IAEA,OAAAmiB,IAGA0E,GAFA1E,GAAA,GACAuE,EAAAI,UACApe,EAAAie,KAAAzQ,OAAA,SAAA6Q,EAAAC,GACA,OAAA7E,EAAA6E,EAAAF,UACAC,EAAA,EAEAA,GACA,GAEA,GAIAF,GACApoB,EAAA,WAAAyI,KAAA,OAAAZ,EAAA,IAAAoC,EAAAie,KAAAE,EAAA,GAAAD,MAAA1f,KAAA,aAAA2f,GAAA1hB,GAAA,QAAA,WAKA,IACAoM,EAAAjR,aAAA2mB,SAAAve,EAAAie,KAAAE,EAAA,GAAAC,UACA,MAAA9mB,OAIA,IAAAknB,EA9DA,SAAAC,GACA,IAAAC,EAAAxd,EAAA2E,EAAA4Y,EAAArhB,OAGA,KAAAyI,GAGA3E,EAAAmR,KAAAC,MAAAD,KAAAE,SAAA1M,KAGA6Y,EAAAD,EAAA5Y,GACA4Y,EAAA5Y,GAAA4Y,EAAAvd,GACAud,EAAAvd,GAAAwd,EAGA,OAAAD,EA+CAE,CAAA3e,EAAAwe,MAEAzoB,EAAA,qBAAAkI,KAAA,gBAAAL,EAAA,IAAA4gB,EAAA,GAAAN,KAAA,2CAAAM,EAAA,GAAA3U,MAAA,yBAAAjM,EAAA,IAAA4gB,EAAA,GAAAN,KAAA,2CAAAM,EAAA,GAAA3U,MAAA,gBAMA9T,EAAA,aAAAqI,KAAA,kBAAAiQ,UAAA,WACAtV,EAAAyD,iBAAA9D,KAAAiN,WAIA9P,EAAA,2CACA,iBACA,YACA,SAAAE,EAAAD,GAEA,aACA,IAAA8oB,EAAA7oB,EAAA,YACA8oB,EAAA9oB,EAAA,iBACA+oB,KACAzX,EAAAtR,EAAA,eACAgpB,GAAA,EAiGA,SAAAC,EAAAC,EAAAC,GA3BA,IAAAxQ,EACAyQ,EAGAC,EAJA1Q,EA6BAuQ,EA5BAE,EAAA,mGAAAhV,MAAA,KAGAiV,EAAA,IAAAC,OAAA,IADA,gBACAlV,MAAA,KAAAlO,KAAA,KAAA,MAyBAgjB,GAvBAvQ,GAAA,IAEAvN,QAAA,gBAAA,IAEAA,QAAA,MAAA,KAAAA,QAAA,WAAA,IAEAsE,cAAA0E,MAAA,KAEAhL,OAAA,SAAAmgB,GACA,OAAA,IAAAH,EAAApf,QAAAuf,EAAAve,UACA5B,OAAA,SAAA7H,EAAA4J,EAAAqe,GAEA,OAAAA,EAAAC,YAAAloB,KAAA4J,IACA/B,OAAA,SAAAmgB,GAEA,OAAAA,EAAAliB,OAAA,IACAiN,IAAA,SAAAiV,GACA,OAAAA,EAAAve,OAAAI,QAAAie,EAAA,MACApjB,OAMA,IAAAyjB,EAAAP,EAAA7U,IAAA,SAAArK,GACA,IAAAyf,EAAAR,EAAA9f,OAAA,SAAAugB,GACA,OAAA,IAAA1f,EAAAuf,MAAAxf,QAAA2f,KACAtiB,OAEA,OACAzG,KAAAqJ,EAAArJ,KACAkT,MAAA7J,EAAA6J,MACAqU,KAAAle,EAAAke,KACAjlB,SAAA+G,EAAA/G,SACAwmB,QAAAA,KAEAtgB,OAAA,SAAAa,GACA,OAAAA,EAAAyf,QAAA,IACAzjB,KAAA,SAAA4Z,EAAAC,GACA,OAAAA,EAAA4J,QAAA7J,EAAA6J,UAGAb,EAAA3gB,KAAAwhB,EAAApV,IAAA,SAAAd,GACA,MAAA,4CAAAA,EAAA2U,KAAA,KAAA3U,EAAAM,OAAA,SAAAN,EAAA5S,KAAA,UAAA,IAAA,SACAsF,KAAA,OAEA2iB,EAAA5d,OACA,IAAAzE,EAAA,GACA,IAAAkjB,EAAAriB,SACAb,EAAA,KAEAsiB,EAAA5gB,KAAAwhB,EAAAriB,OAAA,UAAAb,GA7HA8K,EAAA5K,GAAA,QAAAuP,SAAA,WACA,IAAA8S,EAAA1hB,OACArH,EAAA2H,MACArF,IAAA,sBAAA,IAAAoQ,MAAA+J,WAAArI,MAAA,KAAAwN,MAAA,EAAA,GAAA1b,KAAA,KACA0B,SAAA,OACA3H,OAAA,EACAiF,QAAA,SAAA+E,GACA8e,EAAA9e,EACAgf,EAAAtmB,KAAAlB,MAAAsnB,IACA5b,KAAAxK,QAGAsmB,EAAAtmB,KAAAlB,MAAAsnB,GAEAC,GAAA,GACA,MAUAH,EAAAniB,GAAA,YAAA,YACA,IAAAsiB,IACAH,EAAAe,WAAA7hB,OAAA,aACAihB,GAAA,KAIA1X,EAAA5K,GAAA,UAAA,SAAA2D,GACA,IAAAqG,EAAArG,EAAA8B,MACA,GAAA,KAAAuE,GAAA,KAAAA,EAAA,CACArG,EAAAI,iBACA,IAAAof,EAAA,EACA,KAAAnZ,IACAmZ,GAAA,GAGAb,GAAAa,EAEA,IAAAD,EAAAf,EAAAe,WAEAviB,EAAAuiB,EAAAviB,OACAuiB,EAAAtgB,YAAA,SAEA0f,EAAA,EACAA,EAAA3hB,EAAA,EACA2hB,EAAA3hB,EAAA,IACA2hB,EAAA,GAGAY,EAAAnE,GAAAuD,GAAAxf,SAAA,cACA,GAAA,KAAAkH,EAAA,CACA,IAAApO,EAAAumB,EAAAxgB,KAAA,UAAA,GACA/F,GACAV,OAAAa,KAAAH,EAAAsN,WAyEA9P,EAAA,mCACA,iBACA,yCACA,WACA,SACA,eACA,SAAAE,EAAAsf,EAAAvf,EAAAwhB,EAAAve,GA6BA,GA3BA,WAAA2X,KAAA/Y,OAAAgC,SAAAE,YACAlC,OAAAyV,QAAAA,QACA1R,SAAA,WACA/D,OAAA4f,KAAA,IAAAD,EAAA3f,OAAAgC,SAAAE,SAAAsH,QAAA,eAAA,QAGAiM,QAAAyS,MACAnkB,WAEA5F,EAAAmH,UAAAR,GAAA,aAAAf,WAKA5F,EAAAqI,SACAjI,SAAAiQ,KAAA2Z,SAAAnoB,OAAAmoB,SAAA,WAIA,OAHA,IAAA5pB,SAAAiQ,KAAA8Q,WACAtf,OAAAooB,SAAA,EAAA,IAEA,IAIApoB,OAAA0d,WAAAA,EAIAA,EAAA2K,QAAA3K,EAAA2K,OAAA,QAAA,CACA,IAAApU,EAAA,QAAA7V,EAAAkqB,QAAAC,SAAA,MAAA,cACA7K,EAAA2K,OAAA,QAAApU,EAAA,aACAyJ,EAAA2K,OAAA,QAAApU,EAAA,aACAyJ,EAAA2K,OAAA,QAAApU,EAAA,aACAyJ,EAAA2K,OAAA,QAAApU,EAAA,aACAyJ,EAAA2K,OAAA,QAAApU,EAAA,MASA9V,EAAA2D,OACAV,EAAAU,UAIA5D,EAAA,6BACA,sBACA,UACA,gBACA,qBACA,oBACA,iCACA,eACA,iBACA,iBACA,oBACA,iBACA,gBACA,gBACA,gBACA,sBACA,qBACA,gBACA,mBACA,oBACA,oBACA,mBACA,oBACA,yBACA,uBACA,gBAEA,SAAAsqB,EAAArqB,GACA,OAAAA,IAEAD,EAAA,wBAAA,6BAAA,SAAAuqB,GAAA,OAAAA","file":"../skylark-jsbin-client.js","sourcesContent":["define('skylark-jsbin-client/jsbin',[\r\n  \"skylark-jsbin-base\"\r\n],function(jsbin){\r\n  return jsbin;\r\n});\r\n\r\n\ndefine('skylark-jsbin-client/chrome/font',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n  /** =========================================================================\r\n   * font\r\n   * Reads user setting and configures the CodeMirror font size\r\n   * ========================================================================== */\r\n  /*global jsbin:true*/\r\n  var font = (function (document) {\r\n    var head = document.getElementsByTagName('head')[0],\r\n        selectors = '#output li, #exec, .fakeInput, .fakeInput:before, #exec:before, #bin .editbox .CodeMirror, .mobile .editbox textarea',\r\n        size = jsbin.settings.font || 14;\r\n\r\n    // via http://stackoverflow.com/questions/2041495/create-dynamic-inline-stylesheet\r\n    function font(size) {\r\n      var cssText = selectors + '{ font-size: ' + size + 'px; }',\r\n          el = document.createElement('style');\r\n\r\n      el.type = 'text/css';\r\n      if (el.styleSheet) {\r\n        el.styleSheet.cssText = cssText;//IE only\r\n      } else {\r\n        el.appendChild(document.createTextNode(cssText));\r\n      }\r\n      head.appendChild(el);\r\n    }\r\n\r\n    if (Object.defineProperty && jsbin.settings) {\r\n      try {\r\n        Object.defineProperty(jsbin.settings, 'font', {\r\n          configurable: true,\r\n          enumerable: true,\r\n          get: function () {\r\n            return size;\r\n          },\r\n          set: function (val) {\r\n            size = val * 1;\r\n            font(size);\r\n          }\r\n        });\r\n      } catch (e) {\r\n        // IE8 seems to attempt the code above, but it totally fails\r\n      }\r\n    }\r\n\r\n    font(size);\r\n\r\n    return font;\r\n  })(document);\r\n\r\n  var md5 = 'a3a02e450f1f79f4c3482279d113b07e';\r\n  var key = 'fonts';\r\n  var cache;\r\n\r\n  function insertFont(value) {\r\n    var style = document.createElement('style');\r\n    style.innerHTML = value;\r\n    document.head.appendChild(style);\r\n  }\r\n\r\n  try {\r\n    cache = window.localStorage.getItem(key);\r\n    if (cache) {\r\n      cache = JSON.parse(cache);\r\n      if (cache.md5 === md5) {\r\n        insertFont(cache.value);\r\n      } else {\r\n        // busting cache when md5 doesn't match\r\n        window.localStorage.removeItem(key);\r\n        cache = null;\r\n      }\r\n    }\r\n  } catch (e) {\r\n    // most likely LocalStorage disabled\r\n    return;\r\n  }\r\n\r\n  if (!cache) {\r\n    // fonts not in LocalStorage or md5 did not match\r\n    window.addEventListener('load', function () {\r\n      var request = new XMLHttpRequest();\r\n      var response;\r\n      var url = jsbin.static + '/css/fonts.a3a02e450f1f79f4c3482279d113b07e.woff.json?' + jsbin.version;\r\n      request.open('GET', url, true);\r\n      request.onload = function () {\r\n        if (this.status == 200) {\r\n          try {\r\n            response = JSON.parse(this.response);\r\n            insertFont(response.value);\r\n            window.localStorage.setItem(key, this.response);\r\n          } catch (e) {\r\n            // localStorage is probably full\r\n          }\r\n        }\r\n      };\r\n      request.send();\r\n    });\r\n  }\r\n\r\n  return jsbin.font = font;\r\n});\ndefine('skylark-jsbin-client/chrome/analytics',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n  var analytics =  {\r\n    track: function (category, action, label) { // , value\r\n      window.ga && ga('send', 'event', category, action, label);\r\n    },\r\n    experiment: function (type) {\r\n      analytics.track('experiment', type);\r\n    },\r\n    universalEditor: function (value) {\r\n      analytics.track('menu', 'universalEditor', value);\r\n    },\r\n    library: function (action, value) {\r\n      analytics.track('menu', action, 'library', value);\r\n    },\r\n    infocard: function (action, value) {\r\n      analytics.track('infocard', action, value);\r\n    },\r\n    embed: function () {\r\n      try {\r\n        analytics.track('state', 'embed', window.top.location);\r\n      } catch (e) {\r\n        analytics.track('state', 'embed');\r\n      }\r\n    },\r\n    milestone: function () {\r\n      analytics.track('bin', 'save', window.location.pathname);\r\n    },\r\n    clone: function () {\r\n      analytics.track('bin', 'clone', window.location.pathname);\r\n    },\r\n    'delete': function () {\r\n      analytics.track('bin', 'delete', window.location.pathname);\r\n    },\r\n    lock: function () {\r\n      analytics.track('bin', 'lock', window.location.pathname);\r\n    },\r\n    openShare: function () {\r\n      analytics.track('menu', 'open', 'share');\r\n    },\r\n    saveTemplate: function () {\r\n      analytics.track('menu', 'select', 'save-template');\r\n    },\r\n    createNew: function (from) {\r\n      analytics.track(from || 'menu', 'select', 'new');\r\n    },\r\n    open: function (from) {\r\n      analytics.track(from || 'menu', 'select', 'open');\r\n    },\r\n    openFromAvatar: function () {\r\n      analytics.track('menu', 'select', 'open via avatar');\r\n    },\r\n    openMenu: function (label) {\r\n      analytics.track('menu', 'open', label);\r\n    },\r\n    closeMenu: function (label) {\r\n      analytics.track('menu', 'close', label);\r\n    },\r\n    selectMenu: function (item) {\r\n      if (item) {\r\n        analytics.track('menu', 'select', item);\r\n      }\r\n    },\r\n    share: function (action, label) {\r\n      analytics.track('share', action, label);\r\n    },\r\n    download: function (from) {\r\n      analytics.track(from || 'menu', 'select', 'download');\r\n    },\r\n    showPanel: function (panelId) {\r\n      analytics.track('panel', 'show', panelId);\r\n    },\r\n    hidePanel: function (panelId) {\r\n      analytics.track('panel', 'hide', panelId);\r\n    },\r\n    logout: function () {\r\n      analytics.track('menu', 'select', 'logout');\r\n    },\r\n    register: function (success) {\r\n      if (success === undefined) {\r\n        analytics.track('menu', 'open', 'login');\r\n      } else {\r\n        analytics.track('user', 'register', ok ? 'success' : 'fail');\r\n      }\r\n    },\r\n    login: function (ok) {\r\n      if (ok === undefined) {\r\n        analytics.track('menu', 'open', 'login');\r\n      } else {\r\n        analytics.track('user', 'login', ok ? 'success' : 'fail');\r\n      }\r\n    },\r\n    enableLiveJS: function (ok) {\r\n      analytics.track('button', 'auto-run js', ok ? 'on' : 'off');\r\n    },\r\n    archiveView: function (visible) {\r\n      analytics.track('button', 'view archive', visible ? 'on' : 'off');\r\n    },\r\n    archive: function (url) {\r\n      analytics.track('button', 'archive', url);\r\n    },\r\n    unarchive: function (url) {\r\n      analytics.track('button', 'unarchive', url);\r\n    },\r\n    loadGist: function (id) {\r\n      analytics.track('state', 'load gist', id);\r\n    },\r\n    layout: function (panelsVisible) {\r\n      var layout = [], panel = '';\r\n\r\n      for (panel in panelsVisible) {\r\n        layout.push(panel.id);\r\n      }\r\n\r\n      analytics.track('layout', 'update', layout.sort().join(',') || 'none');\r\n    },\r\n    run: function (from) {\r\n      analytics.track(from || 'button', 'run with js');\r\n    },\r\n    publishVanity: function () {\r\n      analytics.track('bin', 'publish-vanity');\r\n    },\r\n    runconsole: function (from) {\r\n      analytics.track(from || 'button', 'run console');\r\n    },\r\n    welcomePanelState: function (state) {\r\n      var s = 'close';\r\n      if (state) {\r\n        s = 'open';\r\n      }\r\n      analytics.track('state', 'welcome-panel', s);\r\n    },\r\n    welcomePanelLink: function (url) {\r\n      analytics.track('welcome-panel-link', url);\r\n    }\r\n  };\r\n\r\n  // misses the asset upload one\r\n  $('a[data-pro=\"true\"]').on('click', function () {\r\n    analytics.track('try-pro', $(this).text());\r\n  });\r\n\r\n  return jsbin.analytics = analytics;\r\n});\ndefine('skylark-jsbin-client/chrome/settings',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n  /*global jsbin, $*/\r\n\r\n  var settings = {\r\n    save: function (callback) {\r\n      localStorage.setItem('settings', JSON.stringify(jsbin.settings));\r\n      if (!callback) {\r\n        callback = function () {};\r\n      }\r\n\r\n      $.ajax({\r\n        url: '/account/editor',\r\n        type: 'POST',\r\n        dataType: 'json',\r\n        data: {\r\n          settings: localStorage.settings,\r\n          _csrf: jsbin.state.token\r\n        },\r\n        success: function () {\r\n          if (console && console.log) {\r\n            console.log('settings saved');\r\n          }\r\n          callback(true);\r\n        },\r\n        error: function (xhr, status) {\r\n          callback(false);\r\n        }\r\n      });\r\n    }\r\n  };\r\n});\ndefine('skylark-jsbin-client/render/saved-history-preview',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n  /*global jsbin, $, $document, analytics*/\r\n  'use strict';\r\n  if (!jsbin.user || !jsbin.user.name || jsbin.embed) {\r\n    return;\r\n  }\r\n\r\n  var $body = $('body'),\r\n      loaded = false,\r\n      requestAttempts = 5,\r\n      $history; // set in hookUserHistory()\r\n\r\n  jsbin.$document.on('history:open', function () {\r\n    if ($history && jsbin.panels.getVisible().length === 0) {\r\n      $history.appendTo('main');\r\n    }\r\n  }).on('history:close', function () {\r\n    if ($history === null) {\r\n      $history = $('#history').detach();\r\n    }\r\n  });\r\n\r\n  var loadList = function () {\r\n    if (loaded) {\r\n      return;\r\n    }\r\n\r\n    if ($('html').hasClass('public-listing')) {\r\n      hookUserHistory();\r\n    } else {\r\n      $.ajax({\r\n        dataType: 'html',\r\n        url: jsbin.root + '/list',\r\n        error: function () {\r\n          requestAttempts--;\r\n          if (requestAttempts > 0) {\r\n            $('#history').remove();\r\n            setTimeout(loadList, 500);\r\n          } else {\r\n            console.error('Giving up to load history');\r\n          }\r\n        },\r\n        success: function (html) {\r\n          $('#history').remove();\r\n          var frag = $(html);\r\n          if (jsbin.mobile) {\r\n            // mobile is particularly slow at rendering 1,000s of tbodys\r\n            // so we'll remove some to relieve the pressure.\r\n            frag.find('tbody:gt(50)').remove();\r\n          }\r\n          $body.append(frag);\r\n          hookUserHistory();\r\n          loaded = true;\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  var updatePreview = function(url, $iframe) {\r\n    $iframe.attr('src', url + '/quiet');\r\n    $iframe.removeAttr('hidden');\r\n  };\r\n\r\n  var updateViewing = function (url, $viewing) {\r\n    $viewing.html('<a href=\"' + url + '\">' + url + '</a>');\r\n  };\r\n\r\n  var updateLayout = function ($tbodys, archiveMode) {\r\n    var $parent = $tbodys.parent();\r\n    $tbodys\r\n      .detach()\r\n      .each(function () {\r\n        var $tbody = $(this),\r\n            filter = archiveMode ? '.archived' : ':not(.archived)',\r\n            $trs = $('tr' + filter, $tbody).filter(':not(.spacer)');\r\n        if ($trs.length > 0) {\r\n          $trs.filter('.first').removeClass('first');\r\n          $tbody.removeClass('hidden');\r\n          $trs.first().addClass('first');\r\n        } else {\r\n          $tbody.addClass('hidden');\r\n        }\r\n      })\r\n      .appendTo($parent);\r\n  };\r\n\r\n  var hookUserHistory = function () {\r\n    // Loading the HTML from the server may have failed\r\n    $history = $('#history').detach();\r\n    if (!$history.length) {\r\n      return $history;\r\n    }\r\n\r\n    // Cache some useful elements\r\n    var $iframe = $('iframe', $history),\r\n        $viewing = $('#viewing', $history),\r\n        $bins = $history,\r\n        $tbodys = $('tbody', $history),\r\n        $trs = $('tr', $history),\r\n        $toggle = $('.toggle_archive', $history),\r\n        current = null,\r\n        hoverTimer = null;\r\n\r\n    // Archive & un-archive click handlers\r\n    $bins.delegate('.archive, .unarchive', 'click', function () {\r\n      var $this = $(this),\r\n          $row = $this.parents('tr');\r\n      // Instantly update this row and the page layout\r\n      $row.toggleClass('archived');\r\n\r\n      analytics[this.pathname.indexOf('unarchive') === -1 ? 'archive' : 'unarchive'](jsbin.root + $row.data('url'));\r\n\r\n      updateLayout($tbodys, $history.hasClass('archive_mode'));\r\n      // Then send the update to the server\r\n      $.ajax({\r\n        type: 'POST',\r\n        url: $this.attr('href'),\r\n        error: function () {\r\n          // Undo if something went wrong\r\n          alert('Something went wrong, please try again');\r\n          $row.toggleClass('archived');\r\n          updateLayout($tbodys, $history.hasClass('archive_mode'));\r\n        },\r\n        success: function () {}\r\n      });\r\n      return false;\r\n    });\r\n\r\n    // Handle toggling of archive view\r\n    $toggle.change(function () {\r\n      $history.toggleClass('archive_mode');\r\n      var archive = $history.hasClass('archive_mode');\r\n      analytics.archiveView(archive);\r\n      updateLayout($tbodys, archive);\r\n    });\r\n\r\n    var selected = null;\r\n    $bins.delegate('a', 'click', function (event) {\r\n      if (event.shiftKey || event.metaKey) { return; }\r\n\r\n      var $this = $(this);\r\n\r\n      if ($this.closest('.action').length) {\r\n        // let the existing handlers deal with action links\r\n        return;\r\n      }\r\n\r\n      event.preventDefault();\r\n      event.stopImmediatePropagation(); // prevent further delegates\r\n      if ($this.data('toggle') === 'history') {\r\n        jsbin.panels.allEditors(function (panel) {\r\n          if (panel.editor.getCode().trim().length) {\r\n            panel.show();\r\n          }\r\n        });\r\n        return;\r\n      }\r\n      var $tr = $this.closest('tr');\r\n      var data = $tr.data();\r\n      var url = jsbin.root + data.url;\r\n\r\n      if (selected === this) {\r\n        window.location = data.editUrl;\r\n      } else {\r\n        $trs.removeClass('selected');\r\n        $tr.addClass('selected');\r\n        updatePreview(url, $iframe);\r\n        updateViewing(url, $viewing);\r\n\r\n        selected = this;\r\n      }\r\n    });\r\n\r\n    // Load bin from data-edit-url attribute when user clicks on a row\r\n    $bins.delegate('tr:not(.spacer)', 'click', function (event) {\r\n      if (event.shiftKey || event.metaKey) { return; }\r\n      $(this).find('.url a:first').click();\r\n    });\r\n\r\n    // Update the time every 30 secs\r\n    // Need to replace Z in ISO8601 timestamp with +0000 so prettyDate() doesn't\r\n    // completely remove it (and parse the date using the local timezone).\r\n    $('a[pubdate]', $history).attr('pubdate', function (i, val) {\r\n      return val.replace('Z', '+0000');\r\n    }).prettyDate();\r\n\r\n    // Update the layout straight away\r\n    setTimeout(function () {\r\n      updateLayout($tbodys, false);\r\n    }, 0);\r\n\r\n    jsbin.$document.trigger('history:open');\r\n\r\n    return $history;\r\n  };\r\n\r\n  // inside a ready call because history DOM is rendered *after* our JS to improve load times.\r\n  $(document).on('jsbinReady', function ()  {\r\n    if (jsbin.embed) {\r\n      return;\r\n    }\r\n\r\n    var $panelButtons = $('#panels a'),\r\n        $homebtn = $('.homebtn'),\r\n        panelsVisible = $body.hasClass('panelsVisible');\r\n\r\n    var panelCloseIntent = function() {\r\n      var activeCount = $panelButtons.filter('.active').length;\r\n      if (activeCount === 1 && $(this).hasClass('active')) {\r\n        loadList();\r\n      }\r\n    };\r\n\r\n    // this code attempts to only call the list ajax request only if\r\n    // the user should want to see the list page - most users will\r\n    // jump in and jump out of jsbin, and never see this page,\r\n    // so let's not send this ajax request.\r\n    //\r\n    // The list should be loaded when:\r\n    //   - user hovers the home button\r\n    //   - they close all the panels\r\n    //   - they arrive at the page with no panels open\r\n\r\n    $homebtn.on('click', loadList);\r\n    $panelButtons.on('mousedown', panelCloseIntent);\r\n\r\n    jsbin.$document.on('history:load', loadList);\r\n\r\n    if (!panelsVisible) {\r\n      loadList();\r\n    }\r\n\r\n  });\r\n\r\n  return {\r\n    loadList,\r\n    updatePreview,\r\n    updateViewing,\r\n    updateLayout,\r\n    hookUserHistory\r\n  };\r\n\r\n});\ndefine('skylark-jsbin-client/chrome/esc',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n  var loginVisible = false,\r\n      dropdownOpen = false,\r\n      keyboardHelpVisible = false,\r\n      urlHelpVisible = false,\r\n      sideNavVisible = false,\r\n      infocardVisible = false;\r\n\r\n  jsbin.$document.keydown(function (event) {\r\n    if (event.which == 27) {//} || (keyboardHelpVisible && event.which == 191 && event.shiftKey && event.metaKey)) {\r\n      hideOpen();\r\n    }\r\n  });\r\n\r\n  function hideOpen() {\r\n    if (infocardVisible) {\r\n      $('#infocard').removeClass('open');\r\n      infocardVisible = false;\r\n    }\r\n    if (sideNavVisible) {\r\n      $body.removeClass('show-nav');\r\n      sideNavVisible = false;\r\n    }\r\n    if (urlHelpVisible) {\r\n      $body.removeClass('urlHelp');\r\n      urlHelpVisible = false;\r\n      analytics.closeMenu('help');\r\n    } else if (keyboardHelpVisible) {\r\n      $body.removeClass('keyboardHelp');\r\n      keyboardHelpVisible = false;\r\n      analytics.closeMenu('keyboardHelp');\r\n    } else if (dropdownOpen) {\r\n      closedropdown();\r\n    } else if (loginVisible) {\r\n      $('#login').hide();\r\n      analytics.closeMenu('login');\r\n      loginVisible = false;\r\n    }\r\n  }\r\n\r\n  jsbin.$document.delegate('.modal', 'click', function (event) {\r\n    if ($(event.target).is('.modal')) {\r\n      hideOpen();\r\n    }\r\n  });\r\n});\r\n\ndefine('skylark-jsbin-client/chrome/share',[\r\n  \"skylark-jquery\",\r\n  \"skylark-jsbin-coder/editors/panels\",\r\n   \"../jsbin\"\r\n],function ($,panels,jsbin) {\r\n  'use strict';\r\n  /*globals $, panels, saveChecksum, jsbin, $document, documentTitle*/\r\n\r\n  // only continue if the new share is enabled\r\n  if ($('#sharemenu .share-split').length === 0) {\r\n    return;\r\n  }\r\n\r\n  var mapping = {\r\n    live: 'output',\r\n    javascript: 'js'\r\n  };\r\n  var $sharepanels = $('#sharepanels input[type=\"checkbox\"]');\r\n\r\n  var selectedSnapshot = jsbin.state.revision;\r\n\r\n  jsbin.$document.on('saved', function () {\r\n    selectedSnapshot = jsbin.state.revision;\r\n  });\r\n\r\n  jsbin.$document.on('snapshot', function () {\r\n    jsbin.state.changed = false;\r\n    if (window.history.replaceState) {\r\n      window.history.replaceState(null, '', jsbin.getURL({ withRevision: true }) + '/edit?' + panels.getQuery());\r\n    }\r\n  });\r\n\r\n  var $sharemenu = $('#sharemenu').bind('open', function () {\r\n    // select the right panels\r\n    // hideOpen();\r\n    $sharepanels.prop('checked', false);\r\n    jsbin.panels.getVisible().forEach(function (p) {\r\n      $sharepanels.filter('[value=\"' + (mapping[p.id] || p.id) + '\"]').prop('checked', true);\r\n    });\r\n\r\n    // if we're the latest bin, then allow the user to switch to a snapshot\r\n    if (jsbin.state.latest) {\r\n      // if they have write access then select the latest & live by default\r\n      if (jsbin.state.checksum) {\r\n        $realtime.prop('checked', jsbin.state.latest);\r\n        $snapshot.prop('checked', false);\r\n\r\n        $andlive.show();\r\n      // otherwise select the snapshot first\r\n      } else {\r\n        $realtime.prop({ checked: false });\r\n        $snapshot.prop('checked', true);\r\n        $andlive.hide();\r\n      }\r\n\r\n      $withLiveReload.show();\r\n    } else {\r\n      // otherwise, disable live\r\n      $realtime.prop({ checked: false, disabled: true });\r\n      $snapshot.prop('checked', true);\r\n      $withLiveReload.hide();\r\n    }\r\n\r\n    update();\r\n  });\r\n  $sharemenu.find('.lockrevision').on('change', function () {\r\n    jsbin.saveChecksum = false; // jshint ignore:line\r\n    jsbin.state.checksum = false;\r\n    jsbin.$document.trigger('locked');\r\n  });\r\n  var $sharepreview = $('#share-preview');\r\n  var $realtime = $('#sharebintype input[type=radio][value=\"realtime\"]');\r\n  var $snapshot = $('#sharebintype input[type=radio][value=\"snapshot\"]');\r\n  var link = $sharemenu.find('a.link')[0];\r\n  var linkselect = $sharemenu.find('input[name=\"url\"]')[0];\r\n  var embed = $sharemenu.find('textarea')[0];\r\n  var form = $sharemenu.find('form')[0];\r\n  var $directLinks = $sharemenu.find('.direct-links');\r\n  var $andlive = $('#andlive');\r\n  var $withLiveReload = $sharemenu.find('.codecasting');\r\n\r\n  // get an object representation of a form's state\r\n  function formData(form) {\r\n    var length = form.length;\r\n    var data = {};\r\n    var value;\r\n    var el;\r\n    var type;\r\n    var name;\r\n\r\n    var append = function (data, name, value) {\r\n      if (data[name] === undefined) {\r\n        data[name] = value;\r\n      } else {\r\n        if (typeof data[name] === 'string') {\r\n          data[name] = [data[name]];\r\n        }\r\n        data[name].push(value);\r\n      }\r\n    };\r\n\r\n    for (var i = 0; i < length; i++) {\r\n      el = form[i];\r\n      value = el.value;\r\n      type = el.type;\r\n      name = el.name;\r\n\r\n      if (type === 'radio') {\r\n        if (el.checked) {\r\n          append(data, name, value);\r\n        }\r\n      } else if (type === 'checkbox') {\r\n        if (data[name] === undefined) {\r\n          data[name] = [];\r\n        }\r\n        if (el.checked) {\r\n          append(data, name, value);\r\n        }\r\n      } else {\r\n        append(data, name, value);\r\n      }\r\n    }\r\n\r\n    return data;\r\n  }\r\n\r\n  function update() {\r\n    var data = formData(form);\r\n    var url = jsbin.getURL({ root: jsbin.shareRoot });\r\n    var OGurl = jsbin.getURL();\r\n\r\n    if (data.state === 'snapshot' && jsbin.state.latest) {\r\n      url += '/' + selectedSnapshot;\r\n      OGurl += '/' + selectedSnapshot;\r\n    }\r\n\r\n    var shareurl = url;\r\n\r\n    // get a comma separated list of the panels that should be shown\r\n    var query = data.panel.join(',');\r\n\r\n    if (query) {\r\n      query = '?' + query;\r\n    }\r\n\r\n    $sharepanels.prop('disabled', data.view === 'output');\r\n    $sharepreview.attr('class', data.view);\r\n\r\n    if (data.view !== 'output') {\r\n      $sharepreview.find('.editor div').each(function () {\r\n        this.hidden = data.panel.indexOf(this.className) === -1;\r\n      });\r\n    }\r\n\r\n    if (data.view === 'editor') {\r\n      shareurl += '/edit';\r\n    } else {\r\n      query = '';\r\n    }\r\n\r\n    // create the direct links, it'll be faster to inject HTML rather than\r\n    // updating hrefs of a bunch of HTML elements\r\n    $directLinks.empty();\r\n\r\n    var directLinksHTML = []; //['<a href=\"' + url + '.html\">html</a>'];\r\n\r\n    var code = ''\r\n    var ext = '';\r\n\r\n    code = jsbin.panels.named.html.getCode().trim();\r\n\r\n    if (code) {\r\n      ext = processors[jsbin.state.processors.html || 'html'].extensions[0];\r\n      if (ext !== 'html') {\r\n        directLinksHTML.push('<a target=\"_blank\" href=\"' + url + '.' + ext + '\">' + ext + '</a>');\r\n      } else if (code.toLowerCase().indexOf('<svg') === 0) {\r\n        directLinksHTML.push('<a target=\"_blank\" href=\"' + url + '.svg\">svg</a>');\r\n      }\r\n    }\r\n\r\n    if (jsbin.panels.named.css.getCode().trim()) {\r\n      ext = processors[jsbin.state.processors.css || 'css'].extensions[0];\r\n      if (ext !== 'css') {\r\n        directLinksHTML.push('<a target=\"_blank\" href=\"' + url + '.css\">css</a>');\r\n      }\r\n      directLinksHTML.push('<a target=\"_blank\" href=\"' + url + '.' + ext + '\">' + ext + '</a>');\r\n    }\r\n\r\n    code = jsbin.panels.named.javascript.getCode().trim();\r\n\r\n    if (code) {\r\n      ext = processors[jsbin.state.processors.javascript || 'javascript'].extensions[0];\r\n\r\n      if (ext !== 'js') {\r\n        directLinksHTML.push('<a target=\"_blank\" href=\"' + url + '.js\">js</a>');\r\n      }\r\n\r\n      try {\r\n        JSON.parse(code);\r\n        directLinksHTML.push('<a target=\"_blank\" href=\"' + url + '.json\">json</a>');\r\n      } catch (e) {\r\n        directLinksHTML.push('<a target=\"_blank\" href=\"' + url + '.' + ext + '\">' + ext + '</a>');\r\n      }\r\n\r\n    }\r\n\r\n    $directLinks.html(directLinksHTML.join(''));\r\n\r\n    linkselect.value = link.href = shareurl + query;\r\n    embed.value = ('<a class=\"jsbin-embed\" href=\"' + OGurl + '/embed' + query + '\">' + jsbin.documentTitle + ' on jsbin.com</a><' + 'script src=\"' + jsbin.static + '/js/embed.min.js?' + jsbin.version + '\"><' + '/script>').replace(/<>\"&/g, function (m) {\r\n        return {\r\n          '<': '&lt;',\r\n          '>': '&gt;',\r\n          '\"': '&quot;',\r\n          '&': '&amp;'\r\n        }[m];\r\n      });\r\n  }\r\n\r\n  // when the user clicks on \"snapshot\" we automatically create a snapshot at\r\n  // that point (technically this isn't a snapshot, but clearing the write\r\n  // access, so the next user input creates the *next* snapshot - which is\r\n  // actually the latest copy).\r\n  $('#sharebintype input[type=radio]').on('change', function () {\r\n    if (this.value === 'snapshot') {\r\n      jsbin.state.checksum = false;\r\n      jsbin.saveChecksum = false; // jshint ignore:line\r\n      $withLiveReload.hide();\r\n    } else {\r\n      $withLiveReload.show();\r\n    }\r\n  });\r\n\r\n  $sharemenu.find('input').on('change', update);\r\n\r\n  jsbin.$document.on('saved', function () {\r\n\r\n    // revert to the latest bin state\r\n    $realtime.prop('checked', true);\r\n\r\n    // show the share menu\r\n    $sharemenu.removeClass('hidden');\r\n\r\n    update();\r\n  });\r\n\r\n  var $share = $('#share').closest('.menu');\r\n  var shareElement = $('#sharemenu a')[0];\r\n  var $showShare = $('a.show-share').on('click', function () {\r\n    if ($share.hasClass('open')) {\r\n      closedropdown(shareElement);\r\n    } else {\r\n      opendropdown(shareElement, true); // true = no focus\r\n    }\r\n    $showShare.blur();\r\n  });\r\n\r\n});\r\n\ndefine('skylark-jsbin-client/chrome/issue',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n\r\n  /*global $:true, jsbin:true */\r\n    'use strict';\r\n\r\n    function githubIssue() {\r\n      var url = 'http://github.com/jsbin/jsbin/issues/new';\r\n      var body = ['Please provide any additional information, record a screencast ',\r\n                 'with http://quickcast.io or http://screenr.com and attach a screenshot ',\r\n                 'if possible.\\n\\n**JS Bin info**\\n\\n* [%url%/edit](%url%/edit)\\n* ',\r\n                 window.navigator.userAgent + '\\n',\r\n                 (jsbin.user && jsbin.user.name ? '* ' + jsbin.user.name : ''),\r\n                 '\\n'].join('');\r\n\r\n      return url + '?body=' + encodeURIComponent(body.replace(/%url%/g, jsbin.getURL({ withRevision: true })));\r\n    }\r\n\r\n    var $newissue = $('#newissue');\r\n\r\n    $('#help').parent().on('open', function () {\r\n      $newissue.attr('href', githubIssue());\r\n    });\r\n\r\n    return githubIssue;\r\n\r\n\r\n});\ndefine('skylark-jsbin-client/chrome/download',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\",\r\n   \"./analytics\"\r\n],function ($,jsbin,analytics) {\r\n\t$('#download').click(function (event) {\r\n\t  event.preventDefault();\r\n\t  window.location = jsbin.getURL({ withRevision: true }) + '/download';\r\n\t  analytics.download();\r\n\t});\r\n});\ndefine('skylark-jsbin-client/chrome/login',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n  /* global $ */\r\n\r\n  $('form.login').submit(function (event) {\r\n    'use strict';\r\n    event.preventDefault();\r\n\r\n    var form = $(this),\r\n        name = form.find('input[name=username]').val(),\r\n        key = form.find('input[name=password]').val(),\r\n        email = form.find('input[name=email]').val(),\r\n        $loginFeedback = form.find('.loginFeedback');\r\n\r\n\r\n    // jsbin.settings.home = name; // will save later\r\n    $loginFeedback.show().text('Checking...');\r\n\r\n    $.ajax({\r\n      url: form.attr('action'),\r\n      data: { username: name, key: key, email: email },\r\n      type: 'POST',\r\n      dataType: 'json',\r\n      complete: function (jqXHR) {\r\n        var data = $.parseJSON(jqXHR.responseText) || {};\r\n        // cookie is required to share with the server so we can do a redirect on new bin\r\n        if (jqXHR.status === 200) {\r\n          if (data.avatar) {\r\n            $('a.avatar').find('img').remove().end().prepend('<img src=\"' + data.avatar + '\">');\r\n          }\r\n          if (data.message) {\r\n            $loginFeedback.text(data.message);\r\n          } else {\r\n            window.location = window.location.pathname + window.location.search;\r\n          }\r\n        } else {\r\n          analytics.login(false);\r\n          $loginFeedback.text(data.message || ('\"' + name + '\" has already been taken. Please either double check the password, or choose another username.'));\r\n        }\r\n      }\r\n    });\r\n  });\r\n\r\n});\ndefine('skylark-jsbin-client/chrome/tips',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n\r\n    var $html = $(document.documentElement),\r\n        $tip = $('#tip'),\r\n        $tipContent = $('p', $tip),\r\n        tipTimeout;\r\n\r\n    var removeTip = function (cb) {\r\n      $html.removeClass('showtip');\r\n      $tip.removeClass();\r\n      $tipContent.html('');\r\n      $(window).resize();\r\n      cb && setTimeout(cb, 0);\r\n    };\r\n\r\n    var setTip = function (data) {\r\n      clearTimeout(tipTimeout);\r\n      $tipContent.html(data.content);\r\n      $tip.removeClass().addClass(data.type || 'info');\r\n      $html.addClass('showtip');\r\n      if (!data.autohide) return;\r\n      tipTimeout = setTimeout(function () {\r\n        removeTip();\r\n      }, parseInt(data.autohide, 10) || 5 * 1000);\r\n    };\r\n\r\n    /**\r\n     * Trigger a tip to be shown.\r\n     *\r\n     *   $document.trigger('tip', 'You have an infinite loop in your HTML.');\r\n     *\r\n     *    $document.trigger('tip', {\r\n     *      type: 'error',\r\n     *      content: 'Do you even Javascript?',\r\n     *      autohide: 8000\r\n     *    });\r\n     */\r\n    jsbin.$document.on('tip', function (event, data) {\r\n      var tipData = data;\r\n      if (typeof data === 'string') {\r\n        tipData = {};\r\n        tipData.content = data;\r\n        tipData.type = 'info';\r\n      }\r\n      // If the content and the type haven't changed, just set it again.\r\n      if ($tipContent.html() === tipData.content &&\r\n          $tip.hasClass(tipData.type)) return setTip(data);\r\n      removeTip(function () {\r\n        setTip(tipData);\r\n      });\r\n    });\r\n\r\n    $('#tip').on('click', 'a.dismiss', function () {\r\n      removeTip();\r\n      return false;\r\n    });\r\n\r\n    // Escape\r\n   jsbin.$document.keydown(function (event) {\r\n      if (event.which == 27) {\r\n        removeTip();\r\n      }\r\n    });\r\n\r\n  });\ndefine('skylark-jsbin-client/chrome/keys',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n  /*global jsbin*/\r\n  /*global $document*/\r\n  'use strict';\r\n\r\n  // don't store the keys if they're logged in, since we have this on the server\r\n  if (jsbin.user && jsbin.user.name) {\r\n    return;\r\n  }\r\n\r\n  var keys = {};\r\n\r\n  var find = function (url) {\r\n    var key = keys[url || jsbin.getURL({ withRevision: true, withoutRoot: true })] || {};\r\n    return key.c;\r\n  };\r\n\r\n  try {\r\n    if ('localStorage' in window && window['localStorage'] !== null) { // jshint ignore:line\r\n\r\n    }\r\n  } catch(e){\r\n    return find;\r\n  }\r\n\r\n  function init() {\r\n    keys = JSON.parse(localStorage.keys || '{}');\r\n  }\r\n\r\n  jsbin.$document.on('saved', function () {\r\n    keys[jsbin.getURL({ withRevision: false, withoutRoot: true })] = { s: jsbin.state.revsion, c: jsbin.state.checksum, d: (new Date()).getTime() };\r\n    localStorage.keys = JSON.stringify(keys);\r\n  });\r\n\r\n  // update the key lookup when a new key is stored\r\n  window.addEventListener('storage', function (event) {\r\n    if (event.key === 'keys') {\r\n      init();\r\n    }\r\n  });\r\n\r\n  init();\r\n\r\n  return jsbin.keys = find;\r\n\r\n});\ndefine('skylark-jsbin-client/chrome/save',[\r\n  \"skylark-jquery\",\r\n  \"skylark-jsbin-base/storage\",\r\n  \"skylark-jsbin-coder/editors/panels\",\r\n   \"../jsbin\",\r\n   \"./analytics\"\r\n],function ($,store,panels,jsbin,analytics) {\r\n  /*jshint strict: false */\r\n  /*globals $, analytics, jsbin, documentTitle, $document, throttle, editors*/\r\n  var saving = {\r\n    todo: {\r\n      html: false,\r\n      css: false,\r\n      javascript: false\r\n    },\r\n    _inprogress: false,\r\n    inprogress: function (inprogress) {\r\n      if (typeof inprogress === 'undefined') {\r\n        return saving._inprogress;\r\n      }\r\n\r\n      saving._inprogress = inprogress;\r\n      if (inprogress === false) {\r\n        var panels = ['html','css','javascript'];\r\n\r\n        var save = function () {\r\n          var todo = panels.pop();\r\n          if (todo && saving.todo[todo]) {\r\n            saving._inprogress = true;\r\n            updateCode(todo, save);\r\n            saving.todo[todo] = false;\r\n          } else if (todo) {\r\n            save();\r\n          }\r\n        };\r\n\r\n        save();\r\n      }\r\n    }\r\n  };\r\n\r\n  function getTagContent(tag) {\r\n    var html = jsbin.panels.named.html.getCode();\r\n    var result = '';\r\n\r\n    // if we don't have the tag, bail with an empty string\r\n    if (html.indexOf('<' + tag) === -1) {\r\n      return result;\r\n    }\r\n\r\n    if (tag !== 'title' && tag !== 'meta') {\r\n      console.error('getTagContent for ' + tag + ' is not supported');\r\n      return result;\r\n    }\r\n\r\n    // grab the content based on the earlier defined regexp\r\n    html.replace(getTagContent.re[tag], function (all, capture1, capture2) {\r\n      result = tag === 'title' ? capture1 : capture2;\r\n    });\r\n\r\n    return result;\r\n  }\r\n\r\n  getTagContent.re = {\r\n    meta: /(<meta name=\"description\" content=\")([^\"]*)/im,\r\n    title: /<title>(.*)<\\/title>/im\r\n  };\r\n\r\n\r\n  // to allow for download button to be introduced via beta feature\r\n  $('a.save').click(function (event) {\r\n    event.preventDefault();\r\n\r\n    analytics.milestone();\r\n    // if save is disabled, hitting save will trigger a reload\r\n    var ajax = true;\r\n    if (jsbin.saveDisabled === true) {\r\n      ajax = false;\r\n    }\r\n\r\n    if ((jsbin.state.changed || jsbin.mobile) || !jsbin.owner()) {\r\n      saveCode('save', ajax);\r\n    }\r\n\r\n    return false;\r\n  });\r\n\r\n  var $shareLinks = $('#share .link');\r\n  var $panelCheckboxes = $('#sharemenu #sharepanels input');\r\n\r\n  // TODO remove split when live\r\n  var split = $('#sharemenu .share-split').length;\r\n\r\n  // TODO candidate for removal\r\n  function updateSavedState() {\r\n    'use strict';\r\n    if (split) {\r\n      return;\r\n    }\r\n\r\n    var mapping = {\r\n      live: 'output',\r\n      javascript: 'js',\r\n      css: 'css',\r\n      html: 'html',\r\n      console: 'console'\r\n    };\r\n\r\n    var withRevision = true;\r\n\r\n    var query = $panelCheckboxes.filter(':checked').map(function () {\r\n      return mapping[this.getAttribute('data-panel')];\r\n    }).get().join(',');\r\n    $shareLinks.each(function () {\r\n      var path = this.getAttribute('data-path');\r\n      var url = jsbin.getURL({ withRevision: withRevision }) + path + (query && this.id !== 'livepreview' ? '?' + query : ''),\r\n          nodeName = this.nodeName;\r\n      var hash = panels.getHighlightLines();\r\n\r\n      if (hash) {\r\n        hash = '#' + hash;\r\n      }\r\n\r\n      if (nodeName === 'A') {\r\n        this.href = url;\r\n      } else if (nodeName === 'INPUT') {\r\n        this.value = url;\r\n        if (path === '/edit') {\r\n          this.value += hash;\r\n        }\r\n      } else if (nodeName === 'TEXTAREA') {\r\n        this.value = ('<a class=\"jsbin-embed\" href=\"' + url + hash + '\">' + jsbin.documentTitle + '</a><' + 'script src=\"' + jsbin.static + '/js/embed.js\"><' + '/script>').replace(/<>\"&/g, function (m) {\r\n            return {\r\n              '<': '&lt;',\r\n              '>': '&gt;',\r\n              '\"': '&quot;',\r\n              '&': '&amp;'\r\n            }[m];\r\n          });\r\n      }\r\n    });\r\n  }\r\n\r\n  $('#sharemenu').bind('open', updateSavedState);\r\n  $('#sharebintype input[type=radio]').on('click', function () {\r\n    if (this.value === 'snapshot') {\r\n      jsbin.state.checksum = false;\r\n      saveChecksum = false;\r\n    }\r\n    updateSavedState();\r\n  });\r\n\r\n  var lastHTML = null;\r\n\r\n  function updateDocMeta(event, data) {\r\n    if (data) {\r\n      if (data.panelId !== 'html') {\r\n        return; // ignore non-html updates\r\n      }\r\n    }\r\n\r\n    var currentHTML = jsbin.panels.named.html.getCode();\r\n    if (lastHTML !== currentHTML) {\r\n      lastHTML = currentHTML;\r\n\r\n      var description = getTagContent('meta');\r\n      if (description !== jsbin.state.description) {\r\n        jsbin.state.description = description;\r\n        jsbin.state.updateSettings({ description: description });\r\n      }\r\n\r\n      var title = getTagContent('title');\r\n      if (title !== jsbin.state.title) {\r\n        jsbin.state.title = title;\r\n        jsbin.state.updateSettings({ title: title });\r\n\r\n        jsbin.documentTitle = title;\r\n        if (jsbin.documentTitle) {\r\n          document.title = jsbin.documentTitle + ' - ' + jsbin.name;\r\n        } else {\r\n          document.title = jsbin.name;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  jsbin.$document.on('saveComplete', updateDocMeta); // update, not create\r\n\r\n  jsbin.$document.on('saved', function () {\r\n    jsbin.state.changed = false;\r\n    updateSavedState();\r\n\r\n    $('#sharebintype input[type=radio][value=\"realtime\"]').prop('checked', true);\r\n\r\n    $shareLinks.closest('.menu').removeClass('hidden');\r\n\r\n    $('#jsbinurl').attr('href', jsbin.getURL()).removeClass('hidden');\r\n    $('#clone').removeClass('hidden');\r\n\r\n    updateDocMeta();\r\n  });\r\n\r\n  var saveChecksum = jsbin.state.checksum || store.sessionStorage.getItem('checksum') || false;\r\n\r\n  // store it back on state\r\n  jsbin.state.checksum = saveChecksum;\r\n\r\n  if (saveChecksum) {\r\n    // remove the disabled class, but also remove the cancelling event handlers\r\n    $('#share div.disabled').removeClass('disabled').unbind('click mousedown mouseup');\r\n  } else {\r\n    $('#share div.disabled').one('click', function (event) {\r\n      event.preventDefault();\r\n      $('a.save').click();\r\n    });\r\n  }\r\n\r\n  jsbin.$document.one('saved', function () {\r\n    $('#share div.disabled').removeClass('disabled').unbind('click mousedown mouseup');\r\n  });\r\n\r\n  function onSaveError(jqXHR, panelId) {\r\n    if (jqXHR.status === 413) {\r\n      // Hijack the tip label to show an error message.\r\n      $('#tip p').html('Sorry this bin is too large for us to save');\r\n      $(document.documentElement).addClass('showtip');\r\n    } else if (jqXHR.status === 403) {\r\n      jsbin.$document.trigger('tip', {\r\n        type: 'error',\r\n        content: 'I think there\\'s something wrong with your session and I\\'m unable to save. <a href=\"' + window.location + '\"><strong>Refresh to fix this</strong></a>, you <strong>will not</strong> lose your code.'\r\n      });\r\n    } else if (panelId) {\r\n      if (panelId) { savingLabels[panelId].text('Saving...').animate({ opacity: 1 }, 100); }\r\n      window._console.error({message: 'Warning: Something went wrong while saving. Your most recent work is not saved.'});\r\n    }\r\n  }\r\n\r\n\r\n\r\n  // only start live saving it they're allowed to (whereas save is disabled if they're following)\r\n  if (!jsbin.saveDisabled) {\r\n    $('.code.panel .label .name').append('<span class=\"saved\">Saved</span>');\r\n\r\n    var savingLabels = {\r\n      html: $('.panel.html .name span.saved'),\r\n      javascript: $('.panel.javascript .name span.saved'),\r\n      css: $('.panel.css .name span.saved'),\r\n    };\r\n\r\n    jsbin.$document.bind('jsbinReady', function () {\r\n      jsbin.state.changed = false;\r\n      jsbin.panels.allEditors(function (panel) {\r\n        panel.on('processor', function () {\r\n          // if the url doesn't match the root - i.e. they've actually saved something then save on processor change\r\n          if (jsbin.root !== jsbin.getURL()) {\r\n            jsbin.$document.trigger('codeChange', [{ panelId: panel.id }]);\r\n          }\r\n        });\r\n      });\r\n\r\n      jsbin.$document.bind('codeChange', function (event, data) {\r\n        jsbin.state.changed = true;\r\n        // savingLabels[data.panelId].text('Saving');\r\n        if (savingLabels[data.panelId]) {\r\n          savingLabels[data.panelId].css({ 'opacity': 0 }).stop(true, true);\r\n        }\r\n      });\r\n\r\n      jsbin.$document.bind('saveComplete', jsbin.throttle(function (event, data) {\r\n        // show saved, then revert out animation\r\n        savingLabels[data.panelId]\r\n          .text('Saved')\r\n          .stop(true, true)\r\n          .animate({ opacity: 1 }, 100)\r\n          .delay(1200)\r\n          .animate({ opacity: 0 }, 500);\r\n      }, 500));\r\n\r\n      jsbin.$document.bind('codeChange', jsbin.throttle(function (event, data) {\r\n        if (!data.panelId) {\r\n          return;\r\n        }\r\n\r\n        if (jsbin.state.deleted) {\r\n          return;\r\n        }\r\n\r\n        var panelId = data.panelId;\r\n\r\n        jsbin.panels.savecontent();\r\n\r\n        if (saving.inprogress()) {\r\n          // queue up the request and wait\r\n          saving.todo[panelId] = true;\r\n          return;\r\n        }\r\n\r\n        saving.inprogress(true);\r\n\r\n        // We force a full save if there's no checksum OR if there's no bin code/url\r\n        if (!saveChecksum || !jsbin.state.code) {\r\n          // create the bin and when the response comes back update the url\r\n          saveCode('save', true);\r\n        } else {\r\n          updateCode(panelId);\r\n        }\r\n      }, 30 * 1000));\r\n    });\r\n  } else {\r\n    jsbin.$document.one('jsbinReady', function () {\r\n      'use strict';\r\n      var shown = false;\r\n      if (!jsbin.embed && !jsbin.sandbox) {\r\n        jsbin.$document.on('codeChange.live', function (event, data) {\r\n          if (!data.onload && !shown && data.origin !== 'setValue') {\r\n            shown = true;\r\n            var ismac = navigator.userAgent.indexOf(' Mac ') !== -1;\r\n            var cmd = ismac ? '⌘' : 'ctrl';\r\n            var shift = ismac ? '⇧' : 'shift';\r\n            var plus = ismac ? '' : '+';\r\n\r\n            jsbin.$document.trigger('tip', {\r\n              type: 'notification',\r\n              content: 'You\\'re currently viewing someone else\\'s live stream, but you can <strong><a class=\"clone\" href=\"' + jsbin.root + '/clone\">clone your own copy</a></strong> (' + cmd + plus + shift + plus + 'S) at any time to save your edits'\r\n            });\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  function compressKeys(keys, obj) {\r\n    obj.compressed = keys;\r\n    keys.split(',').forEach(function (key) {\r\n      obj[key] = LZString.compressToUTF16(obj[key]);\r\n    });\r\n  }\r\n\r\n  function updateCode(panelId, callback) {\r\n    var panelSettings = {};\r\n\r\n    if (jsbin.state.processors) {\r\n      panelSettings.processors = jsbin.state.processors;\r\n    }\r\n\r\n    var data = {\r\n      code: jsbin.state.code,\r\n      revision: jsbin.state.revision,\r\n      method: 'update',\r\n      panel: panelId,\r\n      content: panels.named[panelId].getCode(),\r\n      checksum: jsbin.saveChecksum,\r\n      settings: JSON.stringify(panelSettings),\r\n    };\r\n\r\n    if (jsbin.settings.useCompression && location.protocol === 'http:') {\r\n      compressKeys('content', data);\r\n    }\r\n\r\n    if (jsbin.state.processors[panelId] &&\r\n      jsbin.state.processors[panelId] !== panelId &&\r\n      jsbin.state.cache[panelId]) {\r\n      data.processed = jsbin.state.cache[panelId].result;\r\n    }\r\n\r\n    $.ajax({\r\n      url: jsbin.getURL({ withRevision: true }) + '/save',\r\n      data: data,\r\n      type: 'post',\r\n      dataType: 'json',\r\n      headers: {'Accept': 'application/json'},\r\n      success: function (data) {\r\n        jsbin.$document.trigger('saveComplete', { panelId: panelId });\r\n        if (data.error) {\r\n          saveCode('save', true, function () {\r\n            // savedAlready = data.checksum;\r\n          });\r\n        } else {\r\n          jsbin.state.latest = true;\r\n        }\r\n      },\r\n      error: function (jqXHR) {\r\n        onSaveError(jqXHR, panelId);\r\n      },\r\n      complete: function () {\r\n        saving.inprogress(false);\r\n        if (callback) { callback(); }\r\n      }\r\n    });\r\n  }\r\n\r\n  $('a.clone').click(clone);\r\n  $('#tip').delegate('a.clone', 'click', clone);\r\n\r\n  function clone(event) {\r\n    event.preventDefault();\r\n\r\n    // save our panel layout - assumes our user is happy with this layout\r\n    jsbin.panels.save();\r\n    analytics.clone();\r\n\r\n    var $form = setupform('save,new');\r\n    $form.submit();\r\n\r\n    return false;\r\n  }\r\n\r\n  function setupform(method) {\r\n  var $form = $('form#saveform').empty()\r\n      .append('<input type=\"hidden\" name=\"javascript\" />')\r\n      .append('<input type=\"hidden\" name=\"html\" />')\r\n      .append('<input type=\"hidden\" name=\"css\" />')\r\n      .append('<input type=\"hidden\" name=\"method\" />')\r\n      .append('<input type=\"hidden\" name=\"_csrf\" value=\"' + jsbin.state.token + '\" />')\r\n      .append('<input type=\"hidden\" name=\"settings\" />')\r\n      .append('<input type=\"hidden\" name=\"checksum\" />');\r\n\r\n    var settings = {};\r\n\r\n    if (jsbin.state.processors) {\r\n      settings.processors = jsbin.state.processors;\r\n    }\r\n\r\n    // this prevents new revisions forking off the welcome bin\r\n    // because it's looking silly!\r\n    if (jsbin.state.code === 'welcome') {\r\n      $form.attr('action', '/save');\r\n    }\r\n\r\n    $form.find('input[name=settings]').val(JSON.stringify(settings));\r\n    $form.find('input[name=javascript]').val(editors.javascript.getCode());\r\n    $form.find('input[name=css]').val(editors.css.getCode());\r\n    $form.find('input[name=html]').val(editors.html.getCode());\r\n    $form.find('input[name=method]').val(method);\r\n    $form.find('input[name=checksum]').val(jsbin.state.checksum);\r\n\r\n    return $form;\r\n  }\r\n\r\n  function pad(n){\r\n    return n<10 ? '0'+n : n;\r\n  }\r\n\r\n  function ISODateString(d){\r\n    return d.getFullYear()+'-'\r\n      + pad(d.getMonth()+1)+'-'\r\n      + pad(d.getDate())+'T'\r\n      + pad(d.getHours())+':'\r\n      + pad(d.getMinutes())+':'\r\n      + pad(d.getSeconds())+'Z';\r\n  }\r\n\r\n  function saveCode(method, ajax, ajaxCallback) {\r\n    // create form and post to it\r\n    var $form = setupform(method);\r\n    // save our panel layout - assumes our user is happy with this layout\r\n    jsbin.panels.save();\r\n    jsbin.panels.saveOnExit = true;\r\n\r\n    var data = $form.serializeArray().reduce(function(obj, data) {\r\n      obj[data.name] = data.value;\r\n      return obj;\r\n    }, {});\r\n\r\n    if (jsbin.settings.useCompression) {\r\n      compressKeys('html,css,javascript', data);\r\n    }\r\n\r\n    if (ajax) {\r\n      $.ajax({\r\n        url: jsbin.getURL({ withRevision: true }) + '/save',\r\n        data: data,\r\n        dataType: 'json',\r\n        type: 'post',\r\n        headers: {'Accept': 'application/json'},\r\n        success: function (data) {\r\n          if (ajaxCallback) {\r\n            ajaxCallback(data);\r\n          }\r\n\r\n          store.sessionStorage.setItem('checksum', data.checksum);\r\n          saveChecksum = data.checksum;\r\n\r\n          jsbin.state.checksum = saveChecksum;\r\n          jsbin.state.code = data.code;\r\n          jsbin.state.revision = data.revision;\r\n          jsbin.state.latest = true; // this is never not true...end of conversation!\r\n          jsbin.state.metadata = { name: jsbin.user.name };\r\n          $form.attr('action', jsbin.getURL({ withRevision: true }) + '/save');\r\n\r\n          if (window.history && window.history.pushState) {\r\n            // updateURL(edit);\r\n            var hash = panels.getHighlightLines();\r\n            if (hash) { hash = '#' + hash; }\r\n            var query = panels.getQuery();\r\n            if (query) { query = '?' + query; }\r\n            // If split is truthy (> 0) then we are using the revisonless feature\r\n            // this is temporary until we release the feature!\r\n            window.history.pushState(null, '', jsbin.getURL({withRevision: !split}) + '/edit' + query + hash);\r\n            store.sessionStorage.setItem('url', jsbin.getURL({withRevision: !split}));\r\n          } else {\r\n            window.location.hash = data.edit;\r\n          }\r\n\r\n          jsbin.$document.trigger('saved');\r\n        },\r\n        error: function (jqXHR) {\r\n          onSaveError(jqXHR, null);\r\n        },\r\n        complete: function () {\r\n          saving.inprogress(false);\r\n        }\r\n      });\r\n    } else {\r\n      $form.submit();\r\n    }\r\n  }\r\n\r\n});\ndefine('skylark-jsbin-client/chrome/archive',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\",\r\n   \"./analytics\"\r\n],function ($,jsbin,analytics) {\r\n  function archive(unarchive) {\r\n    /*global jsbin, $, $document, analytics*/\r\n    'use strict';\r\n    var type = unarchive === false ? 'unarchive' : 'archive';\r\n    var text = unarchive === false ? 'restore from archive' : 'archiving';\r\n    analytics[type](jsbin.getURL({ withRevision: true }));\r\n    if (!jsbin.user.name) {\r\n      jsbin.$document.trigger('tip', {\r\n        type: 'notication',\r\n        content: 'You must be logged in and the owner of the bin to archive.'\r\n      });\r\n    } else if (jsbin.owner()) {\r\n      $.ajax({\r\n        type: 'POST',\r\n        url: jsbin.getURL({ withRevision: true }) + '/' + type,\r\n        error: function () {\r\n          jsbin.$document.trigger('tip', {\r\n            type: 'error',\r\n            content: 'The ' + text + ' failed. If this continues, please can you file an issue?'\r\n          });\r\n        },\r\n        success: function () {\r\n          jsbin.state.metadata.archive = unarchive !== false;\r\n          updateArchiveMenu();\r\n          jsbin.$document.trigger('tip', {\r\n            type: 'notication',\r\n            autohide: 5000,\r\n            content: 'This bin is now ' + (unarchive === false ? 'restored from the archive.' : 'archived.')\r\n          });\r\n        }\r\n      });\r\n    } else {\r\n      jsbin.$document.trigger('tip', {\r\n        type: 'notication',\r\n        content: 'The ' + text + ' failed. You can only archive bins that you own.'\r\n      });\r\n    }\r\n  }\r\n\r\n  function updateArchiveMenu() {\r\n    if (jsbin.state.metadata && jsbin.state.metadata.archive) {\r\n      $('a.archivebin').hide();\r\n      $('a.unarchivebin').show();\r\n    } else {\r\n      $('a.archivebin').show();\r\n      $('a.unarchivebin').hide();\r\n    }\r\n  }\r\n\r\n  updateArchiveMenu();\r\n\r\n  return jsbin.archive = archive;\r\n});\ndefine('skylark-jsbin-client/chrome/navigation',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\",\r\n   \"./analytics\",\r\n   \"./archive\"\r\n],function ($,jsbin,analytics, archive) {\r\n  var $startingpoint = $('a.startingpoint').click(function (event) {\r\n    event.preventDefault();\r\n    if (localStorage) {\r\n      analytics.saveTemplate();\r\n      localStorage.setItem('saved-javascript', editors.javascript.getCode());\r\n      localStorage.setItem('saved-html', editors.html.getCode());\r\n      localStorage.setItem('saved-css', editors.css.getCode());\r\n\r\n      localStorage.setItem('saved-processors', JSON.stringify({\r\n        javascript: jsbin.panels.named.javascript.processor.id,\r\n        html: jsbin.panels.named.html.processor.id,\r\n        css: jsbin.panels.named.css.processor.id,\r\n      }));\r\n\r\n      jsbin.$document.trigger('tip', {\r\n        type: 'notification',\r\n        content: 'Starting template updated and saved',\r\n        autohide: 3000\r\n      });\r\n    } else {\r\n      jsbin.$document.trigger('tip', {\r\n        type: 'error',\r\n        content: 'Saving templates isn\\'t supported in this browser I\\'m afraid. Sorry'\r\n      });\r\n    }\r\n    return false;\r\n  });\r\n\r\n  // if (localStorage && localStorage['saved-html']) {\r\n    // $startingpoint.append('')\r\n  // }\r\n\r\n  $('a.disabled').on('click mousedown mouseup', function (event) {\r\n    event.stopImmediatePropagation();\r\n    return false;\r\n  });\r\n\r\n  $('#loginbtn').click(function () {\r\n    analytics.login();\r\n    $(this).toggleClass('open');\r\n    // $('#login').show();\r\n    // loginVisible = true;\r\n    // return false;\r\n  });\r\n\r\n  $('a.logout').click(function (event) {\r\n    event.preventDefault();\r\n\r\n    // We submit a form here because I can't work out how to style the button\r\n    // element in the form to look the same as the anchor. Ideally we would\r\n    // remove that and just let the form submit itself...\r\n    $(this.hash).submit();\r\n    // Clear session storage so private bins wont be cached.\r\n    for (i = 0; i < store.sessionStorage.length; i++) {\r\n      key = store.sessionStorage.key(i);\r\n      if (key.indexOf('jsbin.content.') === 0) {\r\n        store.sessionStorage.removeItem(key);\r\n      }\r\n    }\r\n  });\r\n\r\n  $('.homebtn').click(function (event, data) {\r\n    if (this.id === 'avatar') {\r\n      analytics.openFromAvatar();\r\n    } else if (this.id === 'profile') {\r\n      analytics.openFromAvatar();\r\n      $(this).closest('.open').removeClass('open');\r\n    } else {\r\n      analytics.open(data);\r\n    }\r\n\r\n    hideOpen();\r\n\r\n    jsbin.panels.hideAll();\r\n    return false;\r\n  });\r\n\r\n  var $lockrevision = $('div.lockrevision').on('click', function (event) {\r\n    event.preventDefault();\r\n    jsbin.saveChecksum = false;\r\n    jsbin.$document.trigger('locked');\r\n  }).on('mouseup', function () {\r\n    return false;\r\n  });\r\n\r\n  jsbin.$document.on('locked', function () {\r\n    if (!$lockrevision.data('locked')) {\r\n      analytics.lock();\r\n      $lockrevision.removeClass('icon-unlocked').addClass('icon-lock');\r\n      $lockrevision.html('<span>This bin is now locked from further changes</span>');\r\n      $lockrevision.data('locked', true);\r\n    }\r\n  });\r\n\r\n  // var $lockrevision = $('.lockrevision').on('click', function (event) {\r\n  // });\r\n\r\n  jsbin.$document.on('saved', function () {\r\n    $lockrevision.removeClass('icon-lock').addClass('icon-unlocked').data('locked', false);\r\n    $lockrevision.html('<span>Click to lock and prevent further changes</span>');\r\n  });\r\n\r\n  // TODO decide whether to remove this, since it definitely doesn't work!\r\n  // $('#share input[type=text], #share textarea').on('beforecopy', function (event) {\r\n  //   console.log(this, this.getAttribute('data-path'));\r\n  //   analytics.share('copy', this.getAttribute('data-path').substring(1) || 'output');\r\n  // });\r\n\r\n  if (!$('#sharemenu .share-split').length) {\r\n    var $panelCheckboxes = $('#sharepanels input[type=\"checkbox\"]').on('change', function () {\r\n      updateSavedState();\r\n    });\r\n    $('#sharemenu').bind('open', function () {\r\n      $panelCheckboxes.attr('checked', false);\r\n      jsbin.panels.getVisible().forEach(function (panel) {\r\n        $panelCheckboxes.filter('[data-panel=\"' + panel.id + '\"]').prop('checked', true).change();\r\n      });\r\n\r\n    });\r\n\r\n  }\r\n\r\n  var dropdownOpen = false,\r\n      onhover = false,\r\n      menuDown = false;\r\n\r\n  function opendropdown(el, nofocus) {\r\n    var menu;\r\n    if (!dropdownOpen) {\r\n      menu = $(el).closest('.menu').addClass('open').trigger('open');\r\n      // $body.addClass('menuinfo');\r\n      analytics.openMenu(el.hash.substring(1));\r\n      var input = menu.find(':text:visible:first');\r\n\r\n      if (input.length && !jsbin.mobile) {\r\n        input.focus();\r\n        setTimeout(function () {\r\n          input[0].select();\r\n        }, 0);\r\n      }\r\n      dropdownOpen = el;\r\n    }\r\n  }\r\n\r\n  function closedropdown() {\r\n    menuDown = false;\r\n    if (dropdownOpen) {\r\n      dropdownButtons.closest('.menu').removeClass('open').trigger('close');\r\n      // $body.removeClass('menuinfo');\r\n      dropdownOpen = false;\r\n      onhover = false;\r\n      var f = jsbin.panels.focused;\r\n      if (f && !jsbin.mobile) {\r\n        f.focus();\r\n        if (f.editor) {\r\n          f.editor.focus();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  var dropdownButtons = $('.button-dropdown, .button-open').mousedown(function (e) {\r\n    $dropdownLinks.removeClass('hover');\r\n    if (dropdownOpen && dropdownOpen !== this) {\r\n      closedropdown();\r\n    }\r\n    if (!dropdownOpen) {\r\n      menuDown = true;\r\n      opendropdown(this);\r\n    }\r\n    e.preventDefault();\r\n    return false;\r\n  }).mouseup(function () {\r\n    if (menuDown) return false;\r\n  }).click(function () {\r\n    if (!menuDown) {\r\n      analytics.closeMenu(this.hash.substring(1));\r\n      closedropdown();\r\n    }\r\n    if (menuDown) {\r\n      $(this.hash).attr('tabindex', 0);\r\n      menuDown = false;\r\n      return jsbin.mobile;\r\n    }\r\n\r\n    menuDown = false;\r\n\r\n    $(this.hash).attr('tabindex', -1);\r\n    return false;\r\n  });\r\n\r\n  $('#actionmenu').click(function () {\r\n    dropdownOpen = true;\r\n  });\r\n\r\n  var ignoreUp = false;\r\n  $body.bind('mousedown', function (event) {\r\n    if (dropdownOpen) {\r\n      if ($(event.target).closest('.menu').length) {\r\n        ignoreUp = true;\r\n      }\r\n    }\r\n  }).bind('click mouseup', function (event) {\r\n    if (dropdownOpen && !ignoreUp) {\r\n      if (!$(event.target).closest('.menu').length) {\r\n        closedropdown();\r\n        return false;\r\n      }\r\n    }\r\n    ignoreUp = false;\r\n  });\r\n\r\n  var fromClick = false;\r\n  var $dropdownLinks = $('.dropdownmenu a, .dropdownmenu .button').mouseup(function (e) {\r\n    if (e.target.nodeName === 'INPUT') {\r\n      return;\r\n    }\r\n\r\n    setTimeout(closedropdown, 0);\r\n    analytics.selectMenu(this.getAttribute('data-label') || this.hash.substring(1) || this.href);\r\n    if (!fromClick) {\r\n      if (this.hostname === window.location.hostname) {\r\n        if ($(this).triggerHandler('click') !== false) {\r\n          window.location = this.href;\r\n        }\r\n      } else {\r\n        if (this.getAttribute('target')) {\r\n          window.open(this.href);\r\n        } else {\r\n          window.location = this.href;\r\n        }\r\n      }\r\n    }\r\n    fromClick = false;\r\n  }).mouseover(function () {\r\n    $dropdownLinks.removeClass('hover');\r\n    $(this).addClass('hover');\r\n  }).mousedown(function (e) {\r\n    if (e.target.nodeName === 'INPUT') {\r\n      return;\r\n    }\r\n    fromClick = true;\r\n  });\r\n\r\n  $('#jsbinurl').click(function (e) {\r\n    setTimeout(function () {\r\n      jsbin.panels.named.live.hide();\r\n    }, 0);\r\n  });\r\n\r\n  $('#runwithalerts, li.run-with-js a').click(function (event, data) {\r\n    analytics.run(data);\r\n    if (editors.console.visible) {\r\n      editors.console.render(true);\r\n    } else {\r\n      renderLivePreview(true);\r\n    }\r\n    return false;\r\n  });\r\n\r\n  $('#runconsole').click(function () {\r\n    analytics.runconsole();\r\n    editors.console.render(true);\r\n    return false;\r\n  });\r\n\r\n  $('#clearconsole').click(function () {\r\n    jsconsole.clear();\r\n    return false;\r\n  });\r\n\r\n  $('#showhelp').click(function () {\r\n    $body.toggleClass('keyboardHelp');\r\n    keyboardHelpVisible = $body.is('.keyboardHelp');\r\n    if (keyboardHelpVisible) {\r\n      // analytics.help('keyboard');\r\n    }\r\n    return false;\r\n  });\r\n\r\n  $('a.toggle-side-nav').on(jsbin.mobile ? 'touchstart' : 'click', function () {\r\n    $body.toggleClass('show-nav');\r\n    sideNavVisible = $body.is('.show-nav');\r\n    if (!sideNavVisible && !jsbin.mobile) {\r\n      // we only focus the editor in desktop, otherwise the keyboard jumps up\r\n      $('#skipToEditor').click();\r\n    }\r\n    return sideNavVisible;\r\n  });\r\n\r\n\r\n  $('#showurls').click(function () {\r\n    $body.toggleClass('urlHelp');\r\n    urlHelpVisible = $body.is('.urlHelp');\r\n    if (urlHelpVisible) {\r\n      // analytics.urls();\r\n    }\r\n    return false;\r\n  });\r\n\r\n  $('.code.panel > .label > span.name').dblclick(function () {\r\n    jsbin.panels.allEditors(function (panel) {\r\n      var lineNumbers = !panel.editor.getOption('lineNumbers');\r\n      panel.editor.setOption('lineNumbers', lineNumbers);\r\n      jsbin.settings.editor.lineNumbers = lineNumbers;\r\n    });\r\n  });\r\n\r\n  $('a.createnew').click(function (event) {\r\n    event.preventDefault();\r\n    var i, key;\r\n    analytics.createNew();\r\n    // FIXME this is out and out [cr]lazy....\r\n    jsbin.panels.savecontent = function(){};\r\n    for (i = 0; i < store.sessionStorage.length; i++) {\r\n      key = store.sessionStorage.key(i);\r\n      if (key.indexOf('jsbin.content.') === 0) {\r\n        store.sessionStorage.removeItem(key);\r\n      }\r\n    }\r\n\r\n    // clear out the write checksum too\r\n    store.sessionStorage.removeItem('checksum');\r\n\r\n    jsbin.panels.saveOnExit = false;\r\n\r\n    // first try to restore their default panels\r\n    jsbin.panels.restore();\r\n\r\n    // if nothing was shown, show html & live\r\n    setTimeout(function () {\r\n      if (jsbin.panels.getVisible().length === 0) {\r\n        jsbin.panels.named.html.show();\r\n        jsbin.panels.named.live.show();\r\n      }\r\n      window.location = jsbin.root;\r\n    }, 0);\r\n  });\r\n\r\n  var $privateButton = $('#control a.visibilityToggle#private');\r\n  var $publicButton = $('#control a.visibilityToggle#public');\r\n\r\n  var $visibilityButtons = $('#control a.visibilityToggle').click(function(event) {\r\n    event.preventDefault();\r\n\r\n    var visibility = $(this).data('vis');\r\n\r\n    $.ajax({\r\n      url: jsbin.getURL({ withRevision: true }) + '/' + visibility,\r\n      type: 'post',\r\n      success: function (data) {\r\n\r\n        jsbin.$document.trigger('tip', {\r\n          type: 'notification',\r\n          content: 'This bin is now ' + visibility,\r\n          autohide: 6000\r\n        });\r\n\r\n        $visibilityButtons.css('display', 'none');\r\n\r\n        if (visibility === 'public') {\r\n          $privateButton.css('display', 'block');\r\n        } else {\r\n          $publicButton.css('display', 'block');\r\n        }\r\n\r\n      }\r\n    });\r\n  });\r\n\r\n  $('form.login').closest('.menu').bind('close', function () {\r\n    $(this).find('.loginFeedback').empty().hide();\r\n    $('#login').removeClass('forgot');\r\n  });\r\n\r\n  $('#lostpass').click(function (e) {\r\n    $('#login').addClass('forgot').find('input[name=email]').focus();\r\n    return false;\r\n  });\r\n\r\n  jsbin.settings.includejs = jsbin.settings.includejs === undefined ? true : jsbin.settings.includejs;\r\n\r\n  // ignore for embed as there might be a lot of embeds on the page\r\n  if (!jsbin.embed && store.sessionStorage.getItem('runnerPending')) {\r\n    jsbin.$document.trigger('tip', {\r\n      content: 'It looks like your last session may have crashed, so I\\'ve disabled \"Auto-run JS\" for you',\r\n      type: 'error',\r\n    });\r\n    store.sessionStorage.removeItem('runnerPending');\r\n    jsbin.settings.includejs = false;\r\n  }\r\n\r\n  $('#enablejs').change(function () {\r\n    jsbin.settings.includejs = this.checked;\r\n    analytics.enableLiveJS(jsbin.settings.includejs);\r\n    editors.live.render();\r\n  }).attr('checked', jsbin.settings.includejs);\r\n\r\n  if (!jsbin.embed && jsbin.settings.hideheader) {\r\n    $body.addClass('hideheader');\r\n  }\r\n\r\n  var cancelUp = false;\r\n  $('form input, form textarea').focus(function () {\r\n    this.select();\r\n    cancelUp = true;\r\n  }).mouseup(function () {\r\n    if (cancelUp) {\r\n      cancelUp = false;\r\n      return false;\r\n    }\r\n  });\r\n\r\n  if (window.location.hash) {\r\n    $('a[href$=\"' + window.location.hash + '\"]').mousedown();\r\n  }\r\n\r\n  var ismac = navigator.userAgent.indexOf(' Mac ') !== -1,\r\n      mackeys = {\r\n        'ctrl': '⌘',\r\n        'shift': '⇧',\r\n        'del': '⌫'\r\n      };\r\n\r\n  $('#control').find('a[data-shortcut]').each(function () {\r\n    var $this = $(this),\r\n        data = $this.data();\r\n\r\n    var key = data.shortcut;\r\n    if (ismac) {\r\n      key = key.replace(/ctrl/i, mackeys.ctrl).replace(/shift/, mackeys.shift).replace(/del/, mackeys.del).replace(/\\+/g, '').toUpperCase();\r\n    }\r\n\r\n    $this.append('<span class=\"keyshortcut\">' + key + '</span>');\r\n  });\r\n\r\n  (function () {\r\n\r\n  var re = {\r\n    head: /<head(.*)\\n/i,\r\n    meta: /<meta name=\"description\".*?>/i,\r\n    metaContent: /content=\".*?\"/i\r\n  };\r\n\r\n  var metatag = '<meta name=\"description\" content=\"[add your bin description]\">\\n';\r\n\r\n  $('#addmeta').click(function () {\r\n    // if not - insert\r\n    // <meta name=\"description\" content=\"\" />\r\n    // if meta description is in the HTML, highlight it\r\n    var editor = jsbin.panels.named.html,\r\n        cm = editor.editor,\r\n        html = editor.getCode();\r\n\r\n    if (!editor.visible) {\r\n      editor.show();\r\n    }\r\n\r\n    if (!re.meta.test(html)) {\r\n      if (re.head.test(html)) {\r\n        html = html.replace(re.head, '<head$1\\n' + metatag);\r\n      } else {\r\n        // slap in the top\r\n        html = metatag + html;\r\n      }\r\n    }\r\n\r\n    editor.setCode(html);\r\n\r\n    // now select the text\r\n    // editor.editor is the CM object...yeah, sorry about that...\r\n    var cursor = cm.getSearchCursor(re.meta);\r\n    cursor.findNext();\r\n\r\n    var contentCursor = cm.getSearchCursor(re.metaContent);\r\n    contentCursor.findNext();\r\n\r\n    var from = { line: cursor.pos.from.line, ch: cursor.pos.from.ch + '<meta name=\"description\" content=\"'.length },\r\n        to = { line: contentCursor.pos.to.line, ch: contentCursor.pos.to.ch - 1 };\r\n\r\n    cm.setCursor(from);\r\n    cm.setSelection(from, to);\r\n    cm.on('cursoractivity', function () {\r\n      cm.on('cursoractivity', null);\r\n      mark.clear();\r\n    });\r\n\r\n    var mark = cm.markText(from, to, { className: 'highlight' });\r\n\r\n    cm.focus();\r\n\r\n    return false;\r\n  });\r\n\r\n  $('a.publish-to-vanity').on('click', function (event) {\r\n    event.preventDefault();\r\n    analytics.publishVanity();\r\n\r\n    $.ajax({\r\n      type: 'post',\r\n      url: this.href,\r\n      data: { url: jsbin.getURL({ withRevision: true }) },\r\n      success: function () {\r\n        jsbin.$document.trigger('tip', {\r\n          type: 'notification',\r\n          content: 'This bin is now published to your vanity URL: <a target=\"_blank\" href=\"' + jsbin.shareRoot + '\">' + jsbin.shareRoot + '</a>'\r\n        });\r\n      },\r\n      error: function (xhr) {\r\n        jsbin.$document.trigger('tip', {\r\n          type: 'error',\r\n          content: 'There was a problem publishing to your vanity URL. Can you try again or file a <a target=\"_blank\" href=\"' + githubIssue() + '\">new issue</a>?'\r\n        });\r\n      }\r\n    })\r\n  });\r\n\r\n  jsbin.$document.on('click', 'a.deleteallbins', function () {\r\n    if (jsbin.user && jsbin.state.metadata.name === jsbin.user.name) {\r\n      if (confirm('Delete all snapshots of this bin including this one?')) {\r\n      analytics.deleteAll();\r\n      $.ajax({\r\n        type: 'post',\r\n        url: jsbin.getURL() + '/delete-all',\r\n        success: function () {\r\n          jsbin.state.deleted = true;\r\n          jsbin.$document.trigger('tip', {\r\n            type: 'error',\r\n            content: 'This bin and history is now deleted. You can continue to edit, but once you leave the bin can\\'t be retrieved'\r\n          });\r\n        },\r\n        error: function (xhr) {\r\n          if (xhr.status === 403) {\r\n            jsbin.$document.trigger('tip', {\r\n              content: 'You don\\'t own this bin, so you can\\'t delete it.',\r\n              autohide: 5000\r\n            });\r\n          }\r\n        }\r\n      });\r\n\r\n    }\r\n    } else {\r\n      jsbin.$document.trigger('tip', {\r\n        type: 'error',\r\n        content: 'You must be logged in <em><strong>the bin owner</strong></em> to delete all snapshots. <a target=\"_blank\" href=\"/help/delete-a-bin\">Need help?</a>'\r\n      });\r\n    }\r\n  });\r\n\r\n  $('a.deletebin').on('click', function (e) {\r\n    e.preventDefault();\r\n    if (confirm('Delete this bin?')) {\r\n      analytics['delete']();\r\n      $.ajax({\r\n        type: 'post',\r\n        url: jsbin.getURL({ withRevision: true }) + '/delete',\r\n        data: { checksum: jsbin.state.checksum },\r\n        success: function () {\r\n          jsbin.state.deleted = true;\r\n          jsbin.$document.trigger('tip', {\r\n            type: 'error',\r\n            content: 'This bin is now deleted. You can continue to edit, but once you leave the bin can\\'t be retrieved'\r\n          });\r\n        },\r\n        error: function (xhr) {\r\n          if (xhr.status === 403) {\r\n            jsbin.$document.trigger('tip', {\r\n              content: 'You don\\'t own this bin, so you can\\'t delete it.',\r\n              autohide: 5000\r\n            });\r\n          }\r\n        }\r\n      });\r\n\r\n    }\r\n  });\r\n\r\n  $('a.archivebin').on('click', function (e) {\r\n    e.preventDefault();\r\n    archive();\r\n  });\r\n\r\n  $('a.unarchivebin').on('click', function (e) {\r\n    e.preventDefault();\r\n    archive(false);\r\n  });\r\n\r\n  var $enableUniversalEditor = $('#enableUniversalEditor').on('change', function (e) {\r\n    e.preventDefault();\r\n\r\n    jsbin.settings.editor.simple = this.checked;\r\n    analytics.universalEditor(jsbin.settings.editor.simple);\r\n    settings.save(function () {\r\n      window.location.reload();\r\n    });\r\n  });\r\n\r\n  if (jsbin.settings.editor.simple) {\r\n    $enableUniversalEditor.prop('checked', true);\r\n  }\r\n\r\n  $('#skipToEditor').on('click keypress', function () {\r\n    var first = (jsbin.panels.getVisible() || ['html']).shift();\r\n    if (jsbin.settings.editor.simple || jsbin.mobile) {\r\n      $('#' + first.id).focus();\r\n    } else if (first) {\r\n      first.editor.focus();\r\n    } else {\r\n      jsbin.panels.named.html.editor.focus();\r\n    }\r\n    return false;\r\n  });\r\n\r\n  }());\r\n\r\n});\ndefine('skylark-jsbin-client/chrome/file-drop',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n  function allowDrop(holder) {\r\n    var cursorPosition = null;\r\n    var panel = null;\r\n\r\n    var guid = (function() {\r\n    function s4() {\r\n      return Math.floor((1 + Math.random()) * 0x10000)\r\n        .toString(16)\r\n        .substring(1);\r\n      }\r\n      return function() {\r\n        return s4() + s4();\r\n      };\r\n    })();\r\n\r\n    function uploadAsset(file) {\r\n      var loading = document.createElement('div');\r\n      loading.className = 'assetLoading';\r\n      loading.innerHTML = '0% uploading...';\r\n      var currentStatus = 0;\r\n\r\n      var progress = function progress(percent, status) {\r\n        if (percent - currentStatus < 10) {\r\n          currentStatus = percent;\r\n        } else {\r\n          currentStatus += 10;\r\n          requestAnimationFrame(function () {\r\n            progress(percent, status);\r\n          });\r\n        }\r\n\r\n        if (loading && currentStatus > 0) {\r\n          if (currentStatus > 97) {\r\n            loading.innerHTML = '97% uploaded...';\r\n            // because there's some lag between 100% and actually rendering\r\n          } else {\r\n            loading.innerHTML = currentStatus + '% uploaded...';\r\n          }\r\n        }\r\n      };\r\n\r\n      var widget = null;\r\n      var insertPosition = cursorPosition || panel.getCursor();\r\n      if (!jsbin.lameEditor) {\r\n        var line = cursorPosition ? cursorPosition.line : panel.getCursor().line;\r\n        widget = panel.addLineWidget(line, loading, {coverGutter: false, nohscroll: true});\r\n      } else {\r\n        insertTextArea(panel, 'Uploading ...', true);\r\n      }\r\n\r\n      var s3upload = new S3Upload({\r\n        s3_sign_put_url: '/account/assets/sign',\r\n        s3_object_name: file.name.replace(/\\s+/g, '-'),\r\n        files: [file],\r\n\r\n        onProgress: function (percent, status) {\r\n          if (!jsbin.lameEditor) {\r\n            requestAnimationFrame(function () {\r\n              progress(percent, status);\r\n            });\r\n          }\r\n        },\r\n\r\n        onError: function (reason, fromServer) {\r\n          currentStatus = -1;\r\n          console.error('Failed to upload: ' + fromServer);\r\n          loading.innerHTML = fromServer || 'Failed to complete';\r\n          loading.style.color = 'red';\r\n          panel = null;\r\n          cursorPosition = null;\r\n          if (widget) {\r\n            setTimeout(function () {\r\n              widget.clear();\r\n            }, 4000);\r\n          }\r\n        },\r\n\r\n        onFinishS3Put: function (url) {\r\n          if (!jsbin.lameEditor) {\r\n            widget.clear();\r\n            panel.replaceRange(getInsertText(file.type, panel, url), insertPosition);\r\n          } else {\r\n            insertTextArea(panel, getInsertText(file.type, panel, url));\r\n            $(document).trigger('codeChange', { panelId: panel.id });\r\n          }\r\n          panel = null;\r\n          cursorPosition = null;\r\n        }\r\n      });\r\n    }\r\n\r\n    function insertTextArea(el, string, select) {\r\n      var start = el.selectionStart;\r\n      var end = el.selectionEnd;\r\n\r\n      var target = el;\r\n      var value = target.value;\r\n\r\n      // set textarea value to: text before caret + tab + text after caret\r\n      target.value = value.substring(0, start) + string + value.substring(end);\r\n\r\n      // put caret at right position again (add one for the tab)\r\n      el.selectionStart = el.selectionEnd = start + 1;\r\n\r\n      if (select) {\r\n        el.selectionStart -= 1;\r\n        el.selectionEnd = el.selectionEnd + string.length;\r\n      } else {\r\n        el.selectionStart = el.selectionEnd = start + string.length;\r\n      }\r\n    }\r\n\r\n    function getInsertText(mime, cm, url) {\r\n      // var panel = jsbin.panels.panels[cm.id];\r\n      var processor = jsbin.state.processors[cm.id];\r\n\r\n      if (cm.id === 'html') {\r\n        if (mime.indexOf('image/') === 0) {\r\n          if (processor === 'markdown') {\r\n            return '![' + url + '](' + url + ')';\r\n          }\r\n\r\n          if (processor === 'jade') {\r\n            return 'img(src=\"' + url + '\")';\r\n          }\r\n\r\n          return '<img src=\"' + url + '\">';\r\n        }\r\n\r\n        return url;\r\n      }\r\n\r\n      if (cm.id === 'css') {\r\n        if (mime.indexOf('image/') === 0) {\r\n          return 'url(' + url + ')';\r\n        }\r\n\r\n        return url;\r\n      }\r\n\r\n      // note: js just gets the url...\r\n      return url;\r\n    }\r\n\r\n    var dragging = false;\r\n\r\n    holder.ondragover = function () {\r\n      dragging = true;\r\n      return false;\r\n    };\r\n\r\n    holder.ondragend = function () {\r\n      dragging = false;\r\n      return false;\r\n    };\r\n\r\n    function getFileData(item) {\r\n      return new Promise(function (resolve, reject) {\r\n        if (item.kind === 'string') {\r\n          item.getAsString(function (filename) {\r\n            resolve(filename);\r\n          });\r\n        } else {\r\n          resolve(item.getAsFile());\r\n        }\r\n      });\r\n    }\r\n\r\n    $('#bin textarea').on('paste', function (jQueryEvent) {\r\n      if ($(this).closest('.CodeMirror').length) {\r\n        panel = $(this).closest('.CodeMirror')[0].CodeMirror;\r\n      } else {\r\n        panel = this;\r\n      }\r\n\r\n      var event = jQueryEvent.originalEvent;\r\n      var items = event.clipboardData.items;\r\n\r\n      // this means we've copied a file that's an app icon, or it's just text\r\n      // which we don't want to kick in anyway.\r\n      if (!items || event.clipboardData.types[0].indexOf('text/') === 0) {\r\n        return;\r\n      }\r\n\r\n      var file = null;\r\n      var promises = [];\r\n      for (var i = 0; i < items.length; i++) {\r\n        promises.push(getFileData(items[i]));\r\n      }\r\n\r\n      Promise.all(promises).then(function (data) {\r\n        var blobname = data.sort(function (a, b) {\r\n          return typeof a === 'string' ? 1 : -1;\r\n        });\r\n        var file = data[0];\r\n        file.name = data[1] || guid() + '.' + file.type.split('/')[1];\r\n\r\n        uploadAsset(file);\r\n      }).catch(function (error) {\r\n        console.log(error.stack);\r\n      });\r\n\r\n      // FIXME???\r\n      jQueryEvent.preventDefault();\r\n    });\r\n\r\n    $('.CodeMirror').on('mousemove', function (e) {\r\n      if (!dragging) {\r\n        return;\r\n      }\r\n\r\n      panel = this.CodeMirror;\r\n      cursorPosition = this.CodeMirror.coordsChar({ top: event.y, left: event.x });\r\n      this.CodeMirror.setCursor(cursorPosition);\r\n    });\r\n\r\n    var jstypes = ['javascript', 'coffeescript', 'coffee', 'js'];\r\n    var csstypes = ['css', 'less', 'sass', 'scss'];\r\n    var htmltypes = ['html', 'markdown', 'plain'];\r\n\r\n    holder.ondrop = function (e) {\r\n      dragging = false;\r\n      e.preventDefault();\r\n\r\n      if ($(e.target).closest('.CodeMirror').length) {\r\n        panel = $(e.target).closest('.CodeMirror')[0].CodeMirror;\r\n      } else {\r\n        panel = e.target;\r\n      }\r\n\r\n      var file = e.dataTransfer.files[0],\r\n          reader = new FileReader();\r\n\r\n      if (file.type.indexOf('text/') !== 0) {\r\n        // this isn't a text file for populating the panel, try uploading instead\r\n        uploadAsset(file);\r\n        return;\r\n      }\r\n\r\n      reader.onload = function (event) {\r\n        // put JS in the JavaScript panel\r\n        var type = file.type ? file.type.toLowerCase().replace(/^(text|application)\\//, '') : file.name.toLowerCase().replace(/.*\\./g, ''),\r\n            panelId = null,\r\n            panel = editors[panelId],\r\n            syncCode = event.target.result,\r\n            scroller = null;\r\n\r\n        if (jstypes.indexOf(type) !== -1) {\r\n          panelId = 'javascript';\r\n        } else if (csstypes.indexOf(type) !== -1) {\r\n          panelId = 'css';\r\n        } else if (htmltypes.indexOf(type) !== -1) {\r\n          panelId = 'html';\r\n        }\r\n\r\n        if (panelId === null) {\r\n          // then we have an asset upload\r\n          return uploadAsset(file);\r\n        }\r\n\r\n        panel = editors[panelId];\r\n        scroller = panel.editor.scroller;\r\n\r\n        panel.setCode(event.target.result);\r\n        panel.show();\r\n\r\n        try {\r\n          // now kick off - basically just doing a copy and paste job from @wookiehangover - thanks man! :)\r\n          var worker = new Worker(jsbin['static'] + '/js/editors/sync-worker.js');\r\n\r\n          // pass the worker the file object\r\n          worker.postMessage(file);\r\n\r\n          panel.$el.find('> .label').append('<small> (live: edit & save in your fav editor)</small>');\r\n\r\n          // bind onmessage handler\r\n          worker.onmessage = function (event) {\r\n            var top = scroller.scrollTop;\r\n            panel.setCode(event.data.body);\r\n            scroller.scrollTop = top;\r\n            syncCode = event.data.body;\r\n          };\r\n        } catch (e) {\r\n          // fail on the awesomeness...oh well\r\n        }\r\n      };\r\n\r\n      reader.readAsText(file);\r\n\r\n      return false;\r\n    };\r\n  }\r\n\r\n  // test for dnd and file api first\r\n  if (!!(window.File && window.FileList && window.FileReader)) {\r\n    allowDrop(document.body);\r\n  }\r\n});\ndefine('skylark-jsbin-client/chrome/gist',[\r\n  \"skylark-jquery\",\r\n  \"skylark-jsbin-coder/editors/panels\",\r\n   \"../jsbin\"\r\n],function ($,panels,jsbin) {\r\n    /*global $:true, jsbin:true, processors:true, $document*/\r\n    'use strict';\r\n\r\n    // Only allow gist import/export if CORS is supported\r\n    var CORS = !!('withCredentials' in new XMLHttpRequest() ||\r\n                  typeof XDomainRequest !== 'undefined');\r\n    if (!CORS) {\r\n      return $(function () {\r\n        $('#export-as-gist').remove();\r\n      });\r\n    }\r\n\r\n    var Gist = function (id) {\r\n      var gist = this,\r\n          token = '';\r\n      gist.code = {};\r\n      if (jsbin.user && jsbin.user.github_token) { // jshint ignore:line\r\n        token = '?access_token=' + jsbin.user.github_token; // jshint ignore:line\r\n      }\r\n      $.get('https://api.github.com/gists/' + id + token, function (data) {\r\n        if (!data) {return;}\r\n        $.each(data.files, function (fileName, fileData) {\r\n          var ext = fileName.split('.').slice(-1).join('');\r\n          gist.code[ext] = fileData.content;\r\n        });\r\n        gist.setCode();\r\n      });\r\n      return this;\r\n    };\r\n\r\n    Gist.prototype.setCode = function () {\r\n      var gist = this;\r\n      $.each(gist.code, function (ext, data) {\r\n        var processorInit = jsbin.processors.findByExtension(ext),\r\n            target = processorInit.target || processorInit.id,\r\n            panel = panels.named[target];\r\n        if (!panel) {return;}\r\n        processors.set(target, processorInit.id);\r\n        jsbin.saveDisabled = true;\r\n        panel.setCode(data);\r\n        jsbin.saveDisabled = false;\r\n      });\r\n    };\r\n\r\n    /**\r\n     * Export as gist\r\n     */\r\n\r\n    $('a.export-as-gist').click(function () {\r\n      var gist = {\r\n        public: true,\r\n        files: {}\r\n      };\r\n\r\n      var panels = {\r\n        html: panels.named.html.render(),\r\n        javascript: panels.named.javascript.render(),\r\n        css: panels.named.css.render()\r\n      };\r\n\r\n      Promise.all(panels).then(function (panels) { // RSVP.hash\r\n        // Build a file name\r\n        Object.keys(panels).forEach(function (key) {\r\n          var ext = processors[key].extensions ? processors[key].extensions[0] : key;\r\n          var file = ['jsbin', (jsbin.state.code || 'untitled'), ext].join('.');\r\n          if (panels[key].length) {\r\n            gist.files[file] = {\r\n              content: panels[key]\r\n            };\r\n          }\r\n        });\r\n\r\n        if (!gist.files.javascript && !gist.files.css) {\r\n          delete gist.files[['jsbin', (jsbin.state.code || 'untitled'), 'html'].join('.')]\r\n        }\r\n\r\n        if (jsbin.state.processors) {\r\n          panels.source = jsbin.state.processors;\r\n          Object.keys(panels.source).forEach(function (key) {\r\n            panels.source[key] = jsbin.panels.panels[key].getCode();\r\n          });\r\n        }\r\n\r\n        var index = binToFile(panels);\r\n\r\n        gist.files['index.html'] = {\r\n          content: index\r\n        };\r\n\r\n        var desc = [];\r\n\r\n        if (jsbin.state.title) {\r\n          desc.push(jsbin.state.title);\r\n        }\r\n\r\n        if (jsbin.state.description) {\r\n          desc.push(jsbin.state.description);\r\n        }\r\n\r\n        desc.push('// source ' + jsbin.getURL());\r\n\r\n        gist.description = desc.join('\\n\\n');\r\n\r\n        var token = '';\r\n        if (jsbin.user && jsbin.user.github_token) { // jshint ignore:line\r\n          token = '?access_token=' + jsbin.user.github_token; // jshint ignore:line\r\n        }\r\n\r\n        $.ajax({\r\n          type: 'POST',\r\n          url: 'https://api.github.com/gists' + token,\r\n          data: JSON.stringify(gist),\r\n          dataType: 'json',\r\n          crossDomain: true,\r\n          success: function (data) {\r\n            jsbin.$document.trigger('tip', {\r\n              type: 'notification',\r\n              content: 'Gist created! <a href=\"' + data.html_url + '\" target=\"_blank\">Open in new tab.</a>' // jshint ignore:line\r\n            });\r\n          },\r\n          error: function (xhr, status, error) {\r\n            jsbin.$document.trigger('tip', {\r\n              type: 'error',\r\n              content: 'There was a problem creating the gist: ' + error\r\n            });\r\n            console.group('gist');\r\n            console.log(gist);\r\n            console.groupEnd('gist');\r\n          }\r\n        });\r\n      }, function (error) {\r\n        console.error(error.stack);\r\n      });\r\n\r\n      // return false becuase there's weird even stuff going on. ask @rem.\r\n      return false;\r\n    });\r\n\r\n    return Gist;\r\n\r\n\r\n});\ndefine('skylark-jsbin-client/chrome/spinner',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n  function spinner(element) {\r\n    'use strict';\r\n    var c = element || document.createElement('canvas');\r\n    if (!c.getContext) {\r\n      return false;\r\n    }\r\n    var ctx = c.getContext('2d');\r\n\r\n    var rafID = null;\r\n\r\n    c.height = c.width = 11;\r\n\r\n    var TORADIAN = Math.PI / 180;\r\n    var w = c.width;\r\n    var h = c.height;\r\n    var deg = 0;\r\n    var r = 4;\r\n    var speed = 4;\r\n    var tailspeed = 1/7;\r\n\r\n    ctx.strokeStyle = 'rgba(0,0,0,.5)';\r\n    ctx.lineWidth = 1.5;\r\n\r\n    var last = true;\r\n    function draw() {\r\n      rafID = window.requestAnimationFrame(draw);\r\n\r\n      deg += speed;\r\n\r\n      var start = ((deg * tailspeed)) % 360; // A / TAIL\r\n      var end = deg % 360;              // B / HEAD\r\n      var flip = end === start;\r\n\r\n      if (flip) {\r\n        last = !last;\r\n        // this prevents a single blank frame when\r\n        // the start and end have the same value\r\n        start -= 1;\r\n      }\r\n\r\n      ctx.fillStyle = '#f9f9f9';\r\n      ctx.strokeStyle = '#111';\r\n      ctx.fillRect(w/2 - r*2, h/2 - r*2, r * 4, r * 4);\r\n      ctx.beginPath();\r\n      ctx.arc(w/2 + 0.5, h/2 + 0.5, r, start * TORADIAN, end * TORADIAN, last);\r\n      ctx.stroke();\r\n\r\n      ctx.strokeStyle = '#999';\r\n      ctx.beginPath();\r\n      ctx.arc(w/2 + 0.5, h/2 + 0.5, r, end * TORADIAN, start * TORADIAN, last);\r\n      ctx.stroke();\r\n\r\n      ctx.closePath();\r\n\r\n    }\r\n\r\n    return {\r\n      element: c,\r\n      start: draw,\r\n      stop: function () {\r\n        window.cancelAnimationFrame(rafID);\r\n      }\r\n    };\r\n  }\r\n\r\n  return jsbin.spinner = spinner;\r\n});\ndefine('skylark-jsbin-client/chrome/infocard',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\",\r\n   \"./analytics\"\r\n],function ($,jsbin,analytics) {\r\n  if ('EventSource' in global) {\r\n    return setupInfocard()\r\n  } else {\r\n    $.getScript(jsbin['static'] + '/js/vendor/eventsource.js', setupInfocard);\r\n  }\r\n  function setupInfocard() {\r\n    /*global spinner, $, jsbin, prettyDate, EventSource, throttle, $document, analytics, throttle*/\r\n    'use strict';\r\n\r\n    // don't insert this on embeded views\r\n    if (jsbin.embed) {\r\n      return;\r\n    }\r\n\r\n    var $template = $('#infocard'); // donkey way of cloning from template\r\n    var $header = $template.find('header');\r\n    var canvas = $header.find('canvas')[0];\r\n    var s = spinner(canvas);\r\n    var htmlpanel = jsbin.panels.named.html;\r\n    var viewers = 0;\r\n    var es = null;\r\n\r\n    var re = {\r\n      head: /<head(.*)\\n/i,\r\n      meta: /(<meta name=\"description\" content=\")([^\"]*)/im,\r\n      title: /<title>(.*)<\\/title>/im\r\n    };\r\n\r\n    if ($template.length === 0) {\r\n      return;\r\n    }\r\n\r\n\r\n\r\n    function updateStats(event, _data) {\r\n      var data = _data ? JSON.parse(_data) : JSON.parse(event.data);\r\n\r\n      if (data.connections > 0 && viewers === 0) {\r\n        $template.addClass('viewers');\r\n      }\r\n\r\n      if (viewers !== data.connections) {\r\n        var $b = $header.find('.viewers b').removeClass('up down').html('<b>' + data.connections + '<br>' + viewers + '<br>' + data.connections + '</b>'),\r\n            c = viewers > data.connections ? 'down' : 'up';\r\n        setTimeout(function () {\r\n          $b.addClass(c);\r\n        }, 0);\r\n      }\r\n\r\n      viewers = data.connections;\r\n\r\n      if (viewers === 0) {\r\n        setTimeout(function () {\r\n          $template.removeClass('viewers');\r\n        }, 250);\r\n      }\r\n\r\n    }\r\n\r\n    function listenStats(owner) {\r\n      if (window.EventSource && owner) {\r\n        // TODO use pagevisibility api to close connection\r\n        if (es) {\r\n          es.close();\r\n        }\r\n        es = new EventSource(jsbin.getURL() + '/stats?checksum=' + jsbin.state.checksum);\r\n        es.addEventListener('stats', jsbin.throttle(updateStats, 1000));\r\n      }\r\n    }\r\n\r\n    function insertTag(tag) {\r\n      var cm = htmlpanel.editor;\r\n      var html = htmlpanel.getCode();\r\n\r\n      if (tag === 'meta') {\r\n        tag = 'meta name=\"description';\r\n      }\r\n\r\n\r\n      if (html.indexOf('<' + tag) === -1) {\r\n        var userhtml = getPanelText(tag === 'title' ? 'title' : 'description', '');\r\n        if (re.head.test(html)) {\r\n          html = html.replace(re.head, '<head$1\\n' + userhtml);\r\n        } else {\r\n          // slap in the top\r\n          html = userhtml + html;\r\n        }\r\n        htmlpanel.setCode(html);\r\n      }\r\n    }\r\n\r\n    function getPanelText(type, text) {\r\n      var processor = jsbin.state.processors.html;\r\n\r\n      text = text.replace(/\"/g, '&quot;');\r\n\r\n      if (type === 'title') {\r\n        if (processor === 'jade') {\r\n          return 'title ' + text + '\\n';\r\n        }\r\n\r\n        return '<title>' + text + '</title>\\n';\r\n      }\r\n\r\n      if (type === 'description') {\r\n        if (processor === 'jade') {\r\n          return 'meta(name=\"description\", content=\"' + text + '\")\\n';\r\n        }\r\n\r\n        return '<meta name=\"description\" content=\"' + text + '\">\\n';\r\n      }\r\n\r\n      return text;\r\n    }\r\n\r\n\r\n    if ($template.find('.settings')) {\r\n      $template.find('#title').on('input', function () {\r\n        insertTag('title');\r\n        var html = htmlpanel.getCode();\r\n        var value = this.value;\r\n        var result = html.replace(re.title, function (all, capture) {\r\n          return '<title>' + value.replace(/</g, '&lt;').replace(/>/g, '&gt;') + '</title>';\r\n        });\r\n        updateCode(result);\r\n        jsbin.state.updateSettings({ title: this.value });\r\n      });\r\n\r\n      $template.find('#description').on('input', function () {\r\n        insertTag('meta');\r\n        var html = htmlpanel.getCode();\r\n        var value = this.value;\r\n        var result = html.replace(re.meta, function (all, capture) {\r\n          return capture + value.replace(/\"/g, '&quot;');\r\n        });\r\n        updateCode(result);\r\n        jsbin.state.updateSettings({ description: this.value });\r\n      });\r\n    }\r\n\r\n    function updateCode(result) {\r\n      // capture selection and cursor\r\n      var state = null;\r\n      var cursor = null;\r\n      var cm = htmlpanel.editor;\r\n      var selected = cm.somethingSelected();\r\n      if (jsbin.panels.named.html.visible) {\r\n        if (selected) {\r\n          state = cm.listSelections();\r\n        }\r\n        cursor = cm.getCursor();\r\n      }\r\n\r\n      htmlpanel.setCode(result);\r\n\r\n      // then restore\r\n      if (jsbin.panels.named.html.visible) {\r\n        if (!jsbin.mobile) cm.setCursor(cursor);\r\n        if (selected) {\r\n          cm.setSelections(state);\r\n        }\r\n      }\r\n    }\r\n\r\n    function updateInfoCard(event) {\r\n      var meta = jsbin.state.metadata || {};\r\n      var classes = [];\r\n      var owner = false;\r\n\r\n      if (meta.name) {\r\n        $header.find('.name b').html(meta.name);\r\n        $header.find('img').attr('src', meta.avatar);\r\n        classes.push(meta.name);\r\n      }\r\n\r\n      if (jsbin.state.checksum || (jsbin.user && (meta.name === jsbin.user.name))) {\r\n        owner = true;\r\n        classes.push('author');\r\n      }\r\n\r\n      if (s) {\r\n        s.stop();\r\n      }\r\n\r\n      if (!jsbin.state.streaming || owner === true) {\r\n        $header.find('time').html(event ? 'just now' : prettyDate(meta.last_updated));\r\n      } else if (owner === false) {\r\n        $header.find('time').html('Streaming');\r\n        classes.push('streaming');\r\n        if (s) {\r\n          s.start();\r\n        }\r\n      }\r\n\r\n      if (!jsbin.checksum) {\r\n        classes.push('meta');\r\n      }\r\n\r\n      if (meta.pro) {\r\n        classes.push('pro');\r\n      }\r\n\r\n      $header.find('.visibility').text(meta.visibility);\r\n\r\n      if (meta.visibility === 'private') {\r\n        classes.push('private');\r\n      } else if (meta.visibility === 'public') {\r\n        classes.push('public');\r\n      } // TODO handle team\r\n\r\n      if (jsbin.state.code) {\r\n        $template.addClass(classes.join(' ')).parent().removeAttr('hidden');\r\n      }\r\n\r\n      if (jsbin.state.streaming) {\r\n        if (window.EventSource && owner) {\r\n          listenStats(owner);\r\n          handleVisibility(owner);\r\n          var url = jsbin.getURL();\r\n          jsbin.$document.on('saved', function () {\r\n            var newurl = window.location.toString();\r\n            if (url !== newurl) {\r\n              es.close();\r\n              listenStats(owner);\r\n            }\r\n          });\r\n        } else if (jsbin.saveDisabled === true && window.location.pathname.slice(-5) === '/edit') {\r\n          $.getScript(jsbin.static + '/js/spike.js?' + jsbin.version);\r\n          jsbin.$document.on('stats', jsbin.throttle(updateStats, 1000));\r\n        }\r\n      }\r\n    }\r\n\r\n    function handleVisibility(owner) {\r\n      var hiddenProperty = 'hidden' in document ? 'hidden' :\r\n        'webkitHidden' in document ? 'webkitHidden' :\r\n        'mozHidden' in document ? 'mozHidden' :\r\n        null;\r\n      var visibilityStateProperty = 'visibilityState' in document ? 'visibilityState' :\r\n        'webkitVisibilityState' in document ? 'webkitVisibilityState' :\r\n        'mozVisibilityState' in document ? 'mozVisibilityState' :\r\n        null;\r\n\r\n      if (visibilityStateProperty) {\r\n        var visibilityChangeEvent = hiddenProperty.replace(/hidden/i, 'visibilitychange');\r\n        document.addEventListener(visibilityChangeEvent, function visibilityChangeEvent() {\r\n          if (document[hiddenProperty]) { // hidden\r\n            es.close();\r\n          } else {\r\n            listenStats(owner);\r\n          }\r\n        });\r\n      }\r\n    }\r\n\r\n    function initHandlers() {\r\n      $('a.more').add($header).on('mousedown touchstart', function (e) {\r\n        infocardVisible = !infocardVisible; // this is hack :-\\\r\n        hideOpen();\r\n        e.preventDefault();\r\n        analytics.infocard('click', 'no-result');\r\n        var toTrigger;\r\n        $template.toggleClass(function (index, klass) {\r\n          toTrigger = klass.indexOf('open') === -1 ? 'open' : 'close';\r\n          infocardVisible = toTrigger === 'open';\r\n          return 'open';\r\n        }).trigger(toTrigger);\r\n      });\r\n\r\n      $template.one('open', function () {\r\n        var statusCode = $('#status').data('status') || 200;\r\n        $.getJSON(jsbin.static + '/js/http-codes.json', function (codes) {\r\n          var html = '';\r\n          codes.forEach(function (code) {\r\n            html += '<option value=\"' + code.code + '\">' + code.string + '</option>';\r\n          });\r\n          $('#status').html(html).val(statusCode).on('change', function () {\r\n            jsbin.state.updateSettings({ statusCode: this.value });\r\n          });\r\n        });\r\n      }).on('close', function () {\r\n\r\n      });\r\n\r\n      function updateHeaders() {\r\n        // grab all the headers with values and send that instead\r\n        var headers = {};\r\n        $template.find('.row').each(function () {\r\n          if ($(this).find('[name=\"header-value\"]').val().trim()) {\r\n            headers[$(this).find('input:first').val()] = $(this).find('input:last').val();\r\n          }\r\n        });\r\n\r\n        jsbin.state.updateSettings({ headers: headers }, 'PUT');\r\n      }\r\n\r\n      var $headers = $template.find('#headers');\r\n      $template.on('click', '#headers button', function (event) {\r\n        event.preventDefault();\r\n        var $fields = $headers.find('span:last');\r\n        updateHeaders();\r\n\r\n        var $clones = $fields.clone(true);\r\n        $fields.before($clones);\r\n        $fields.find('input').val('').eq(0).focus();\r\n      });\r\n\r\n      $template.on('input', '.row input', function () {\r\n        updateHeaders($(this).closest('.row'));\r\n      });\r\n    }\r\n\r\n    initHandlers();\r\n    updateInfoCard();\r\n    $document.bind('saved', updateInfoCard);\r\n  }\r\n});\r\n\ndefine('skylark-jsbin-client/chrome/last-bin',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n  'use strict';\r\n\r\n  function getExpires() {\r\n    var d = new Date();\r\n\r\n    // expires in 1 hour from now\r\n    d.setTime(+d + 1000 * 60 * 60);\r\n    return d.toUTCString();\r\n  }\r\n\r\n  function save() {\r\n    var url = window.location.href;\r\n    if (url) {\r\n      document.cookie = 'last=' + encodeURIComponent(url) + '; expires=' + getExpires() + '; path=/';\r\n    } else {\r\n      // expire cookie\r\n      document.cookie = 'last=\"\"; expires=-1; path=/';\r\n    }\r\n  }\r\n\r\n  function readCookie(name) {\r\n    var nameEQ = name + '=';\r\n    var ca = document.cookie.split(';');\r\n    for(var i=0;i < ca.length;i++) {\r\n      var c = ca[i];\r\n      while (c.charAt(0)==' ') c = c.substring(1,c.length);\r\n      if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);\r\n    }\r\n    return null;\r\n  }\r\n\r\n  function updateBackButton() {\r\n    var el = document.getElementById('back');\r\n    var back = readCookie('last');\r\n\r\n    if (el && back !== null && back !== '%2Fedit') {\r\n      el.href = decodeURIComponent(back);\r\n    }\r\n  }\r\n\r\n  // save the bin url when the bin is saved, changed and when we load first time\r\n  if (jsbin && jsbin.getURL) {\r\n    jsbin.$document.on('saved', save);\r\n    save();\r\n  } else {\r\n    updateBackButton();\r\n  }\r\n});\ndefine('skylark-jsbin-client/chrome/transfer',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n   var $transfers = $('a.transfer').on('click', function (event) {\r\n      event.preventDefault();\r\n      var to = prompt('Enter the username to transfer this bin to');\r\n      to = (to || '').trim().toLowerCase();\r\n\r\n      if (to.length) {\r\n        $.ajax({\r\n          url: jsbin.getURL({ withRevision: true }) + '/transfer',\r\n          method: 'post',\r\n          data: {\r\n            to: to,\r\n            _csrf: jsbin.state.token,\r\n          },\r\n          success: function () {\r\n            window.location.reload();\r\n          },\r\n          error: function (e) {\r\n            console.log(e);\r\n            if (e.status === 403) {\r\n              alert('This bin cannot be transferred as you do not own it.');\r\n            } else if (e.status === 400) {\r\n              alert('The user \"' + to + '\" couldn\\'t be found, sorry.');\r\n            } else {\r\n              alert('Failed to transfer bin');\r\n            }\r\n          }\r\n        });\r\n      }\r\n\r\n    });\r\n\r\n    var updateTransfer = function () {\r\n      if (jsbin.owner()) {\r\n        $transfers.show();\r\n      } else {\r\n        $transfers.hide();\r\n      }\r\n    }\r\n\r\n    ///updateTransfer();\r\n\r\n    return updateTransfer;\r\n});\ndefine('skylark-jsbin-client/chrome/welcome-panel',[\r\n  \"skylark-jquery\",\r\n  \"skylark-jsbin-base/storage\",\r\n   \"../jsbin\",\r\n   \"./analytics\"\r\n],function ($,store,jsbin,analytics) {\r\n    /*global jsbin, $, $body, $document, analytics, settings*/\r\n    'use strict';\r\n\r\n    if (!$('#toppanel').length) {\r\n      return;\r\n    }\r\n\r\n    if (jsbin.settings.gui === undefined) {\r\n      jsbin.settings.gui = {};\r\n    }\r\n    if (jsbin.settings.gui.toppanel === undefined) {\r\n      jsbin.settings.gui.toppanel = true;\r\n      store.localStorage.setItem('settings', JSON.stringify(jsbin.settings));\r\n    }\r\n\r\n    if ($body.hasClass('toppanel') && jsbin.settings.gui.toppanel === false) {\r\n      jsbin.$body.addClass('toppanel-close');\r\n      jsbin.$body.removeClass('toppanel');\r\n    }\r\n\r\n    // analytics for panel state\r\n    analytics.welcomePanelState(jsbin.settings.gui.toppanel);\r\n\r\n    var removeToppanel = function() {\r\n      jsbin.settings.gui.toppanel = false;\r\n      settings.save();\r\n      jsbin.$body.addClass('toppanel-close');\r\n      jsbin.$body.removeClass('toppanel');\r\n\r\n      // $document.trigger('sizeeditors');\r\n    };\r\n\r\n    var showToppanel = function() {\r\n      jsbin.settings.gui.toppanel = true;\r\n      settings.save();\r\n      jsbin.$body.removeClass('toppanel-close');\r\n      jsbin.$body.addClass('toppanel');\r\n    };\r\n\r\n    var goSlow = function(e) {\r\n      jsbin.$body.removeClass('toppanel-slow');\r\n      if (e.shiftKey) {\r\n        jsbin.$body.addClass('toppanel-slow');\r\n      }\r\n    };\r\n\r\n    $('.toppanel-logo').on('webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend', function(e) {\r\n      jsbin.$document.trigger('sizeeditors');\r\n    });\r\n\r\n    $('.toppanel-hide').click(function(event) {\r\n      event.preventDefault();\r\n      goSlow(event);\r\n      removeToppanel();\r\n    });\r\n    $('.toppanel-logo').click(function(event) {\r\n      event.preventDefault();\r\n      goSlow(event);\r\n      showToppanel();\r\n    });\r\n    // $document.keydown(function (event) {\r\n    //   if (event.which === 27) {\r\n    //     if ($body.hasClass('toppanel')) {\r\n    //       removeToppanel();\r\n    //     }\r\n    //   }\r\n    // });\r\n\r\n    function shuffle(array) {\r\n      var m = array.length, t, i;\r\n\r\n      // While there remain elements to shuffle...\r\n      while (m) {\r\n\r\n        // Pick a remaining element...\r\n        i = Math.floor(Math.random() * m--);\r\n\r\n        // And swap it with the current element.\r\n        t = array[m];\r\n        array[m] = array[i];\r\n        array[i] = t;\r\n      }\r\n\r\n      return array;\r\n    }\r\n\r\n    $.ajax({\r\n      // tries to cache once a day\r\n      url: '/blog/all.json?' + (new Date()).toString().split(' ').slice(0, 4).join('-'),\r\n      dataType: 'json',\r\n      cache: true,\r\n      success: function (data) {\r\n        var blogpost = data.blog[0];\r\n        // this is daft, but it means that the landing page is the same\r\n        // for all, and ensures that blog comments end up on a single place\r\n        var root = jsbin.root.replace(/^https/, 'http');\r\n        $('.toppanel-blog ul').html('<li><a href=\"' + root + '/' + blogpost.slug + '\" target=\"_blank\" class=\"toppanel-link\">' + blogpost.title.replace(/TWDTW.*:\\s/, '') + '</a></li>');\r\n\r\n        var last = null;\r\n        var count = 1;\r\n        try {\r\n          last = store.localStorage.getItem('lastpost') || null;\r\n        } catch (e) {}\r\n\r\n        if (last !== null) {\r\n          last *= 1;\r\n          if (last < blogpost.timestamp) {\r\n            count = data.blog.reduce(function (prev, current) {\r\n              if (last < current.timestamp) {\r\n                return prev + 1;\r\n              }\r\n              return prev;\r\n            }, 0);\r\n          } else {\r\n            count = 0;\r\n          }\r\n        }\r\n\r\n        if (count) {\r\n          $('.blog a').attr('href', root + '/' + data.blog[count-1].slug).attr('data-count', count).on('click', function () {\r\n            // this is a weird hack work around to try to clear the storage\r\n            // item that says which was the last post viewed. so we update\r\n            // the timestamp when the user clicks the link, because we know\r\n            // they'll land on the latest post\r\n            try {\r\n              store.localStorage.lastpost = data.blog[count-1].timestamp;\r\n            } catch (e) {}\r\n          });\r\n        }\r\n\r\n        var help = shuffle(data.help);\r\n\r\n        $('.toppanel-help ul').html('<li><a href=\"' + root + '/' + help[0].slug + '\" target=\"_blank\" class=\"toppanel-link\">' + help[0].title + '</a></li><li><a href=\"' + root + '/' + help[1].slug + '\" target=\"_blank\" class=\"toppanel-link\">' + help[1].title + '</a></li>');\r\n\r\n      }\r\n    })\r\n\r\n    // analytics for links\r\n    $('#toppanel').find('.toppanel-link').mousedown(function() {\r\n      analytics.welcomePanelLink(this.href);\r\n    });\r\n\r\n });\ndefine('skylark-jsbin-client/chrome/help-search',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n\r\n    'use strict';\r\n    var results = $('#results');\r\n    var resultCount = $('#result-count');\r\n    var searchTerms = [];\r\n    var search = $('#helpsearch');\r\n    var position = -1;\r\n\r\n    search.on('input', throttle(function () {\r\n      if (searchTerms.length === 0) {\r\n        $.ajax({\r\n          url: '/help/search.json?' + (new Date()).toString().split(' ').slice(0, 4).join('-'),\r\n          dataType: 'json',\r\n          cache: true,\r\n          success: function (data) {\r\n            searchTerms = data;\r\n            searchFor(this.value, searchTerms);\r\n          }.bind(this)\r\n        });\r\n      } else {\r\n        searchFor(this.value, searchTerms);\r\n      }\r\n      position = -1;\r\n    }, 200));\r\n\r\n    // document.documentElement.addEventListener('click', function (event) {\r\n    //   if (event.target.id === 'search' || event.target.id === 'results') {\r\n\r\n    //   } else {\r\n    //     resultsEl.hidden = true;\r\n    //   }\r\n    // });\r\n\r\n    results.on('mousemove', function () {\r\n      if (position !== -1) {\r\n        results.children().remove('highlight');\r\n        position = -1;\r\n      }\r\n    });\r\n\r\n    search.on('keydown', function (event) {\r\n      var key = event.which;\r\n      if (key === 38 || key === 40) { // up / down\r\n        event.preventDefault();\r\n        var inc = 1;\r\n        if (key === 38) {\r\n          inc = -1;\r\n        }\r\n\r\n        position += inc;\r\n\r\n        var children = results.children();\r\n\r\n        var length = children.length;\r\n        children.removeClass('hover');\r\n\r\n        if (position < 0) {\r\n          position = length - 1;\r\n        } else if (position > length - 1) {\r\n          position = 0;\r\n        }\r\n\r\n        children.eq(position).addClass('hover');\r\n      } else if (key === 13) { // select\r\n        var url = results.find('.hover')[0];\r\n        if (url) {\r\n          window.open(url.href);\r\n          // window.location = url.href;\r\n        }\r\n      }\r\n    });\r\n\r\n    // search.on('focus', function () {\r\n    //   results.hide();\r\n    // });\r\n\r\n    function wordmap(input) {\r\n      var ignore = \"a an and on in it of if for the i is i'm i'd it's or to me be not was do so at are what bin bins\".split(' ');\r\n\r\n      var endings = 'ing ly lies s';\r\n      var endingRe = new RegExp('(' + endings.split(' ').join('|') + ')$');\r\n\r\n      return (input||'')\r\n        //- strip html\r\n        .replace(/(<([^>]+)>)/ig,'')\r\n        //- strip non-letters\r\n        .replace(/\\W/g, ' ').replace(/[\"'\\.,]/g, '')\r\n        //- turn in to array of lower case words\r\n        .toLowerCase().split(' ')\r\n        //- filter out ignored words\r\n        .filter(function (word) {\r\n          return ignore.indexOf(word.trim()) === -1;\r\n        }).filter(function (e, i, words) {\r\n          //- return unique\r\n          return words.lastIndexOf(e) === i;\r\n        }).filter(function (word) {\r\n          //- return words 3 chars or longer\r\n          return word.length > 2;\r\n        }).map(function (word) {\r\n          return word.trim().replace(endingRe, '');\r\n        }).sort();\r\n    }\r\n\r\n    function searchFor(needles, haystack) {\r\n      'use strict';\r\n      needles = wordmap(needles);\r\n      var matches = haystack.map(function (data) {\r\n        var matches = needles.filter(function (needle) {\r\n          return data.words.indexOf(needle) !== -1;\r\n        }).length;\r\n\r\n        return {\r\n          type: data.type,\r\n          title: data.title,\r\n          slug: data.slug,\r\n          category: data.category,\r\n          matches: matches\r\n        };\r\n      }).filter(function (data) {\r\n        return data.matches > 0;\r\n      }).sort(function (a, b) {\r\n        return b.matches - a.matches;\r\n      });\r\n\r\n      results.html(matches.map(function (result) {\r\n        return '<a target=\"_blank\" class=\"button\" href=\"/' + result.slug + '\">' + result.title + (result.type === 'blog' ? ' (blog)' : '') + '</a>';\r\n      }).join('\\n'));\r\n\r\n      results.show();\r\n      var s = '';\r\n      if (matches.length !== 1) {\r\n        s = 's';\r\n      }\r\n      resultCount.html(matches.length + ' result' + s);\r\n    }\r\n\r\n\r\n});\r\n\ndefine('skylark-jsbin-client/chrome/app',[\r\n  \"skylark-jquery\",\r\n  \"skylark-jsbin-coder/editors/codemirror\",\r\n   \"../jsbin\",\r\n   \"./gist\",\r\n   \"./analytics\"\r\n],function ($,CodeMirror,jsbin,Gist,analytics) {\r\n  // if a gist has been requested, lazy load the gist library and plug it in\r\n  if (/gist\\/.*/.test(window.location.pathname)) {\r\n    window.editors = editors; // needs to be global when the callback triggers to set the content\r\n    loadGist = function () {\r\n      window.gist = new Gist(window.location.pathname.replace(/.*\\/([^/]+)$/, \"$1\"));\r\n    };\r\n\r\n    if (editors.ready) {\r\n      loadGist();\r\n    } else {\r\n      jsbin.$document.on('jsbinReady', loadGist);\r\n    }\r\n  }\r\n\r\n  // prevent the app from accidently getting scrolled out of view\r\n  if (!jsbin.mobile) {\r\n    document.body.onscroll = window.onscroll = function () {\r\n      if (document.body.scrollTop !== 0) {\r\n        window.scrollTo(0,0);\r\n      }\r\n      return false;\r\n    };\r\n  }\r\n\r\n  window.CodeMirror = CodeMirror; // fix to allow code mirror to break naturally\r\n\r\n  // These are keys that CodeMirror (and Emmet) should never take over\r\n  // ref: https://gist.github.com/rodneyrehm/5213304\r\n  if (CodeMirror.keyMap && CodeMirror.keyMap['default']) {\r\n    var cmd = $.browser.platform === 'mac' ? 'Cmd' : 'Ctrl';\r\n    delete CodeMirror.keyMap['default'][cmd + '-L'];\r\n    delete CodeMirror.keyMap['default'][cmd + '-T'];\r\n    delete CodeMirror.keyMap['default'][cmd + '-W'];\r\n    delete CodeMirror.keyMap['default'][cmd + '-J'];\r\n    delete CodeMirror.keyMap['default'][cmd + '-R'];\r\n  }\r\n\r\n  // var link = document.createElement('link');\r\n  // link.rel = 'stylesheet';\r\n  // link.href = jsbin['static'] + '/css/font.css?' + jsbin.version;\r\n  // link.type = 'text/css';\r\n  // document.getElementsByTagName('head')[0].appendChild(link);\r\n\r\n  if (jsbin.embed) {\r\n    analytics.embed();\r\n  }\r\n\r\n});\ndefine('skylark-jsbin-client/main',[\r\n\t\"skylark-jsbin-coder\",\r\n\t\"./jsbin\",\r\n    \"./chrome/font\",\r\n    \"./chrome/analytics\",\r\n    \"./chrome/settings\",\r\n    \"./render/saved-history-preview\",\r\n    \"./chrome/esc\",\r\n    \"./chrome/share\",\r\n    \"./chrome/issue\",\r\n    \"./chrome/download\",\r\n    \"./chrome/login\",\r\n    \"./chrome/tips\",\r\n    \"./chrome/keys\",\r\n    \"./chrome/save\",\r\n    \"./chrome/navigation\",\r\n    \"./chrome/file-drop\",\r\n    \"./chrome/gist\",\r\n    \"./chrome/spinner\",\r\n    \"./chrome/infocard\",\r\n    \"./chrome/last-bin\",\r\n    \"./chrome/archive\",\r\n    \"./chrome/transfer\",\r\n    \"./chrome/welcome-panel\",\r\n    \"./chrome/help-search\",\r\n    \"./chrome/app\"\r\n\r\n],function(coder,jsbin){\r\n\treturn jsbin;\r\n});\ndefine('skylark-jsbin-client', ['skylark-jsbin-client/main'], function (main) { return main; });\n\n"]}