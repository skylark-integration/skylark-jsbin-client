{"version":3,"sources":["skylark-jsbin-client.js"],"names":["define","skylark","objects","$","jsbin","attach","window","mixin","console","log","e","warn","trace","error","throttle","fn","delay","throttled","context","this","args","arguments","cancel","timer","setTimeout","apply","clearTimeout","expr","host","obj","index","meta","storedSettings","store","localStorage","getItem","embed","user","name","settings","extend","font","parseInt","JSON","parse","mobile","test","navigator","userAgent","tablet","ie","v","div","document","createElement","all","getElementsByTagName","innerHTML","undef","location","origin","pathname","root","setItem","editor","codemirror","theme","documentElement","addClass","split","ajaxPrefilter","options","original","xhr","head","get","type","toLowerCase","url","match","setRequestHeader","state","token","owner","metadata","getURL","withoutRoot","code","latest","withRevision","revision","updateSettings","update","method","checksum","ajax","data","el","$window","$body","$document","$bin","undefined","debug","unload","sessionStorage","stringify","panels","saveOnExit","save","savecontent","panel","focused","id","browser","opera","setInterval","one","removeAttr","indexOf","replace","on","addEventListener","event","updated","last_updated","Date","getTime","html","setCode","template","javascript","css","click","active","body","appendChild","tabindex","style","position","padding","bottom","right","margin","fontSize","color","background","whiteSpace","maxWidth","zIndex","pointerEvents","lastActive","showActive","activeElement","attrs","attributes","i","length","value","textContent","nodeName","requestAnimationFrame","escapeHTML","String","cache","selectors","size","cssText","styleSheet","createTextNode","Object","defineProperty","configurable","enumerable","set","val","insertFont","md5","removeItem","request","XMLHttpRequest","static","version","open","onload","status","response","send","splitter","$blocker","splitterSettings","each","$el","guid","$parent","parent","$prev","prevAll","nextAll","$handle","dragging","parentOffset","width","offset","top","left","props","x","currentPos","multiplier","cssProp","otherCssProp","sizeProp","moveProp","init","margin-left","height","opacity","cursor","border-left","z-index","y","border","tracker","down","delta","track","moveSplitter","pos","prevSize","elSize","trigger","resetPrev","bind","pageX","pageY","target","targetType","Math","abs","remove","removeClass","originalEvent","touches","append","preventDefault","is","hide","before","analytics","category","action","label","ga","experiment","universalEditor","library","infocard","milestone","clone","delete","lock","openShare","saveTemplate","createNew","from","openFromAvatar","openMenu","closeMenu","selectMenu","item","share","download","showPanel","panelId","hidePanel","logout","register","success","ok","login","enableLiveJS","archiveView","visible","archive","unarchive","loadGist","layout","panelsVisible","push","sort","join","run","publishVanity","runconsole","welcomePanelState","s","welcomePanelLink","text","$history","loaded","requestAttempts","getVisible","appendTo","detach","loadList","hasClass","hookUserHistory","dataType","frag","find","updatePreview","$iframe","attr","updateViewing","$viewing","updateLayout","$tbodys","archiveMode","$tbody","filter","$trs","first","$bins","$toggle","delegate","$this","$row","parents","toggleClass","alert","change","selected","shiftKey","metaKey","closest","stopImmediatePropagation","$tr","editUrl","allEditors","getCode","trim","show","prettyDate","$panelButtons","$homebtn","loginVisible","dropdownOpen","keyboardHelpVisible","urlHelpVisible","sideNavVisible","infocardVisible","hideOpen","closedropdown","keydown","which","mapping","live","$sharepanels","selectedSnapshot","changed","history","replaceState","getQuery","$sharemenu","prop","forEach","p","$realtime","$snapshot","$andlive","checked","$withLiveReload","disabled","saveChecksum","$sharepreview","link","linkselect","form","$directLinks","$share","shareElement","$showShare","opendropdown","blur","formData","shareRoot","OGurl","shareurl","query","view","hidden","className","empty","directLinksHTML","ext","processors","extensions","href","documentTitle","m","<",">","\"","&","githubIssue","encodeURIComponent","$newissue","submit","key","email","$loginFeedback","username","complete","jqXHR","parseJSON","responseText","avatar","end","prepend","message","search","tipTimeout","$html","$tip","$tipContent","removeTip","cb","resize","setTip","content","autohide","tipData","keys","c","revsion","d","saving","todo","_inprogress","inprogress","pop","updateCode","getTagContent","tag","result","re","capture1","capture2","title","saveDisabled","saveCode","$shareLinks","$panelCheckboxes","updateSavedState","map","getAttribute","path","hash","getHighlightLines","lastHTML","updateDocMeta","currentHTML","description","onSaveError","savingLabels","animate","_console","unbind","shown","sandbox","ismac","cmd","shift","plus","stop","deleted","compressKeys","compressed","LZString","compressToUTF16","callback","panelSettings","editors","useCompression","protocol","processed","headers","Accept","$form","setupform","ajaxCallback","serializeArray","reduce","pushState","edit","processor","hideAll","$lockrevision","menuDown","dropdownButtons","f","focus","mousedown","$dropdownLinks","nofocus","menu","substring","input","select","mouseup","ignoreUp","fromClick","hostname","triggerHandler","mouseover","render","renderLivePreview","jsconsole","clear","dblclick","lineNumbers","getOption","setOption","restore","$privateButton","$publicButton","$visibilityButtons","visibility","includejs","hideheader","cancelUp","mackeys","ctrl","del","shortcut","toUpperCase","metaContent","metatag","cm","getSearchCursor","findNext","contentCursor","line","ch","to","setCursor","setSelection","mark","markText","confirm","deleteAll","$enableUniversalEditor","simple","reload","File","FileList","FileReader","holder","cursorPosition","s4","floor","random","toString","uploadAsset","file","loading","currentStatus","widget","insertPosition","getCursor","lameEditor","insertTextArea","addLineWidget","coverGutter","nohscroll","S3Upload","s3_sign_put_url","s3_object_name","files","onProgress","percent","progress","onError","reason","fromServer","onFinishS3Put","getInsertText","replaceRange","string","start","selectionStart","selectionEnd","mime","getFileData","Promise","resolve","reject","kind","getAsString","filename","getAsFile","ondragover","ondragend","jQueryEvent","CodeMirror","items","clipboardData","types","promises","then","a","b","catch","stack","coordsChar","jstypes","csstypes","htmltypes","ondrop","dataTransfer","reader","scroller","worker","Worker","postMessage","onmessage","scrollTop","readAsText","allowDrop","CORS","XDomainRequest","Gist","gist","github_token","fileName","fileData","slice","prototype","processorInit","findByExtension","named","public","source","binToFile","desc","crossDomain","html_url","group","groupEnd","spinner","element","getContext","ctx","rafID","TORADIAN","PI","w","h","deg","r","speed","tailspeed","strokeStyle","lineWidth","last","draw","flip","fillStyle","fillRect","beginPath","arc","stroke","closePath","cancelAnimationFrame","global","setupInfocard","$template","$header","canvas","htmlpanel","viewers","es","insertTag","capture","updateHeaders","add","toTrigger","klass","statusCode","getJSON","codes","$headers","$fields","$clones","eq","initHandlers","updateInfoCard","updateStats","_data","connections","$b","listenStats","EventSource","close","userhtml","getPanelText","somethingSelected","listSelections","setSelections","classes","streaming","pro","hiddenProperty","visibilityChangeEvent","handleVisibility","newurl","getScript","cookie","setTime","toUTCString","back","getElementById","nameEQ","ca","charAt","readCookie","decodeURIComponent","updateArchiveMenu","$transfers","prompt","_csrf","gui","toppanel","goSlow","blogpost","blog","slug","count","timestamp","prev","current","lastpost","help","array","t","shuffle","results","resultCount","searchTerms","searchFor","needles","haystack","ignore","endingRe","RegExp","word","words","lastIndexOf","matches","needle","children","inc","ready","onscroll","scrollTo","keyMap","platform","coder","main"],"mappings":"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","file":"../skylark-jsbin-client.js","sourcesContent":["define('skylark-jsbin-client/jsbin',[\r\n  \"skylark-langx-ns\",\r\n  \"skylark-langx-objects\",\r\n  \"skylark-jquery\"\r\n],function(skylark,objects,$){\r\n  'use strict';\r\n\r\n  var jsbin = skylark.attach(\"intg.jsbin\");\r\n  if (window.jsbin) {\r\n    objects.mixin(jsbin,window.jsbin);\r\n    window.jsbin = jsbin;\r\n  }\r\n\r\n  try {\r\n    console.log('Dave is ready.');\r\n  } catch (e) {\r\n    window.console = {\r\n      log: function () {\r\n        // alert([].slice.call(arguments).join('\\n'));\r\n      },\r\n      warn: function () {},\r\n      trace: function () {},\r\n      error: function () {}\r\n    };\r\n  }\r\n\r\n  // required because jQuery 1.4.4 lost ability to search my object property :( (i.e. a[host=foo.com])\r\n  $.expr[':'].host = function(obj, index, meta) {\r\n    return obj.host === meta[3];\r\n  };\r\n\r\n  function throttle(fn, delay) {\r\n    var throttled = function () {\r\n      var context = this, args = arguments;\r\n      throttled.cancel();\r\n      throttled.timer = setTimeout(function () {\r\n        fn.apply(context, args);\r\n      }, delay);\r\n    };\r\n\r\n    throttled.cancel = function () {\r\n      clearTimeout(throttled.timer);\r\n    };\r\n\r\n    return throttled;\r\n  }\r\n\r\n  function debounceAsync(fn) {\r\n    'use strict';\r\n    var waiting = false;\r\n    var last = null;\r\n\r\n    return function debouceRunner() {\r\n      var args = [].slice.call(arguments, 0);\r\n      // console.time('tracker');\r\n\r\n      var tracker = function () {\r\n        waiting = false;\r\n          // console.timeEnd('tracker');\r\n        if (last) {\r\n          // console.log('applying the last');\r\n          fn.apply(last.context, last.args);\r\n          // console.log('and now clear');\r\n          last = null;\r\n        }\r\n      };\r\n\r\n      // put the tracker in place of the callback\r\n      args.push(tracker);\r\n\r\n      if (!waiting) {\r\n        // console.log('running this time...');\r\n        waiting = true;\r\n        return fn.apply(this, args);\r\n      } else {\r\n        // console.log('going to wait...');\r\n        last = { args: args, context: this };\r\n      }\r\n    };\r\n  }\r\n\r\n  function escapeHTML(html){\r\n    return String(html)\r\n      .replace(/&(?!\\w+;)/g, '&amp;')\r\n      .replace(/</g, '&lt;')\r\n      .replace(/>/g, '&gt;')\r\n      .replace(/\"/g, '&quot;');\r\n  }\r\n\r\n  function dedupe(array) {\r\n    var hash    = {},\r\n        results = [],\r\n        hasOwn  = Object.prototype.hasOwnProperty,\r\n        i, item, len;\r\n\r\n    for (i = 0, len = array.length; i < len; i += 1) {\r\n      item = array[i];\r\n\r\n      if (!hasOwn.call(hash, item)) {\r\n        hash[item] = 1;\r\n        results.push(item);\r\n      }\r\n    }\r\n\r\n    return results;\r\n  }\r\n\r\n  function isDOM(obj) {\r\n    'use strict';\r\n    var Node = window.Node || false;\r\n    if (Node) {\r\n      return obj instanceof Node;\r\n    }\r\n    return obj.nodeType === 1;\r\n  }\r\n\r\n  /*\r\n  function exposeSettings() {\r\n    'use strict';\r\n\r\n    function mockEditor (editor, methods) {\r\n      return methods.reduce(function (mockEditor, method) {\r\n        mockEditor[method] = editor[method].bind(editor);\r\n        return mockEditor;\r\n      }, {});\r\n    }\r\n\r\n    function mockPanels() {\r\n      var results = {};\r\n      var panels = jsbin.panels.panels;\r\n      ['css', 'javascript', 'html'].forEach(function (type) {\r\n        results[type] = {\r\n          setCode: panels[type].setCode.bind(panels[type]),\r\n          getCode: panels[type].getCode.bind(panels[type]),\r\n          editor: mockEditor(panels[type].editor, [\r\n            'setCursor',\r\n            'getCursor',\r\n            'addKeyMap',\r\n            'on'\r\n          ])\r\n        };\r\n      });\r\n\r\n      return results;\r\n    }\r\n\r\n   // unnecessary? // lwf\r\n    if (isDOM(window.jsbin) || !window.jsbin || !window.jsbin.state) { // because...STUPIDITY!!!\r\n       window.jsbin = {\r\n        user: $.extend(true, {}, window.jsbin.user, jsbin.user),\r\n        'static': jsbin['static'],\r\n        version: jsbin.version,\r\n        analytics: jsbin.analytics,\r\n        state: {\r\n          title: jsbin.state.title,\r\n          description: jsbin.state.description\r\n        },\r\n        embed: jsbin.embed,\r\n        panels: {\r\n          // FIXME decide whether this should be locked down further\r\n          panels: mockPanels()\r\n        }\r\n      }; // create the holding object\r\n\r\n      if (jsbin.state.metadata && jsbin.user && jsbin.state.metadata.name === jsbin.user.name && jsbin.user.name) {\r\n        window.jsbin.settings = jsbin.settings;\r\n        return;\r\n      }\r\n\r\n      var key = 'o' + (Math.random() * 1).toString(32).slice(2);\r\n      Object.defineProperty(window, key, {\r\n        get:function () {\r\n          window.jsbin.settings = jsbin.settings;\r\n          console.log('jsbin.settings can now be modified on the console');\r\n        }\r\n      });\r\n      if (!jsbin.embed) {\r\n        console.log('To edit settings, type this string into the console: ' + key);\r\n      }\r\n    }\r\n  }\r\n  */\r\n\r\n  var storedSettings = store.localStorage.getItem('settings');\r\n  if (storedSettings === 'undefined' || jsbin.embed) {\r\n    // yes, equals the *string* 'undefined', then something went wrong\r\n    storedSettings = null;\r\n  }\r\n\r\n  // try to copy across statics\r\n  /*\r\n   // unnecessary? // lwf\r\n  ['root', 'shareRoot', 'runner', 'static', 'version'].map(function (key) {\r\n    if (!jsbin[key]) {\r\n      jsbin[key] = window.jsbin[key];\r\n    }\r\n  });\r\n  */\r\n  if (jsbin.user && jsbin.user.name) {\r\n    jsbin.settings = $.extend(true, {}, jsbin.user.settings, jsbin.settings);\r\n    if (jsbin.user.settings.font) {\r\n      jsbin.settings.font = parseInt(jsbin.user.settings.font, 10);\r\n    }\r\n  } else {\r\n    // In all cases localStorage takes precedence over user settings so users can\r\n    // configure it from the console and overwrite the server delivered settings\r\n    jsbin.settings = $.extend({}, jsbin.settings, JSON.parse(storedSettings || '{}'));\r\n  }\r\n\r\n  // if the above code isn't dodgy, this for hellz bells is:\r\n  jsbin.mobile = /WebKit.*Mobile.*|Android/.test(navigator.userAgent);\r\n  jsbin.tablet = /iPad/i.test(navigator.userAgent); // sue me.\r\n  // IE detect - sadly uglify is compressing the \\v1 trick to death :(\r\n  // via @padolsey & @jdalton - https://gist.github.com/527683\r\n  jsbin.ie = (function(){\r\n    var undef,\r\n        v = 3,\r\n        div = document.createElement('div'),\r\n        all = div.getElementsByTagName('i');\r\n    while (\r\n      div.innerHTML = '<!--[if gt IE ' + (++v) + ']><i></i><![endif]-->',\r\n      all[0]\r\n    ) {}\r\n    return v > 4 ? v : undef;\r\n  }());\r\n\r\n  if (!storedSettings && (location.origin + location.pathname) === jsbin.root + '/') {\r\n    // first timer - let's welcome them shall we, Dave?\r\n    store.localStorage.setItem('settings', '{}');\r\n  }\r\n\r\n  if (!jsbin.settings.editor) {\r\n    // backward compat with jsbin-v2\r\n    jsbin.settings.editor = {};\r\n  }\r\n\r\n  if (jsbin.settings.codemirror) {\r\n    $.extend(jsbin.settings.editor, jsbin.settings.codemirror);\r\n  }\r\n\r\n  if (jsbin.settings.editor.theme) {\r\n    $(document.documentElement).addClass('cm-s-' + jsbin.settings.editor.theme.split(' ')[0]);\r\n  }\r\n\r\n  // Add a pre-filter to all ajax requests to add a CSRF header to prevent\r\n  // malicious form submissions from other domains.\r\n  $.ajaxPrefilter(function (options, original, xhr) {\r\n    var skip = {head: 1, get: 1};\r\n    if (!skip[options.type.toLowerCase()] &&\r\n        !options.url.match(/^https:\\/\\/api.github.com/)) {\r\n      xhr.setRequestHeader('x-csrf-token', jsbin.state.token);\r\n    }\r\n  });\r\n\r\n  jsbin.owner = function () {\r\n    return jsbin.user && jsbin.user.name && jsbin.state.metadata && jsbin.state.metadata.name === jsbin.user.name;\r\n  };\r\n\r\n  jsbin.getURL = function (options) {\r\n    if (!options) { options = {}; }\r\n\r\n    var withoutRoot = options.withoutRoot;\r\n    var root = options.root || jsbin.root;\r\n    var url = withoutRoot ? '' : root;\r\n    var state = jsbin.state;\r\n\r\n    if (state.code) {\r\n      url += '/' + state.code;\r\n\r\n      if (!state.latest || options.withRevision) { //} && state.revision !== 1) {\r\n        if (options.withRevision !== false) {\r\n          url += '/' + (state.revision || 1);\r\n        }\r\n      }\r\n    }\r\n    return url;\r\n  };\r\n\r\n  jsbin.state.updateSettings = throttle(function updateBinSettingsInner(update, method) {\r\n    if (!method) {\r\n      method = 'POST';\r\n    }\r\n\r\n    if (jsbin.state.code) {\r\n      update.checksum = jsbin.state.checksum;\r\n      $.ajax({\r\n        type: method, // consistency ftw :-\\\r\n        url: jsbin.getURL({ withRevision: true }) + '/settings',\r\n        data: update\r\n      });\r\n    }\r\n  }, 500);\r\n\r\n\r\n  function objectValue(path, context) {\r\n    var props = path.split('.'),\r\n        length = props.length,\r\n        i = 1,\r\n        currentProp = context || window,\r\n        value = currentProp[path];\r\n    try {\r\n      if (currentProp[props[0]] !== undefined) {\r\n        currentProp = currentProp[props[0]];\r\n        for (; i < length; i++) {\r\n          if (currentProp[props[i]] === undefined) {\r\n            break;\r\n          } else if (i === length - 1) {\r\n            value = currentProp[props[i]];\r\n          }\r\n          currentProp = currentProp[props[i]];\r\n        }\r\n      }\r\n    } catch (e) {\r\n      value = undefined;\r\n    }\r\n\r\n    return value;\r\n  }\r\n\r\n\r\n  var $window = $(window),\r\n      $body = $('body'),\r\n      $document = $(document),\r\n      debug = jsbin.settings.debug === undefined ? false : jsbin.settings.debug,\r\n      documentTitle = 'JS Bin',\r\n      $bin = $('#bin'),\r\n      loadGist,\r\n      // splitterSettings = JSON.parse(store.localStorage.getItem('splitterSettings') || '[ { \"x\" : null }, { \"x\" : null } ]'),\r\n      unload = function () {\r\n        store.sessionStorage.setItem('url', jsbin.getURL());\r\n        store.localStorage.setItem('settings', JSON.stringify(jsbin.settings));\r\n\r\n        if (jsbin.panels.saveOnExit === false) {\r\n          return;\r\n        }\r\n\r\n        jsbin.panels.save();\r\n        jsbin.panels.savecontent();\r\n\r\n        var panel = jsbin.panels.focused;\r\n        if (panel) {\r\n          store.sessionStorage.setItem('panel', panel.id);\r\n        }\r\n      };\r\n\r\n  $window.unload(unload);\r\n\r\n  // window.addEventListener('storage', function (e) {\r\n  //   if (e.storageArea === localStorage && e.key === 'settings') {\r\n  //     console.log('updating from storage');\r\n  //     console.log(JSON.parse(store.localStorage.settings));\r\n  //     jsbin.settings = JSON.parse(store.localStorage.settings);\r\n  //   }\r\n  // });\r\n\r\n  // hack for Opera because the unload event isn't firing to capture the settings, so we put it on a timer\r\n  if ($.browser.opera) {\r\n    setInterval(unload, 500);\r\n  }\r\n\r\n  $document.one('jsbinReady', function () {\r\n    ///exposeSettings();\r\n    $bin.removeAttr('style');\r\n    $body.addClass('ready');\r\n  });\r\n\r\n  if (navigator.userAgent.indexOf(' Mac ') !== -1) {\r\n    (function () {\r\n    var el = $('#keyboardHelp')[0];\r\n    el.innerHTML = el.innerHTML.replace(/ctrl/g, 'cmd').replace(/Ctrl/g, 'ctrl');\r\n    })();\r\n  }\r\n\r\n  if (jsbin.embed) {\r\n    $window.on('focus', function () {\r\n      return false;\r\n    });\r\n  }\r\n\r\n  window.addEventListener('message', function (event) {\r\n    var data;\r\n    try {\r\n      data = JSON.parse(event.data);\r\n    } catch (e) {\r\n      return;\r\n    }\r\n\r\n    if (data.type === 'cached') {\r\n      if (data.updated > jsbin.state.metadata.last_updated || !jsbin.state.metadata.last_updated) {\r\n        console.log('restored from cache: %sms newer', (new Date(data.updated).getTime() - new Date(jsbin.state.metadata.last_updated).getTime()) / 100);\r\n        // update the bin\r\n        jsbin.panels.panels.html.setCode(data.template.html);\r\n        jsbin.panels.panels.javascript.setCode(data.template.javascript);\r\n        jsbin.panels.panels.css.setCode(data.template.css);\r\n        $('a.save:first').click();\r\n      }\r\n    }\r\n  });\r\n\r\n  (function() {\r\n    if (!jsbin.settings.debug) {\r\n      return;\r\n    }\r\n\r\n    var active = document.createElement('pre');\r\n    document.body.appendChild(active);\r\n    active.tabindex = -1;\r\n    objects.mixin(active.style, { // warning: `with` I know what I'm doing!\r\n      position : 'fixed',\r\n      padding : '2px',\r\n      bottom : '20px',\r\n      right : '20px',\r\n      margin : 0,\r\n      fontSize : 12,\r\n      color : '#fff',\r\n      background : '#aaa',\r\n      whiteSpace : 'pre-wrap',\r\n      maxWidth : '95%',\r\n      zIndex : 10000000,\r\n      pointerEvents : 'none'\r\n    });\r\n\r\n    var lastActive = null;\r\n    var showActive = function () {\r\n      var el = document.activeElement;\r\n      var html = '';\r\n      var attrs = el.attributes;\r\n      var i = 0;\r\n\r\n      if (el !== lastActive && el !== active) {\r\n        for (; i < attrs.length; i++) {\r\n          html += ' ' + attrs[i].name + '=\"' + attrs[i].value + '\"';\r\n        }\r\n\r\n        active.textContent = '<' + el.nodeName.toLowerCase() + html + '>';\r\n        lastActive = el;\r\n      }\r\n\r\n      requestAnimationFrame(showActive);\r\n    };\r\n\r\n    showActive();\r\n\r\n\r\n  })();\r\n\r\n  jsbin.$document = $document;\r\n  jsbin.$window = $window;\r\n  jsbin.throttle = throttle;\r\n  jsbin.escapeHTML = escapeHTML;\r\n\r\n\r\n  return jsbin;\r\n\r\n});\r\n\r\n\ndefine('skylark-jsbin-client/chrome/font',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n  /** =========================================================================\r\n   * font\r\n   * Reads user setting and configures the CodeMirror font size\r\n   * ========================================================================== */\r\n  /*global jsbin:true*/\r\n  var font = (function (document) {\r\n    var head = document.getElementsByTagName('head')[0],\r\n        selectors = '#output li, #exec, .fakeInput, .fakeInput:before, #exec:before, #bin .editbox .CodeMirror, .mobile .editbox textarea',\r\n        size = jsbin.settings.font || 14;\r\n\r\n    // via http://stackoverflow.com/questions/2041495/create-dynamic-inline-stylesheet\r\n    function font(size) {\r\n      var cssText = selectors + '{ font-size: ' + size + 'px; }',\r\n          el = document.createElement('style');\r\n\r\n      el.type = 'text/css';\r\n      if (el.styleSheet) {\r\n        el.styleSheet.cssText = cssText;//IE only\r\n      } else {\r\n        el.appendChild(document.createTextNode(cssText));\r\n      }\r\n      head.appendChild(el);\r\n    }\r\n\r\n    if (Object.defineProperty && jsbin.settings) {\r\n      try {\r\n        Object.defineProperty(jsbin.settings, 'font', {\r\n          configurable: true,\r\n          enumerable: true,\r\n          get: function () {\r\n            return size;\r\n          },\r\n          set: function (val) {\r\n            size = val * 1;\r\n            font(size);\r\n          }\r\n        });\r\n      } catch (e) {\r\n        // IE8 seems to attempt the code above, but it totally fails\r\n      }\r\n    }\r\n\r\n    font(size);\r\n\r\n    return font;\r\n  })(document);\r\n\r\n  var md5 = 'a3a02e450f1f79f4c3482279d113b07e';\r\n  var key = 'fonts';\r\n  var cache;\r\n\r\n  function insertFont(value) {\r\n    var style = document.createElement('style');\r\n    style.innerHTML = value;\r\n    document.head.appendChild(style);\r\n  }\r\n\r\n  try {\r\n    cache = window.localStorage.getItem(key);\r\n    if (cache) {\r\n      cache = JSON.parse(cache);\r\n      if (cache.md5 === md5) {\r\n        insertFont(cache.value);\r\n      } else {\r\n        // busting cache when md5 doesn't match\r\n        window.localStorage.removeItem(key);\r\n        cache = null;\r\n      }\r\n    }\r\n  } catch (e) {\r\n    // most likely LocalStorage disabled\r\n    return;\r\n  }\r\n\r\n  if (!cache) {\r\n    // fonts not in LocalStorage or md5 did not match\r\n    window.addEventListener('load', function () {\r\n      var request = new XMLHttpRequest();\r\n      var response;\r\n      var url = jsbin.static + '/css/fonts.a3a02e450f1f79f4c3482279d113b07e.woff.json?' + jsbin.version;\r\n      request.open('GET', url, true);\r\n      request.onload = function () {\r\n        if (this.status == 200) {\r\n          try {\r\n            response = JSON.parse(this.response);\r\n            insertFont(response.value);\r\n            window.localStorage.setItem(key, this.response);\r\n          } catch (e) {\r\n            // localStorage is probably full\r\n          }\r\n        }\r\n      };\r\n      request.send();\r\n    });\r\n  }\r\n\r\n  return jsbin.font = font;\r\n});\ndefine('skylark-jsbin-client/chrome/splitter',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n  $.fn.splitter = function () {\r\n    var $document = $(document),\r\n        $blocker = $('<div class=\"block\"></div>'),\r\n        $body = $('body');\r\n        // blockiframe = $blocker.find('iframe')[0];\r\n\r\n    var splitterSettings = JSON.parse(store.localStorage.getItem('splitterSettings') || '[]');\r\n    return this.each(function () {\r\n      var $el = $(this),\r\n          $originalContainer = $(this),\r\n          guid = $.fn.splitter.guid++,\r\n          $parent = $el.parent(),\r\n          type = 'x',\r\n          $prev = type === 'x' ? $el.prevAll(':visible:first') : $el.nextAll(':visible:first'),\r\n          $handle = $('<div class=\"resize\"></div>'),\r\n          dragging = false,\r\n          width = $parent.width(),\r\n          parentOffset = $parent.offset(),\r\n          left = parentOffset.left,\r\n          top = parentOffset.top, // usually zero :(\r\n          props = {\r\n            x: {\r\n              currentPos: $parent.offset().left,\r\n              multiplier: 1,\r\n              cssProp: 'left',\r\n              otherCssProp: 'right',\r\n              size: $parent.width(),\r\n              sizeProp: 'width',\r\n              moveProp: 'pageX',\r\n              init: {\r\n                top: 0,\r\n                bottom: 0,\r\n                width: jsbin.mobile ? 44 : 8,\r\n                'margin-left': jsbin.mobile ? '-22px' : '-4px',\r\n                height: '100%',\r\n                left: 'auto',\r\n                right: 'auto',\r\n                opacity: 0,\r\n                position: 'absolute',\r\n                cursor: 'ew-resize',\r\n                // 'border-top': '0',\r\n                'border-left': '1px solid rgba(218, 218, 218, 0.5)',\r\n                'z-index': 99999\r\n              }\r\n            },\r\n            y: {\r\n              currentPos: $parent.offset().top,\r\n              multiplier: -1,\r\n              size: $parent.height(),\r\n              cssProp: 'bottom',\r\n              otherCssProp: 'top',\r\n              sizeProp: 'height',\r\n              moveProp: 'pageY',\r\n              init: {\r\n                top: 'auto',\r\n                cursor: 'ns-resize',\r\n                bottom: 'auto',\r\n                height: 8,\r\n                width: '100%',\r\n                left: 0,\r\n                right: 0,\r\n                opacity: 0,\r\n                position: 'absolute',\r\n                border: 0,\r\n                // 'border-top': '1px solid rgba(218, 218, 218, 0.5)',\r\n                'z-index': 99999\r\n              }\r\n            }\r\n          },\r\n          refreshTimer = null,\r\n          settings = splitterSettings[guid] || {};\r\n\r\n      var tracker = {\r\n        down: { x: null, y: null },\r\n        delta: { x: null, y: null },\r\n        track: false,\r\n        timer: null\r\n      };\r\n      $handle.bind('mousedown', function (event) {\r\n        tracker.down.x = event.pageX;\r\n        tracker.down.y = event.pageY;\r\n        tracker.delta = { x: null, y: null };\r\n        tracker.target = $handle[type == 'x' ? 'height' : 'width']() * 0.25;\r\n      });\r\n\r\n      $document.bind('mousemove', function (event) {\r\n        if (dragging) {\r\n          tracker.delta.x = tracker.down.x - event.pageX;\r\n          tracker.delta.y = tracker.down.y - event.pageY;\r\n          clearTimeout(tracker.timer);\r\n          tracker.timer = setTimeout(function () {\r\n            tracker.down.x = event.pageX;\r\n            tracker.down.y = event.pageY;\r\n          }, 250);\r\n          var targetType = type == 'x' ? 'y' : 'x';\r\n          if (Math.abs(tracker.delta[targetType]) > tracker.target) {\r\n            $handle.trigger('change', targetType, event[props[targetType].moveProp]);\r\n            tracker.down.x = event.pageX;\r\n            tracker.down.y = event.pageY;\r\n          }\r\n        }\r\n      });\r\n\r\n      function moveSplitter(pos) {\r\n        if (type === 'y') {\r\n          pos -= top;\r\n        }\r\n        var v = pos - props[type].currentPos,\r\n            split = 100 / props[type].size * v,\r\n            delta = (pos - settings[type]) * props[type].multiplier,\r\n            prevSize = $prev[props[type].sizeProp](),\r\n            elSize = $el[props[type].sizeProp]();\r\n\r\n        if (type === 'y') {\r\n          split = 100 - split;\r\n        }\r\n\r\n        // if prev panel is too small and delta is negative, block\r\n        if (prevSize < 100 && delta < 0) {\r\n          // ignore\r\n        } else if (elSize < 100 && delta > 0) {\r\n          // ignore\r\n        } else {\r\n          // allow sizing to happen\r\n          $el.css(props[type].cssProp, split + '%');\r\n          $prev.css(props[type].otherCssProp, (100 - split) + '%');\r\n          var css = {};\r\n          css[props[type].cssProp] = split + '%';\r\n          $handle.css(css);\r\n          settings[type] = pos;\r\n          splitterSettings[guid] = settings;\r\n          store.localStorage.setItem('splitterSettings', JSON.stringify(splitterSettings));\r\n\r\n          // wait until animations have completed!\r\n          if (moveSplitter.timer) clearTimeout(moveSplitter.timer);\r\n          moveSplitter.timer = setTimeout(function () {\r\n            $document.trigger('sizeeditors');\r\n          }, 120);\r\n        }\r\n      }\r\n\r\n      function resetPrev() {\r\n        $prev = type === 'x' ? $handle.prevAll(':visible:first') : $handle.nextAll(':visible:first');\r\n      }\r\n\r\n      $document.bind('mouseup touchend', function () {\r\n        if (dragging) {\r\n          dragging = false;\r\n          $blocker.remove();\r\n          // $handle.css( 'opacity', '0');\r\n          $body.removeClass('dragging');\r\n        }\r\n      }).bind('mousemove touchmove', function (event) {\r\n        if (dragging) {\r\n          moveSplitter(event[props[type].moveProp] || event.originalEvent.touches[0][props[type].moveProp]);\r\n        }\r\n      });\r\n\r\n      $blocker.bind('mousemove touchmove', function (event) {\r\n        if (dragging) {\r\n          moveSplitter(event[props[type].moveProp] || event.originalEvent.touches[0][props[type].moveProp]);\r\n        }\r\n      });\r\n\r\n      $handle.bind('mousedown touchstart', function (e) {\r\n        dragging = true;\r\n        $body.append($blocker).addClass('dragging');\r\n        props[type].size = $parent[props[type].sizeProp]();\r\n        props[type].currentPos = 0; // is this really required then?\r\n\r\n        resetPrev();\r\n        e.preventDefault();\r\n      });\r\n\r\n      /*\r\n      .hover(function () {\r\n        $handle.css('opacity', '1');\r\n      }, function () {\r\n        if (!dragging) {\r\n          $handle.css('opacity', '0');\r\n        }\r\n      })\r\n    */\r\n\r\n      $handle.bind('init', function (event, x) {\r\n        $handle.css(props[type].init);\r\n        props[type].size = $parent[props[type].sizeProp]();\r\n        resetPrev();\r\n\r\n        // can only be read at init\r\n        top = $parent.offset().top;\r\n\r\n        $blocker.css('cursor', type == 'x' ? 'ew-resize' : 'ns-resize');\r\n\r\n        if (type == 'y') {\r\n          $el.css('border-right', 0);\r\n          $prev.css('border-left', 0);\r\n          $prev.css('border-top', '2px solid #ccc');\r\n        } else {\r\n          // $el.css('border-right', '1px solid #ccc');\r\n          $el.css('border-top', 0);\r\n          // $prev.css('border-right', '2px solid #ccc');\r\n        }\r\n\r\n        if ($el.is(':hidden')) {\r\n          $handle.hide();\r\n        } else {\r\n          if ($prev.length) {\r\n            $el.css('border-' + props[type].cssProp, '1px solid #ccc');\r\n          } else {\r\n            $el.css('border-' + props[type].cssProp, '0');\r\n          }\r\n          moveSplitter(x !== undefined ? x : $el.offset()[props[type].cssProp]);\r\n        }\r\n      }); //.trigger('init', settings.x || $el.offset().left);\r\n\r\n      $prev.css('width', 'auto');\r\n      $prev.css('height', 'auto');\r\n      $el.data('splitter', $handle);\r\n      $el.before($handle);\r\n\r\n      // if (settings.y) {\r\n      //   $handle.trigger('change', 'y');\r\n      // }\r\n    });\r\n  };\r\n\r\n  $.fn.splitter.guid = 0;\r\n});\ndefine('skylark-jsbin-client/chrome/analytics',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n  var analytics =  {\r\n    track: function (category, action, label) { // , value\r\n      window.ga && ga('send', 'event', category, action, label);\r\n    },\r\n    experiment: function (type) {\r\n      analytics.track('experiment', type);\r\n    },\r\n    universalEditor: function (value) {\r\n      analytics.track('menu', 'universalEditor', value);\r\n    },\r\n    library: function (action, value) {\r\n      analytics.track('menu', action, 'library', value);\r\n    },\r\n    infocard: function (action, value) {\r\n      analytics.track('infocard', action, value);\r\n    },\r\n    embed: function () {\r\n      try {\r\n        analytics.track('state', 'embed', window.top.location);\r\n      } catch (e) {\r\n        analytics.track('state', 'embed');\r\n      }\r\n    },\r\n    milestone: function () {\r\n      analytics.track('bin', 'save', window.location.pathname);\r\n    },\r\n    clone: function () {\r\n      analytics.track('bin', 'clone', window.location.pathname);\r\n    },\r\n    'delete': function () {\r\n      analytics.track('bin', 'delete', window.location.pathname);\r\n    },\r\n    lock: function () {\r\n      analytics.track('bin', 'lock', window.location.pathname);\r\n    },\r\n    openShare: function () {\r\n      analytics.track('menu', 'open', 'share');\r\n    },\r\n    saveTemplate: function () {\r\n      analytics.track('menu', 'select', 'save-template');\r\n    },\r\n    createNew: function (from) {\r\n      analytics.track(from || 'menu', 'select', 'new');\r\n    },\r\n    open: function (from) {\r\n      analytics.track(from || 'menu', 'select', 'open');\r\n    },\r\n    openFromAvatar: function () {\r\n      analytics.track('menu', 'select', 'open via avatar');\r\n    },\r\n    openMenu: function (label) {\r\n      analytics.track('menu', 'open', label);\r\n    },\r\n    closeMenu: function (label) {\r\n      analytics.track('menu', 'close', label);\r\n    },\r\n    selectMenu: function (item) {\r\n      if (item) {\r\n        analytics.track('menu', 'select', item);\r\n      }\r\n    },\r\n    share: function (action, label) {\r\n      analytics.track('share', action, label);\r\n    },\r\n    download: function (from) {\r\n      analytics.track(from || 'menu', 'select', 'download');\r\n    },\r\n    showPanel: function (panelId) {\r\n      analytics.track('panel', 'show', panelId);\r\n    },\r\n    hidePanel: function (panelId) {\r\n      analytics.track('panel', 'hide', panelId);\r\n    },\r\n    logout: function () {\r\n      analytics.track('menu', 'select', 'logout');\r\n    },\r\n    register: function (success) {\r\n      if (success === undefined) {\r\n        analytics.track('menu', 'open', 'login');\r\n      } else {\r\n        analytics.track('user', 'register', ok ? 'success' : 'fail');\r\n      }\r\n    },\r\n    login: function (ok) {\r\n      if (ok === undefined) {\r\n        analytics.track('menu', 'open', 'login');\r\n      } else {\r\n        analytics.track('user', 'login', ok ? 'success' : 'fail');\r\n      }\r\n    },\r\n    enableLiveJS: function (ok) {\r\n      analytics.track('button', 'auto-run js', ok ? 'on' : 'off');\r\n    },\r\n    archiveView: function (visible) {\r\n      analytics.track('button', 'view archive', visible ? 'on' : 'off');\r\n    },\r\n    archive: function (url) {\r\n      analytics.track('button', 'archive', url);\r\n    },\r\n    unarchive: function (url) {\r\n      analytics.track('button', 'unarchive', url);\r\n    },\r\n    loadGist: function (id) {\r\n      analytics.track('state', 'load gist', id);\r\n    },\r\n    layout: function (panelsVisible) {\r\n      var layout = [], panel = '';\r\n\r\n      for (panel in panelsVisible) {\r\n        layout.push(panel.id);\r\n      }\r\n\r\n      analytics.track('layout', 'update', layout.sort().join(',') || 'none');\r\n    },\r\n    run: function (from) {\r\n      analytics.track(from || 'button', 'run with js');\r\n    },\r\n    publishVanity: function () {\r\n      analytics.track('bin', 'publish-vanity');\r\n    },\r\n    runconsole: function (from) {\r\n      analytics.track(from || 'button', 'run console');\r\n    },\r\n    welcomePanelState: function (state) {\r\n      var s = 'close';\r\n      if (state) {\r\n        s = 'open';\r\n      }\r\n      analytics.track('state', 'welcome-panel', s);\r\n    },\r\n    welcomePanelLink: function (url) {\r\n      analytics.track('welcome-panel-link', url);\r\n    }\r\n  };\r\n\r\n  // misses the asset upload one\r\n  $('a[data-pro=\"true\"]').on('click', function () {\r\n    analytics.track('try-pro', $(this).text());\r\n  });\r\n\r\n  return jsbin.analytics = analytics;\r\n});\ndefine('skylark-jsbin-client/chrome/settings',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n  /*global jsbin, $*/\r\n\r\n  var settings = {\r\n    save: function (callback) {\r\n      localStorage.setItem('settings', JSON.stringify(jsbin.settings));\r\n      if (!callback) {\r\n        callback = function () {};\r\n      }\r\n\r\n      $.ajax({\r\n        url: '/account/editor',\r\n        type: 'POST',\r\n        dataType: 'json',\r\n        data: {\r\n          settings: localStorage.settings,\r\n          _csrf: jsbin.state.token\r\n        },\r\n        success: function () {\r\n          if (console && console.log) {\r\n            console.log('settings saved');\r\n          }\r\n          callback(true);\r\n        },\r\n        error: function (xhr, status) {\r\n          callback(false);\r\n        }\r\n      });\r\n    }\r\n  };\r\n});\ndefine('skylark-jsbin-client/render/saved-history-preview',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n  /*global jsbin, $, $document, analytics*/\r\n  'use strict';\r\n  if (!jsbin.user || !jsbin.user.name || jsbin.embed) {\r\n    return;\r\n  }\r\n\r\n  var $body = $('body'),\r\n      loaded = false,\r\n      requestAttempts = 5,\r\n      $history; // set in hookUserHistory()\r\n\r\n  $document.on('history:open', function () {\r\n    if ($history && jsbin.panels.getVisible().length === 0) {\r\n      $history.appendTo('main');\r\n    }\r\n  }).on('history:close', function () {\r\n    if ($history === null) {\r\n      $history = $('#history').detach();\r\n    }\r\n  });\r\n\r\n  var loadList = function () {\r\n    if (loaded) {\r\n      return;\r\n    }\r\n\r\n    if ($('html').hasClass('public-listing')) {\r\n      hookUserHistory();\r\n    } else {\r\n      $.ajax({\r\n        dataType: 'html',\r\n        url: jsbin.root + '/list',\r\n        error: function () {\r\n          requestAttempts--;\r\n          if (requestAttempts > 0) {\r\n            $('#history').remove();\r\n            setTimeout(loadList, 500);\r\n          } else {\r\n            console.error('Giving up to load history');\r\n          }\r\n        },\r\n        success: function (html) {\r\n          $('#history').remove();\r\n          var frag = $(html);\r\n          if (jsbin.mobile) {\r\n            // mobile is particularly slow at rendering 1,000s of tbodys\r\n            // so we'll remove some to relieve the pressure.\r\n            frag.find('tbody:gt(50)').remove();\r\n          }\r\n          $body.append(frag);\r\n          hookUserHistory();\r\n          loaded = true;\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  var updatePreview = function(url, $iframe) {\r\n    $iframe.attr('src', url + '/quiet');\r\n    $iframe.removeAttr('hidden');\r\n  };\r\n\r\n  var updateViewing = function (url, $viewing) {\r\n    $viewing.html('<a href=\"' + url + '\">' + url + '</a>');\r\n  };\r\n\r\n  var updateLayout = function ($tbodys, archiveMode) {\r\n    var $parent = $tbodys.parent();\r\n    $tbodys\r\n      .detach()\r\n      .each(function () {\r\n        var $tbody = $(this),\r\n            filter = archiveMode ? '.archived' : ':not(.archived)',\r\n            $trs = $('tr' + filter, $tbody).filter(':not(.spacer)');\r\n        if ($trs.length > 0) {\r\n          $trs.filter('.first').removeClass('first');\r\n          $tbody.removeClass('hidden');\r\n          $trs.first().addClass('first');\r\n        } else {\r\n          $tbody.addClass('hidden');\r\n        }\r\n      })\r\n      .appendTo($parent);\r\n  };\r\n\r\n  var hookUserHistory = function () {\r\n    // Loading the HTML from the server may have failed\r\n    $history = $('#history').detach();\r\n    if (!$history.length) {\r\n      return $history;\r\n    }\r\n\r\n    // Cache some useful elements\r\n    var $iframe = $('iframe', $history),\r\n        $viewing = $('#viewing', $history),\r\n        $bins = $history,\r\n        $tbodys = $('tbody', $history),\r\n        $trs = $('tr', $history),\r\n        $toggle = $('.toggle_archive', $history),\r\n        current = null,\r\n        hoverTimer = null;\r\n\r\n    // Archive & un-archive click handlers\r\n    $bins.delegate('.archive, .unarchive', 'click', function () {\r\n      var $this = $(this),\r\n          $row = $this.parents('tr');\r\n      // Instantly update this row and the page layout\r\n      $row.toggleClass('archived');\r\n\r\n      analytics[this.pathname.indexOf('unarchive') === -1 ? 'archive' : 'unarchive'](jsbin.root + $row.data('url'));\r\n\r\n      updateLayout($tbodys, $history.hasClass('archive_mode'));\r\n      // Then send the update to the server\r\n      $.ajax({\r\n        type: 'POST',\r\n        url: $this.attr('href'),\r\n        error: function () {\r\n          // Undo if something went wrong\r\n          alert('Something went wrong, please try again');\r\n          $row.toggleClass('archived');\r\n          updateLayout($tbodys, $history.hasClass('archive_mode'));\r\n        },\r\n        success: function () {}\r\n      });\r\n      return false;\r\n    });\r\n\r\n    // Handle toggling of archive view\r\n    $toggle.change(function () {\r\n      $history.toggleClass('archive_mode');\r\n      var archive = $history.hasClass('archive_mode');\r\n      analytics.archiveView(archive);\r\n      updateLayout($tbodys, archive);\r\n    });\r\n\r\n    var selected = null;\r\n    $bins.delegate('a', 'click', function (event) {\r\n      if (event.shiftKey || event.metaKey) { return; }\r\n\r\n      var $this = $(this);\r\n\r\n      if ($this.closest('.action').length) {\r\n        // let the existing handlers deal with action links\r\n        return;\r\n      }\r\n\r\n      event.preventDefault();\r\n      event.stopImmediatePropagation(); // prevent further delegates\r\n      if ($this.data('toggle') === 'history') {\r\n        jsbin.panels.allEditors(function (panel) {\r\n          if (panel.editor.getCode().trim().length) {\r\n            panel.show();\r\n          }\r\n        });\r\n        return;\r\n      }\r\n      var $tr = $this.closest('tr');\r\n      var data = $tr.data();\r\n      var url = jsbin.root + data.url;\r\n\r\n      if (selected === this) {\r\n        window.location = data.editUrl;\r\n      } else {\r\n        $trs.removeClass('selected');\r\n        $tr.addClass('selected');\r\n        updatePreview(url, $iframe);\r\n        updateViewing(url, $viewing);\r\n\r\n        selected = this;\r\n      }\r\n    });\r\n\r\n    // Load bin from data-edit-url attribute when user clicks on a row\r\n    $bins.delegate('tr:not(.spacer)', 'click', function (event) {\r\n      if (event.shiftKey || event.metaKey) { return; }\r\n      $(this).find('.url a:first').click();\r\n    });\r\n\r\n    // Update the time every 30 secs\r\n    // Need to replace Z in ISO8601 timestamp with +0000 so prettyDate() doesn't\r\n    // completely remove it (and parse the date using the local timezone).\r\n    $('a[pubdate]', $history).attr('pubdate', function (i, val) {\r\n      return val.replace('Z', '+0000');\r\n    }).prettyDate();\r\n\r\n    // Update the layout straight away\r\n    setTimeout(function () {\r\n      updateLayout($tbodys, false);\r\n    }, 0);\r\n\r\n    $document.trigger('history:open');\r\n\r\n    return $history;\r\n  };\r\n\r\n  // inside a ready call because history DOM is rendered *after* our JS to improve load times.\r\n  $(document).on('jsbinReady', function ()  {\r\n    if (jsbin.embed) {\r\n      return;\r\n    }\r\n\r\n    var $panelButtons = $('#panels a'),\r\n        $homebtn = $('.homebtn'),\r\n        panelsVisible = $body.hasClass('panelsVisible');\r\n\r\n    var panelCloseIntent = function() {\r\n      var activeCount = $panelButtons.filter('.active').length;\r\n      if (activeCount === 1 && $(this).hasClass('active')) {\r\n        loadList();\r\n      }\r\n    };\r\n\r\n    // this code attempts to only call the list ajax request only if\r\n    // the user should want to see the list page - most users will\r\n    // jump in and jump out of jsbin, and never see this page,\r\n    // so let's not send this ajax request.\r\n    //\r\n    // The list should be loaded when:\r\n    //   - user hovers the home button\r\n    //   - they close all the panels\r\n    //   - they arrive at the page with no panels open\r\n\r\n    $homebtn.on('click', loadList);\r\n    $panelButtons.on('mousedown', panelCloseIntent);\r\n\r\n    $document.on('history:load', loadList);\r\n\r\n    if (!panelsVisible) {\r\n      loadList();\r\n    }\r\n\r\n  });\r\n\r\n  return {\r\n    loadList,\r\n    updatePreview,\r\n    updateViewing,\r\n    updateLayout,\r\n    hookUserHistory\r\n  };\r\n\r\n});\ndefine('skylark-jsbin-client/chrome/esc',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n  var loginVisible = false,\r\n      dropdownOpen = false,\r\n      keyboardHelpVisible = false,\r\n      urlHelpVisible = false,\r\n      sideNavVisible = false,\r\n      infocardVisible = false;\r\n\r\n  jsbin.$document.keydown(function (event) {\r\n    if (event.which == 27) {//} || (keyboardHelpVisible && event.which == 191 && event.shiftKey && event.metaKey)) {\r\n      hideOpen();\r\n    }\r\n  });\r\n\r\n  function hideOpen() {\r\n    if (infocardVisible) {\r\n      $('#infocard').removeClass('open');\r\n      infocardVisible = false;\r\n    }\r\n    if (sideNavVisible) {\r\n      $body.removeClass('show-nav');\r\n      sideNavVisible = false;\r\n    }\r\n    if (urlHelpVisible) {\r\n      $body.removeClass('urlHelp');\r\n      urlHelpVisible = false;\r\n      analytics.closeMenu('help');\r\n    } else if (keyboardHelpVisible) {\r\n      $body.removeClass('keyboardHelp');\r\n      keyboardHelpVisible = false;\r\n      analytics.closeMenu('keyboardHelp');\r\n    } else if (dropdownOpen) {\r\n      closedropdown();\r\n    } else if (loginVisible) {\r\n      $('#login').hide();\r\n      analytics.closeMenu('login');\r\n      loginVisible = false;\r\n    }\r\n  }\r\n\r\n  jsbin.$document.delegate('.modal', 'click', function (event) {\r\n    if ($(event.target).is('.modal')) {\r\n      hideOpen();\r\n    }\r\n  });\r\n});\r\n\ndefine('skylark-jsbin-client/chrome/share',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n  'use strict';\r\n  /*globals $, panels, saveChecksum, jsbin, $document, documentTitle*/\r\n\r\n  // only continue if the new share is enabled\r\n  if ($('#sharemenu .share-split').length === 0) {\r\n    return;\r\n  }\r\n\r\n  var mapping = {\r\n    live: 'output',\r\n    javascript: 'js'\r\n  };\r\n  var $sharepanels = $('#sharepanels input[type=\"checkbox\"]');\r\n\r\n  var selectedSnapshot = jsbin.state.revision;\r\n\r\n  $document.on('saved', function () {\r\n    selectedSnapshot = jsbin.state.revision;\r\n  });\r\n\r\n  $document.on('snapshot', function () {\r\n    jsbin.state.changed = false;\r\n    if (window.history.replaceState) {\r\n      window.history.replaceState(null, '', jsbin.getURL({ withRevision: true }) + '/edit?' + panels.getQuery());\r\n    }\r\n  });\r\n\r\n  var $sharemenu = $('#sharemenu').bind('open', function () {\r\n    // select the right panels\r\n    // hideOpen();\r\n    $sharepanels.prop('checked', false);\r\n    jsbin.panels.getVisible().forEach(function (p) {\r\n      $sharepanels.filter('[value=\"' + (mapping[p.id] || p.id) + '\"]').prop('checked', true);\r\n    });\r\n\r\n    // if we're the latest bin, then allow the user to switch to a snapshot\r\n    if (jsbin.state.latest) {\r\n      // if they have write access then select the latest & live by default\r\n      if (jsbin.state.checksum) {\r\n        $realtime.prop('checked', jsbin.state.latest);\r\n        $snapshot.prop('checked', false);\r\n\r\n        $andlive.show();\r\n      // otherwise select the snapshot first\r\n      } else {\r\n        $realtime.prop({ checked: false });\r\n        $snapshot.prop('checked', true);\r\n        $andlive.hide();\r\n      }\r\n\r\n      $withLiveReload.show();\r\n    } else {\r\n      // otherwise, disable live\r\n      $realtime.prop({ checked: false, disabled: true });\r\n      $snapshot.prop('checked', true);\r\n      $withLiveReload.hide();\r\n    }\r\n\r\n    update();\r\n  });\r\n  $sharemenu.find('.lockrevision').on('change', function () {\r\n    saveChecksum = false; // jshint ignore:line\r\n    jsbin.state.checksum = false;\r\n    $document.trigger('locked');\r\n  });\r\n  var $sharepreview = $('#share-preview');\r\n  var $realtime = $('#sharebintype input[type=radio][value=\"realtime\"]');\r\n  var $snapshot = $('#sharebintype input[type=radio][value=\"snapshot\"]');\r\n  var link = $sharemenu.find('a.link')[0];\r\n  var linkselect = $sharemenu.find('input[name=\"url\"]')[0];\r\n  var embed = $sharemenu.find('textarea')[0];\r\n  var form = $sharemenu.find('form')[0];\r\n  var $directLinks = $sharemenu.find('.direct-links');\r\n  var $andlive = $('#andlive');\r\n  var $withLiveReload = $sharemenu.find('.codecasting');\r\n\r\n  // get an object representation of a form's state\r\n  function formData(form) {\r\n    var length = form.length;\r\n    var data = {};\r\n    var value;\r\n    var el;\r\n    var type;\r\n    var name;\r\n\r\n    var append = function (data, name, value) {\r\n      if (data[name] === undefined) {\r\n        data[name] = value;\r\n      } else {\r\n        if (typeof data[name] === 'string') {\r\n          data[name] = [data[name]];\r\n        }\r\n        data[name].push(value);\r\n      }\r\n    };\r\n\r\n    for (var i = 0; i < length; i++) {\r\n      el = form[i];\r\n      value = el.value;\r\n      type = el.type;\r\n      name = el.name;\r\n\r\n      if (type === 'radio') {\r\n        if (el.checked) {\r\n          append(data, name, value);\r\n        }\r\n      } else if (type === 'checkbox') {\r\n        if (data[name] === undefined) {\r\n          data[name] = [];\r\n        }\r\n        if (el.checked) {\r\n          append(data, name, value);\r\n        }\r\n      } else {\r\n        append(data, name, value);\r\n      }\r\n    }\r\n\r\n    return data;\r\n  }\r\n\r\n  function update() {\r\n    var data = formData(form);\r\n    var url = jsbin.getURL({ root: jsbin.shareRoot });\r\n    var OGurl = jsbin.getURL();\r\n\r\n    if (data.state === 'snapshot' && jsbin.state.latest) {\r\n      url += '/' + selectedSnapshot;\r\n      OGurl += '/' + selectedSnapshot;\r\n    }\r\n\r\n    var shareurl = url;\r\n\r\n    // get a comma separated list of the panels that should be shown\r\n    var query = data.panel.join(',');\r\n\r\n    if (query) {\r\n      query = '?' + query;\r\n    }\r\n\r\n    $sharepanels.prop('disabled', data.view === 'output');\r\n    $sharepreview.attr('class', data.view);\r\n\r\n    if (data.view !== 'output') {\r\n      $sharepreview.find('.editor div').each(function () {\r\n        this.hidden = data.panel.indexOf(this.className) === -1;\r\n      });\r\n    }\r\n\r\n    if (data.view === 'editor') {\r\n      shareurl += '/edit';\r\n    } else {\r\n      query = '';\r\n    }\r\n\r\n    // create the direct links, it'll be faster to inject HTML rather than\r\n    // updating hrefs of a bunch of HTML elements\r\n    $directLinks.empty();\r\n\r\n    var directLinksHTML = []; //['<a href=\"' + url + '.html\">html</a>'];\r\n\r\n    var code = ''\r\n    var ext = '';\r\n\r\n    code = jsbin.panels.panels.html.getCode().trim();\r\n\r\n    if (code) {\r\n      ext = processors[jsbin.state.processors.html || 'html'].extensions[0];\r\n      if (ext !== 'html') {\r\n        directLinksHTML.push('<a target=\"_blank\" href=\"' + url + '.' + ext + '\">' + ext + '</a>');\r\n      } else if (code.toLowerCase().indexOf('<svg') === 0) {\r\n        directLinksHTML.push('<a target=\"_blank\" href=\"' + url + '.svg\">svg</a>');\r\n      }\r\n    }\r\n\r\n    if (jsbin.panels.panels.css.getCode().trim()) {\r\n      ext = processors[jsbin.state.processors.css || 'css'].extensions[0];\r\n      if (ext !== 'css') {\r\n        directLinksHTML.push('<a target=\"_blank\" href=\"' + url + '.css\">css</a>');\r\n      }\r\n      directLinksHTML.push('<a target=\"_blank\" href=\"' + url + '.' + ext + '\">' + ext + '</a>');\r\n    }\r\n\r\n    code = jsbin.panels.panels.javascript.getCode().trim();\r\n\r\n    if (code) {\r\n      ext = processors[jsbin.state.processors.javascript || 'javascript'].extensions[0];\r\n\r\n      if (ext !== 'js') {\r\n        directLinksHTML.push('<a target=\"_blank\" href=\"' + url + '.js\">js</a>');\r\n      }\r\n\r\n      try {\r\n        JSON.parse(code);\r\n        directLinksHTML.push('<a target=\"_blank\" href=\"' + url + '.json\">json</a>');\r\n      } catch (e) {\r\n        directLinksHTML.push('<a target=\"_blank\" href=\"' + url + '.' + ext + '\">' + ext + '</a>');\r\n      }\r\n\r\n    }\r\n\r\n    $directLinks.html(directLinksHTML.join(''));\r\n\r\n    linkselect.value = link.href = shareurl + query;\r\n    embed.value = ('<a class=\"jsbin-embed\" href=\"' + OGurl + '/embed' + query + '\">' + documentTitle + ' on jsbin.com</a><' + 'script src=\"' + jsbin.static + '/js/embed.min.js?' + jsbin.version + '\"><' + '/script>').replace(/<>\"&/g, function (m) {\r\n        return {\r\n          '<': '&lt;',\r\n          '>': '&gt;',\r\n          '\"': '&quot;',\r\n          '&': '&amp;'\r\n        }[m];\r\n      });\r\n  }\r\n\r\n  // when the user clicks on \"snapshot\" we automatically create a snapshot at\r\n  // that point (technically this isn't a snapshot, but clearing the write\r\n  // access, so the next user input creates the *next* snapshot - which is\r\n  // actually the latest copy).\r\n  $('#sharebintype input[type=radio]').on('change', function () {\r\n    if (this.value === 'snapshot') {\r\n      jsbin.state.checksum = false;\r\n      saveChecksum = false; // jshint ignore:line\r\n      $withLiveReload.hide();\r\n    } else {\r\n      $withLiveReload.show();\r\n    }\r\n  });\r\n\r\n  $sharemenu.find('input').on('change', update);\r\n\r\n  $document.on('saved', function () {\r\n\r\n    // revert to the latest bin state\r\n    $realtime.prop('checked', true);\r\n\r\n    // show the share menu\r\n    $sharemenu.removeClass('hidden');\r\n\r\n    update();\r\n  });\r\n\r\n  var $share = $('#share').closest('.menu');\r\n  var shareElement = $('#sharemenu a')[0];\r\n  var $showShare = $('a.show-share').on('click', function () {\r\n    if ($share.hasClass('open')) {\r\n      closedropdown(shareElement);\r\n    } else {\r\n      opendropdown(shareElement, true); // true = no focus\r\n    }\r\n    $showShare.blur();\r\n  });\r\n\r\n});\r\n\ndefine('skylark-jsbin-client/chrome/issue',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n\r\n  /*global $:true, jsbin:true */\r\n    'use strict';\r\n\r\n    function githubIssue() {\r\n      var url = 'http://github.com/jsbin/jsbin/issues/new';\r\n      var body = ['Please provide any additional information, record a screencast ',\r\n                 'with http://quickcast.io or http://screenr.com and attach a screenshot ',\r\n                 'if possible.\\n\\n**JS Bin info**\\n\\n* [%url%/edit](%url%/edit)\\n* ',\r\n                 window.navigator.userAgent + '\\n',\r\n                 (jsbin.user && jsbin.user.name ? '* ' + jsbin.user.name : ''),\r\n                 '\\n'].join('');\r\n\r\n      return url + '?body=' + encodeURIComponent(body.replace(/%url%/g, jsbin.getURL({ withRevision: true })));\r\n    }\r\n\r\n    var $newissue = $('#newissue');\r\n\r\n    $('#help').parent().on('open', function () {\r\n      $newissue.attr('href', githubIssue());\r\n    });\r\n\r\n    return githubIssue;\r\n\r\n\r\n});\ndefine('skylark-jsbin-client/chrome/download',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\",\r\n   \"./analytics\"\r\n],function ($,jsbin,analytics) {\r\n\t$('#download').click(function (event) {\r\n\t  event.preventDefault();\r\n\t  window.location = jsbin.getURL({ withRevision: true }) + '/download';\r\n\t  analytics.download();\r\n\t});\r\n});\ndefine('skylark-jsbin-client/chrome/login',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n  /* global $ */\r\n\r\n  $('form.login').submit(function (event) {\r\n    'use strict';\r\n    event.preventDefault();\r\n\r\n    var form = $(this),\r\n        name = form.find('input[name=username]').val(),\r\n        key = form.find('input[name=password]').val(),\r\n        email = form.find('input[name=email]').val(),\r\n        $loginFeedback = form.find('.loginFeedback');\r\n\r\n\r\n    // jsbin.settings.home = name; // will save later\r\n    $loginFeedback.show().text('Checking...');\r\n\r\n    $.ajax({\r\n      url: form.attr('action'),\r\n      data: { username: name, key: key, email: email },\r\n      type: 'POST',\r\n      dataType: 'json',\r\n      complete: function (jqXHR) {\r\n        var data = $.parseJSON(jqXHR.responseText) || {};\r\n        // cookie is required to share with the server so we can do a redirect on new bin\r\n        if (jqXHR.status === 200) {\r\n          if (data.avatar) {\r\n            $('a.avatar').find('img').remove().end().prepend('<img src=\"' + data.avatar + '\">');\r\n          }\r\n          if (data.message) {\r\n            $loginFeedback.text(data.message);\r\n          } else {\r\n            window.location = window.location.pathname + window.location.search;\r\n          }\r\n        } else {\r\n          analytics.login(false);\r\n          $loginFeedback.text(data.message || ('\"' + name + '\" has already been taken. Please either double check the password, or choose another username.'));\r\n        }\r\n      }\r\n    });\r\n  });\r\n\r\n});\ndefine('skylark-jsbin-client/chrome/tips',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n\r\n    var $html = $(document.documentElement),\r\n        $tip = $('#tip'),\r\n        $tipContent = $('p', $tip),\r\n        tipTimeout;\r\n\r\n    var removeTip = function (cb) {\r\n      $html.removeClass('showtip');\r\n      $tip.removeClass();\r\n      $tipContent.html('');\r\n      $(window).resize();\r\n      cb && setTimeout(cb, 0);\r\n    };\r\n\r\n    var setTip = function (data) {\r\n      clearTimeout(tipTimeout);\r\n      $tipContent.html(data.content);\r\n      $tip.removeClass().addClass(data.type || 'info');\r\n      $html.addClass('showtip');\r\n      if (!data.autohide) return;\r\n      tipTimeout = setTimeout(function () {\r\n        removeTip();\r\n      }, parseInt(data.autohide, 10) || 5 * 1000);\r\n    };\r\n\r\n    /**\r\n     * Trigger a tip to be shown.\r\n     *\r\n     *   $document.trigger('tip', 'You have an infinite loop in your HTML.');\r\n     *\r\n     *    $document.trigger('tip', {\r\n     *      type: 'error',\r\n     *      content: 'Do you even Javascript?',\r\n     *      autohide: 8000\r\n     *    });\r\n     */\r\n    jsbin.$document.on('tip', function (event, data) {\r\n      var tipData = data;\r\n      if (typeof data === 'string') {\r\n        tipData = {};\r\n        tipData.content = data;\r\n        tipData.type = 'info';\r\n      }\r\n      // If the content and the type haven't changed, just set it again.\r\n      if ($tipContent.html() === tipData.content &&\r\n          $tip.hasClass(tipData.type)) return setTip(data);\r\n      removeTip(function () {\r\n        setTip(tipData);\r\n      });\r\n    });\r\n\r\n    $('#tip').on('click', 'a.dismiss', function () {\r\n      removeTip();\r\n      return false;\r\n    });\r\n\r\n    // Escape\r\n   jsbin.$document.keydown(function (event) {\r\n      if (event.which == 27) {\r\n        removeTip();\r\n      }\r\n    });\r\n\r\n  });\ndefine('skylark-jsbin-client/chrome/keys',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n  /*global jsbin*/\r\n  /*global $document*/\r\n  'use strict';\r\n\r\n  // don't store the keys if they're logged in, since we have this on the server\r\n  if (jsbin.user && jsbin.user.name) {\r\n    return;\r\n  }\r\n\r\n  var keys = {};\r\n\r\n  var find = function (url) {\r\n    var key = keys[url || jsbin.getURL({ withRevision: true, withoutRoot: true })] || {};\r\n    return key.c;\r\n  };\r\n\r\n  try {\r\n    if ('localStorage' in window && window['localStorage'] !== null) { // jshint ignore:line\r\n\r\n    }\r\n  } catch(e){\r\n    return find;\r\n  }\r\n\r\n  function init() {\r\n    keys = JSON.parse(localStorage.keys || '{}');\r\n  }\r\n\r\n  $document.on('saved', function () {\r\n    keys[jsbin.getURL({ withRevision: false, withoutRoot: true })] = { s: jsbin.state.revsion, c: jsbin.state.checksum, d: (new Date()).getTime() };\r\n    localStorage.keys = JSON.stringify(keys);\r\n  });\r\n\r\n  // update the key lookup when a new key is stored\r\n  window.addEventListener('storage', function (event) {\r\n    if (event.key === 'keys') {\r\n      init();\r\n    }\r\n  });\r\n\r\n  init();\r\n\r\n  return jsbin.keys = find;\r\n\r\n});\ndefine('skylark-jsbin-client/chrome/save',[\r\n   \"../jsbin\"\r\n],function (jsbin) {\r\n  /*jshint strict: false */\r\n  /*globals $, analytics, jsbin, documentTitle, $document, throttle, editors*/\r\n  var saving = {\r\n    todo: {\r\n      html: false,\r\n      css: false,\r\n      javascript: false\r\n    },\r\n    _inprogress: false,\r\n    inprogress: function (inprogress) {\r\n      if (typeof inprogress === 'undefined') {\r\n        return saving._inprogress;\r\n      }\r\n\r\n      saving._inprogress = inprogress;\r\n      if (inprogress === false) {\r\n        var panels = ['html','css','javascript'];\r\n\r\n        var save = function () {\r\n          var todo = panels.pop();\r\n          if (todo && saving.todo[todo]) {\r\n            saving._inprogress = true;\r\n            updateCode(todo, save);\r\n            saving.todo[todo] = false;\r\n          } else if (todo) {\r\n            save();\r\n          }\r\n        };\r\n\r\n        save();\r\n      }\r\n    }\r\n  };\r\n\r\n  function getTagContent(tag) {\r\n    var html = jsbin.panels.panels.html.getCode();\r\n    var result = '';\r\n\r\n    // if we don't have the tag, bail with an empty string\r\n    if (html.indexOf('<' + tag) === -1) {\r\n      return result;\r\n    }\r\n\r\n    if (tag !== 'title' && tag !== 'meta') {\r\n      console.error('getTagContent for ' + tag + ' is not supported');\r\n      return result;\r\n    }\r\n\r\n    // grab the content based on the earlier defined regexp\r\n    html.replace(getTagContent.re[tag], function (all, capture1, capture2) {\r\n      result = tag === 'title' ? capture1 : capture2;\r\n    });\r\n\r\n    return result;\r\n  }\r\n\r\n  getTagContent.re = {\r\n    meta: /(<meta name=\"description\" content=\")([^\"]*)/im,\r\n    title: /<title>(.*)<\\/title>/im\r\n  };\r\n\r\n\r\n  // to allow for download button to be introduced via beta feature\r\n  $('a.save').click(function (event) {\r\n    event.preventDefault();\r\n\r\n    analytics.milestone();\r\n    // if save is disabled, hitting save will trigger a reload\r\n    var ajax = true;\r\n    if (jsbin.saveDisabled === true) {\r\n      ajax = false;\r\n    }\r\n\r\n    if ((jsbin.state.changed || jsbin.mobile) || !jsbin.owner()) {\r\n      saveCode('save', ajax);\r\n    }\r\n\r\n    return false;\r\n  });\r\n\r\n  var $shareLinks = $('#share .link');\r\n  var $panelCheckboxes = $('#sharemenu #sharepanels input');\r\n\r\n  // TODO remove split when live\r\n  var split = $('#sharemenu .share-split').length;\r\n\r\n  // TODO candidate for removal\r\n  function updateSavedState() {\r\n    'use strict';\r\n    if (split) {\r\n      return;\r\n    }\r\n\r\n    var mapping = {\r\n      live: 'output',\r\n      javascript: 'js',\r\n      css: 'css',\r\n      html: 'html',\r\n      console: 'console'\r\n    };\r\n\r\n    var withRevision = true;\r\n\r\n    var query = $panelCheckboxes.filter(':checked').map(function () {\r\n      return mapping[this.getAttribute('data-panel')];\r\n    }).get().join(',');\r\n    $shareLinks.each(function () {\r\n      var path = this.getAttribute('data-path');\r\n      var url = jsbin.getURL({ withRevision: withRevision }) + path + (query && this.id !== 'livepreview' ? '?' + query : ''),\r\n          nodeName = this.nodeName;\r\n      var hash = panels.getHighlightLines();\r\n\r\n      if (hash) {\r\n        hash = '#' + hash;\r\n      }\r\n\r\n      if (nodeName === 'A') {\r\n        this.href = url;\r\n      } else if (nodeName === 'INPUT') {\r\n        this.value = url;\r\n        if (path === '/edit') {\r\n          this.value += hash;\r\n        }\r\n      } else if (nodeName === 'TEXTAREA') {\r\n        this.value = ('<a class=\"jsbin-embed\" href=\"' + url + hash + '\">' + documentTitle + '</a><' + 'script src=\"' + jsbin.static + '/js/embed.js\"><' + '/script>').replace(/<>\"&/g, function (m) {\r\n            return {\r\n              '<': '&lt;',\r\n              '>': '&gt;',\r\n              '\"': '&quot;',\r\n              '&': '&amp;'\r\n            }[m];\r\n          });\r\n      }\r\n    });\r\n  }\r\n\r\n  $('#sharemenu').bind('open', updateSavedState);\r\n  $('#sharebintype input[type=radio]').on('click', function () {\r\n    if (this.value === 'snapshot') {\r\n      jsbin.state.checksum = false;\r\n      saveChecksum = false;\r\n    }\r\n    updateSavedState();\r\n  });\r\n\r\n  var lastHTML = null;\r\n\r\n  function updateDocMeta(event, data) {\r\n    if (data) {\r\n      if (data.panelId !== 'html') {\r\n        return; // ignore non-html updates\r\n      }\r\n    }\r\n\r\n    var currentHTML = jsbin.panels.panels.html.getCode();\r\n    if (lastHTML !== currentHTML) {\r\n      lastHTML = currentHTML;\r\n\r\n      var description = getTagContent('meta');\r\n      if (description !== jsbin.state.description) {\r\n        jsbin.state.description = description;\r\n        jsbin.state.updateSettings({ description: description });\r\n      }\r\n\r\n      var title = getTagContent('title');\r\n      if (title !== jsbin.state.title) {\r\n        jsbin.state.title = title;\r\n        jsbin.state.updateSettings({ title: title });\r\n\r\n        documentTitle = title;\r\n        if (documentTitle) {\r\n          document.title = documentTitle + ' - ' + jsbin.name;\r\n        } else {\r\n          document.title = jsbin.name;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  $document.on('saveComplete', updateDocMeta); // update, not create\r\n\r\n  $document.on('saved', function () {\r\n    jsbin.state.changed = false;\r\n    updateSavedState();\r\n\r\n    $('#sharebintype input[type=radio][value=\"realtime\"]').prop('checked', true);\r\n\r\n    $shareLinks.closest('.menu').removeClass('hidden');\r\n\r\n    $('#jsbinurl').attr('href', jsbin.getURL()).removeClass('hidden');\r\n    $('#clone').removeClass('hidden');\r\n\r\n    updateDocMeta();\r\n  });\r\n\r\n  var saveChecksum = jsbin.state.checksum || store.sessionStorage.getItem('checksum') || false;\r\n\r\n  // store it back on state\r\n  jsbin.state.checksum = saveChecksum;\r\n\r\n  if (saveChecksum) {\r\n    // remove the disabled class, but also remove the cancelling event handlers\r\n    $('#share div.disabled').removeClass('disabled').unbind('click mousedown mouseup');\r\n  } else {\r\n    $('#share div.disabled').one('click', function (event) {\r\n      event.preventDefault();\r\n      $('a.save').click();\r\n    });\r\n  }\r\n\r\n  $document.one('saved', function () {\r\n    $('#share div.disabled').removeClass('disabled').unbind('click mousedown mouseup');\r\n  });\r\n\r\n  function onSaveError(jqXHR, panelId) {\r\n    if (jqXHR.status === 413) {\r\n      // Hijack the tip label to show an error message.\r\n      $('#tip p').html('Sorry this bin is too large for us to save');\r\n      $(document.documentElement).addClass('showtip');\r\n    } else if (jqXHR.status === 403) {\r\n      $document.trigger('tip', {\r\n        type: 'error',\r\n        content: 'I think there\\'s something wrong with your session and I\\'m unable to save. <a href=\"' + window.location + '\"><strong>Refresh to fix this</strong></a>, you <strong>will not</strong> lose your code.'\r\n      });\r\n    } else if (panelId) {\r\n      if (panelId) { savingLabels[panelId].text('Saving...').animate({ opacity: 1 }, 100); }\r\n      window._console.error({message: 'Warning: Something went wrong while saving. Your most recent work is not saved.'});\r\n    }\r\n  }\r\n\r\n\r\n\r\n  // only start live saving it they're allowed to (whereas save is disabled if they're following)\r\n  if (!jsbin.saveDisabled) {\r\n    $('.code.panel .label .name').append('<span class=\"saved\">Saved</span>');\r\n\r\n    var savingLabels = {\r\n      html: $('.panel.html .name span.saved'),\r\n      javascript: $('.panel.javascript .name span.saved'),\r\n      css: $('.panel.css .name span.saved'),\r\n    };\r\n\r\n    $document.bind('jsbinReady', function () {\r\n      jsbin.state.changed = false;\r\n      jsbin.panels.allEditors(function (panel) {\r\n        panel.on('processor', function () {\r\n          // if the url doesn't match the root - i.e. they've actually saved something then save on processor change\r\n          if (jsbin.root !== jsbin.getURL()) {\r\n            $document.trigger('codeChange', [{ panelId: panel.id }]);\r\n          }\r\n        });\r\n      });\r\n\r\n      $document.bind('codeChange', function (event, data) {\r\n        jsbin.state.changed = true;\r\n        // savingLabels[data.panelId].text('Saving');\r\n        if (savingLabels[data.panelId]) {\r\n          savingLabels[data.panelId].css({ 'opacity': 0 }).stop(true, true);\r\n        }\r\n      });\r\n\r\n      $document.bind('saveComplete', throttle(function (event, data) {\r\n        // show saved, then revert out animation\r\n        savingLabels[data.panelId]\r\n          .text('Saved')\r\n          .stop(true, true)\r\n          .animate({ opacity: 1 }, 100)\r\n          .delay(1200)\r\n          .animate({ opacity: 0 }, 500);\r\n      }, 500));\r\n\r\n      $document.bind('codeChange', throttle(function (event, data) {\r\n        if (!data.panelId) {\r\n          return;\r\n        }\r\n\r\n        if (jsbin.state.deleted) {\r\n          return;\r\n        }\r\n\r\n        var panelId = data.panelId;\r\n\r\n        jsbin.panels.savecontent();\r\n\r\n        if (saving.inprogress()) {\r\n          // queue up the request and wait\r\n          saving.todo[panelId] = true;\r\n          return;\r\n        }\r\n\r\n        saving.inprogress(true);\r\n\r\n        // We force a full save if there's no checksum OR if there's no bin code/url\r\n        if (!saveChecksum || !jsbin.state.code) {\r\n          // create the bin and when the response comes back update the url\r\n          saveCode('save', true);\r\n        } else {\r\n          updateCode(panelId);\r\n        }\r\n      }, 30 * 1000));\r\n    });\r\n  } else {\r\n    $document.one('jsbinReady', function () {\r\n      'use strict';\r\n      var shown = false;\r\n      if (!jsbin.embed && !jsbin.sandbox) {\r\n        $document.on('codeChange.live', function (event, data) {\r\n          if (!data.onload && !shown && data.origin !== 'setValue') {\r\n            shown = true;\r\n            var ismac = navigator.userAgent.indexOf(' Mac ') !== -1;\r\n            var cmd = ismac ? '' : 'ctrl';\r\n            var shift = ismac ? '' : 'shift';\r\n            var plus = ismac ? '' : '+';\r\n\r\n            $document.trigger('tip', {\r\n              type: 'notification',\r\n              content: 'You\\'re currently viewing someone else\\'s live stream, but you can <strong><a class=\"clone\" href=\"' + jsbin.root + '/clone\">clone your own copy</a></strong> (' + cmd + plus + shift + plus + 'S) at any time to save your edits'\r\n            });\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  function compressKeys(keys, obj) {\r\n    obj.compressed = keys;\r\n    keys.split(',').forEach(function (key) {\r\n      obj[key] = LZString.compressToUTF16(obj[key]);\r\n    });\r\n  }\r\n\r\n  function updateCode(panelId, callback) {\r\n    var panelSettings = {};\r\n\r\n    if (jsbin.state.processors) {\r\n      panelSettings.processors = jsbin.state.processors;\r\n    }\r\n\r\n    var data = {\r\n      code: jsbin.state.code,\r\n      revision: jsbin.state.revision,\r\n      method: 'update',\r\n      panel: panelId,\r\n      content: editors[panelId].getCode(),\r\n      checksum: saveChecksum,\r\n      settings: JSON.stringify(panelSettings),\r\n    };\r\n\r\n    if (jsbin.settings.useCompression && location.protocol === 'http:') {\r\n      compressKeys('content', data);\r\n    }\r\n\r\n    if (jsbin.state.processors[panelId] &&\r\n      jsbin.state.processors[panelId] !== panelId &&\r\n      jsbin.state.cache[panelId]) {\r\n      data.processed = jsbin.state.cache[panelId].result;\r\n    }\r\n\r\n    $.ajax({\r\n      url: jsbin.getURL({ withRevision: true }) + '/save',\r\n      data: data,\r\n      type: 'post',\r\n      dataType: 'json',\r\n      headers: {'Accept': 'application/json'},\r\n      success: function (data) {\r\n        $document.trigger('saveComplete', { panelId: panelId });\r\n        if (data.error) {\r\n          saveCode('save', true, function () {\r\n            // savedAlready = data.checksum;\r\n          });\r\n        } else {\r\n          jsbin.state.latest = true;\r\n        }\r\n      },\r\n      error: function (jqXHR) {\r\n        onSaveError(jqXHR, panelId);\r\n      },\r\n      complete: function () {\r\n        saving.inprogress(false);\r\n        if (callback) { callback(); }\r\n      }\r\n    });\r\n  }\r\n\r\n  $('a.clone').click(clone);\r\n  $('#tip').delegate('a.clone', 'click', clone);\r\n\r\n  function clone(event) {\r\n    event.preventDefault();\r\n\r\n    // save our panel layout - assumes our user is happy with this layout\r\n    jsbin.panels.save();\r\n    analytics.clone();\r\n\r\n    var $form = setupform('save,new');\r\n    $form.submit();\r\n\r\n    return false;\r\n  }\r\n\r\n  function setupform(method) {\r\n  var $form = $('form#saveform').empty()\r\n      .append('<input type=\"hidden\" name=\"javascript\" />')\r\n      .append('<input type=\"hidden\" name=\"html\" />')\r\n      .append('<input type=\"hidden\" name=\"css\" />')\r\n      .append('<input type=\"hidden\" name=\"method\" />')\r\n      .append('<input type=\"hidden\" name=\"_csrf\" value=\"' + jsbin.state.token + '\" />')\r\n      .append('<input type=\"hidden\" name=\"settings\" />')\r\n      .append('<input type=\"hidden\" name=\"checksum\" />');\r\n\r\n    var settings = {};\r\n\r\n    if (jsbin.state.processors) {\r\n      settings.processors = jsbin.state.processors;\r\n    }\r\n\r\n    // this prevents new revisions forking off the welcome bin\r\n    // because it's looking silly!\r\n    if (jsbin.state.code === 'welcome') {\r\n      $form.attr('action', '/save');\r\n    }\r\n\r\n    $form.find('input[name=settings]').val(JSON.stringify(settings));\r\n    $form.find('input[name=javascript]').val(editors.javascript.getCode());\r\n    $form.find('input[name=css]').val(editors.css.getCode());\r\n    $form.find('input[name=html]').val(editors.html.getCode());\r\n    $form.find('input[name=method]').val(method);\r\n    $form.find('input[name=checksum]').val(jsbin.state.checksum);\r\n\r\n    return $form;\r\n  }\r\n\r\n  function pad(n){\r\n    return n<10 ? '0'+n : n;\r\n  }\r\n\r\n  function ISODateString(d){\r\n    return d.getFullYear()+'-'\r\n      + pad(d.getMonth()+1)+'-'\r\n      + pad(d.getDate())+'T'\r\n      + pad(d.getHours())+':'\r\n      + pad(d.getMinutes())+':'\r\n      + pad(d.getSeconds())+'Z';\r\n  }\r\n\r\n  function saveCode(method, ajax, ajaxCallback) {\r\n    // create form and post to it\r\n    var $form = setupform(method);\r\n    // save our panel layout - assumes our user is happy with this layout\r\n    jsbin.panels.save();\r\n    jsbin.panels.saveOnExit = true;\r\n\r\n    var data = $form.serializeArray().reduce(function(obj, data) {\r\n      obj[data.name] = data.value;\r\n      return obj;\r\n    }, {});\r\n\r\n    if (jsbin.settings.useCompression) {\r\n      compressKeys('html,css,javascript', data);\r\n    }\r\n\r\n    if (ajax) {\r\n      $.ajax({\r\n        url: jsbin.getURL({ withRevision: true }) + '/save',\r\n        data: data,\r\n        dataType: 'json',\r\n        type: 'post',\r\n        headers: {'Accept': 'application/json'},\r\n        success: function (data) {\r\n          if (ajaxCallback) {\r\n            ajaxCallback(data);\r\n          }\r\n\r\n          store.sessionStorage.setItem('checksum', data.checksum);\r\n          saveChecksum = data.checksum;\r\n\r\n          jsbin.state.checksum = saveChecksum;\r\n          jsbin.state.code = data.code;\r\n          jsbin.state.revision = data.revision;\r\n          jsbin.state.latest = true; // this is never not true...end of conversation!\r\n          jsbin.state.metadata = { name: jsbin.user.name };\r\n          $form.attr('action', jsbin.getURL({ withRevision: true }) + '/save');\r\n\r\n          if (window.history && window.history.pushState) {\r\n            // updateURL(edit);\r\n            var hash = panels.getHighlightLines();\r\n            if (hash) { hash = '#' + hash; }\r\n            var query = panels.getQuery();\r\n            if (query) { query = '?' + query; }\r\n            // If split is truthy (> 0) then we are using the revisonless feature\r\n            // this is temporary until we release the feature!\r\n            window.history.pushState(null, '', jsbin.getURL({withRevision: !split}) + '/edit' + query + hash);\r\n            store.sessionStorage.setItem('url', jsbin.getURL({withRevision: !split}));\r\n          } else {\r\n            window.location.hash = data.edit;\r\n          }\r\n\r\n          $document.trigger('saved');\r\n        },\r\n        error: function (jqXHR) {\r\n          onSaveError(jqXHR, null);\r\n        },\r\n        complete: function () {\r\n          saving.inprogress(false);\r\n        }\r\n      });\r\n    } else {\r\n      $form.submit();\r\n    }\r\n  }\r\n\r\n});\ndefine('skylark-jsbin-client/chrome/navigation',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n  var $startingpoint = $('a.startingpoint').click(function (event) {\r\n    event.preventDefault();\r\n    if (localStorage) {\r\n      analytics.saveTemplate();\r\n      localStorage.setItem('saved-javascript', editors.javascript.getCode());\r\n      localStorage.setItem('saved-html', editors.html.getCode());\r\n      localStorage.setItem('saved-css', editors.css.getCode());\r\n\r\n      localStorage.setItem('saved-processors', JSON.stringify({\r\n        javascript: jsbin.panels.panels.javascript.processor.id,\r\n        html: jsbin.panels.panels.html.processor.id,\r\n        css: jsbin.panels.panels.css.processor.id,\r\n      }));\r\n\r\n      $document.trigger('tip', {\r\n        type: 'notification',\r\n        content: 'Starting template updated and saved',\r\n        autohide: 3000\r\n      });\r\n    } else {\r\n      $document.trigger('tip', {\r\n        type: 'error',\r\n        content: 'Saving templates isn\\'t supported in this browser I\\'m afraid. Sorry'\r\n      });\r\n    }\r\n    return false;\r\n  });\r\n\r\n  // if (localStorage && localStorage['saved-html']) {\r\n    // $startingpoint.append('')\r\n  // }\r\n\r\n  $('a.disabled').on('click mousedown mouseup', function (event) {\r\n    event.stopImmediatePropagation();\r\n    return false;\r\n  });\r\n\r\n  $('#loginbtn').click(function () {\r\n    analytics.login();\r\n    $(this).toggleClass('open');\r\n    // $('#login').show();\r\n    // loginVisible = true;\r\n    // return false;\r\n  });\r\n\r\n  $('a.logout').click(function (event) {\r\n    event.preventDefault();\r\n\r\n    // We submit a form here because I can't work out how to style the button\r\n    // element in the form to look the same as the anchor. Ideally we would\r\n    // remove that and just let the form submit itself...\r\n    $(this.hash).submit();\r\n    // Clear session storage so private bins wont be cached.\r\n    for (i = 0; i < store.sessionStorage.length; i++) {\r\n      key = store.sessionStorage.key(i);\r\n      if (key.indexOf('jsbin.content.') === 0) {\r\n        store.sessionStorage.removeItem(key);\r\n      }\r\n    }\r\n  });\r\n\r\n  $('.homebtn').click(function (event, data) {\r\n    if (this.id === 'avatar') {\r\n      analytics.openFromAvatar();\r\n    } else if (this.id === 'profile') {\r\n      analytics.openFromAvatar();\r\n      $(this).closest('.open').removeClass('open');\r\n    } else {\r\n      analytics.open(data);\r\n    }\r\n\r\n    hideOpen();\r\n\r\n    jsbin.panels.hideAll();\r\n    return false;\r\n  });\r\n\r\n  var $lockrevision = $('div.lockrevision').on('click', function (event) {\r\n    event.preventDefault();\r\n    saveChecksum = false;\r\n    $document.trigger('locked');\r\n  }).on('mouseup', function () {\r\n    return false;\r\n  });\r\n\r\n  $document.on('locked', function () {\r\n    if (!$lockrevision.data('locked')) {\r\n      analytics.lock();\r\n      $lockrevision.removeClass('icon-unlocked').addClass('icon-lock');\r\n      $lockrevision.html('<span>This bin is now locked from further changes</span>');\r\n      $lockrevision.data('locked', true);\r\n    }\r\n  });\r\n\r\n  // var $lockrevision = $('.lockrevision').on('click', function (event) {\r\n  // });\r\n\r\n  $document.on('saved', function () {\r\n    $lockrevision.removeClass('icon-lock').addClass('icon-unlocked').data('locked', false);\r\n    $lockrevision.html('<span>Click to lock and prevent further changes</span>');\r\n  });\r\n\r\n  // TODO decide whether to remove this, since it definitely doesn't work!\r\n  // $('#share input[type=text], #share textarea').on('beforecopy', function (event) {\r\n  //   console.log(this, this.getAttribute('data-path'));\r\n  //   analytics.share('copy', this.getAttribute('data-path').substring(1) || 'output');\r\n  // });\r\n\r\n  if (!$('#sharemenu .share-split').length) {\r\n    var $panelCheckboxes = $('#sharepanels input[type=\"checkbox\"]').on('change', function () {\r\n      updateSavedState();\r\n    });\r\n    $('#sharemenu').bind('open', function () {\r\n      $panelCheckboxes.attr('checked', false);\r\n      jsbin.panels.getVisible().forEach(function (panel) {\r\n        $panelCheckboxes.filter('[data-panel=\"' + panel.id + '\"]').prop('checked', true).change();\r\n      });\r\n\r\n    });\r\n\r\n  }\r\n\r\n  var dropdownOpen = false,\r\n      onhover = false,\r\n      menuDown = false;\r\n\r\n  function opendropdown(el, nofocus) {\r\n    var menu;\r\n    if (!dropdownOpen) {\r\n      menu = $(el).closest('.menu').addClass('open').trigger('open');\r\n      // $body.addClass('menuinfo');\r\n      analytics.openMenu(el.hash.substring(1));\r\n      var input = menu.find(':text:visible:first');\r\n\r\n      if (input.length && !jsbin.mobile) {\r\n        input.focus();\r\n        setTimeout(function () {\r\n          input[0].select();\r\n        }, 0);\r\n      }\r\n      dropdownOpen = el;\r\n    }\r\n  }\r\n\r\n  function closedropdown() {\r\n    menuDown = false;\r\n    if (dropdownOpen) {\r\n      dropdownButtons.closest('.menu').removeClass('open').trigger('close');\r\n      // $body.removeClass('menuinfo');\r\n      dropdownOpen = false;\r\n      onhover = false;\r\n      var f = jsbin.panels.focused;\r\n      if (f && !jsbin.mobile) {\r\n        f.focus();\r\n        if (f.editor) {\r\n          f.editor.focus();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  var dropdownButtons = $('.button-dropdown, .button-open').mousedown(function (e) {\r\n    $dropdownLinks.removeClass('hover');\r\n    if (dropdownOpen && dropdownOpen !== this) {\r\n      closedropdown();\r\n    }\r\n    if (!dropdownOpen) {\r\n      menuDown = true;\r\n      opendropdown(this);\r\n    }\r\n    e.preventDefault();\r\n    return false;\r\n  }).mouseup(function () {\r\n    if (menuDown) return false;\r\n  }).click(function () {\r\n    if (!menuDown) {\r\n      analytics.closeMenu(this.hash.substring(1));\r\n      closedropdown();\r\n    }\r\n    if (menuDown) {\r\n      $(this.hash).attr('tabindex', 0);\r\n      menuDown = false;\r\n      return jsbin.mobile;\r\n    }\r\n\r\n    menuDown = false;\r\n\r\n    $(this.hash).attr('tabindex', -1);\r\n    return false;\r\n  });\r\n\r\n  $('#actionmenu').click(function () {\r\n    dropdownOpen = true;\r\n  });\r\n\r\n  var ignoreUp = false;\r\n  $body.bind('mousedown', function (event) {\r\n    if (dropdownOpen) {\r\n      if ($(event.target).closest('.menu').length) {\r\n        ignoreUp = true;\r\n      }\r\n    }\r\n  }).bind('click mouseup', function (event) {\r\n    if (dropdownOpen && !ignoreUp) {\r\n      if (!$(event.target).closest('.menu').length) {\r\n        closedropdown();\r\n        return false;\r\n      }\r\n    }\r\n    ignoreUp = false;\r\n  });\r\n\r\n  var fromClick = false;\r\n  var $dropdownLinks = $('.dropdownmenu a, .dropdownmenu .button').mouseup(function (e) {\r\n    if (e.target.nodeName === 'INPUT') {\r\n      return;\r\n    }\r\n\r\n    setTimeout(closedropdown, 0);\r\n    analytics.selectMenu(this.getAttribute('data-label') || this.hash.substring(1) || this.href);\r\n    if (!fromClick) {\r\n      if (this.hostname === window.location.hostname) {\r\n        if ($(this).triggerHandler('click') !== false) {\r\n          window.location = this.href;\r\n        }\r\n      } else {\r\n        if (this.getAttribute('target')) {\r\n          window.open(this.href);\r\n        } else {\r\n          window.location = this.href;\r\n        }\r\n      }\r\n    }\r\n    fromClick = false;\r\n  }).mouseover(function () {\r\n    $dropdownLinks.removeClass('hover');\r\n    $(this).addClass('hover');\r\n  }).mousedown(function (e) {\r\n    if (e.target.nodeName === 'INPUT') {\r\n      return;\r\n    }\r\n    fromClick = true;\r\n  });\r\n\r\n  $('#jsbinurl').click(function (e) {\r\n    setTimeout(function () {\r\n      jsbin.panels.panels.live.hide();\r\n    }, 0);\r\n  });\r\n\r\n  $('#runwithalerts, li.run-with-js a').click(function (event, data) {\r\n    analytics.run(data);\r\n    if (editors.console.visible) {\r\n      editors.console.render(true);\r\n    } else {\r\n      renderLivePreview(true);\r\n    }\r\n    return false;\r\n  });\r\n\r\n  $('#runconsole').click(function () {\r\n    analytics.runconsole();\r\n    editors.console.render(true);\r\n    return false;\r\n  });\r\n\r\n  $('#clearconsole').click(function () {\r\n    jsconsole.clear();\r\n    return false;\r\n  });\r\n\r\n  $('#showhelp').click(function () {\r\n    $body.toggleClass('keyboardHelp');\r\n    keyboardHelpVisible = $body.is('.keyboardHelp');\r\n    if (keyboardHelpVisible) {\r\n      // analytics.help('keyboard');\r\n    }\r\n    return false;\r\n  });\r\n\r\n  $('a.toggle-side-nav').on(jsbin.mobile ? 'touchstart' : 'click', function () {\r\n    $body.toggleClass('show-nav');\r\n    sideNavVisible = $body.is('.show-nav');\r\n    if (!sideNavVisible && !jsbin.mobile) {\r\n      // we only focus the editor in desktop, otherwise the keyboard jumps up\r\n      $('#skipToEditor').click();\r\n    }\r\n    return sideNavVisible;\r\n  });\r\n\r\n\r\n  $('#showurls').click(function () {\r\n    $body.toggleClass('urlHelp');\r\n    urlHelpVisible = $body.is('.urlHelp');\r\n    if (urlHelpVisible) {\r\n      // analytics.urls();\r\n    }\r\n    return false;\r\n  });\r\n\r\n  $('.code.panel > .label > span.name').dblclick(function () {\r\n    jsbin.panels.allEditors(function (panel) {\r\n      var lineNumbers = !panel.editor.getOption('lineNumbers');\r\n      panel.editor.setOption('lineNumbers', lineNumbers);\r\n      jsbin.settings.editor.lineNumbers = lineNumbers;\r\n    });\r\n  });\r\n\r\n  $('a.createnew').click(function (event) {\r\n    event.preventDefault();\r\n    var i, key;\r\n    analytics.createNew();\r\n    // FIXME this is out and out [cr]lazy....\r\n    jsbin.panels.savecontent = function(){};\r\n    for (i = 0; i < store.sessionStorage.length; i++) {\r\n      key = store.sessionStorage.key(i);\r\n      if (key.indexOf('jsbin.content.') === 0) {\r\n        store.sessionStorage.removeItem(key);\r\n      }\r\n    }\r\n\r\n    // clear out the write checksum too\r\n    store.sessionStorage.removeItem('checksum');\r\n\r\n    jsbin.panels.saveOnExit = false;\r\n\r\n    // first try to restore their default panels\r\n    jsbin.panels.restore();\r\n\r\n    // if nothing was shown, show html & live\r\n    setTimeout(function () {\r\n      if (jsbin.panels.getVisible().length === 0) {\r\n        jsbin.panels.panels.html.show();\r\n        jsbin.panels.panels.live.show();\r\n      }\r\n      window.location = jsbin.root;\r\n    }, 0);\r\n  });\r\n\r\n  var $privateButton = $('#control a.visibilityToggle#private');\r\n  var $publicButton = $('#control a.visibilityToggle#public');\r\n\r\n  var $visibilityButtons = $('#control a.visibilityToggle').click(function(event) {\r\n    event.preventDefault();\r\n\r\n    var visibility = $(this).data('vis');\r\n\r\n    $.ajax({\r\n      url: jsbin.getURL({ withRevision: true }) + '/' + visibility,\r\n      type: 'post',\r\n      success: function (data) {\r\n\r\n        $document.trigger('tip', {\r\n          type: 'notification',\r\n          content: 'This bin is now ' + visibility,\r\n          autohide: 6000\r\n        });\r\n\r\n        $visibilityButtons.css('display', 'none');\r\n\r\n        if (visibility === 'public') {\r\n          $privateButton.css('display', 'block');\r\n        } else {\r\n          $publicButton.css('display', 'block');\r\n        }\r\n\r\n      }\r\n    });\r\n  });\r\n\r\n  $('form.login').closest('.menu').bind('close', function () {\r\n    $(this).find('.loginFeedback').empty().hide();\r\n    $('#login').removeClass('forgot');\r\n  });\r\n\r\n  $('#lostpass').click(function (e) {\r\n    $('#login').addClass('forgot').find('input[name=email]').focus();\r\n    return false;\r\n  });\r\n\r\n  jsbin.settings.includejs = jsbin.settings.includejs === undefined ? true : jsbin.settings.includejs;\r\n\r\n  // ignore for embed as there might be a lot of embeds on the page\r\n  if (!jsbin.embed && store.sessionStorage.getItem('runnerPending')) {\r\n    $document.trigger('tip', {\r\n      content: 'It looks like your last session may have crashed, so I\\'ve disabled \"Auto-run JS\" for you',\r\n      type: 'error',\r\n    });\r\n    store.sessionStorage.removeItem('runnerPending');\r\n    jsbin.settings.includejs = false;\r\n  }\r\n\r\n  $('#enablejs').change(function () {\r\n    jsbin.settings.includejs = this.checked;\r\n    analytics.enableLiveJS(jsbin.settings.includejs);\r\n    editors.live.render();\r\n  }).attr('checked', jsbin.settings.includejs);\r\n\r\n  if (!jsbin.embed && jsbin.settings.hideheader) {\r\n    $body.addClass('hideheader');\r\n  }\r\n\r\n  var cancelUp = false;\r\n  $('form input, form textarea').focus(function () {\r\n    this.select();\r\n    cancelUp = true;\r\n  }).mouseup(function () {\r\n    if (cancelUp) {\r\n      cancelUp = false;\r\n      return false;\r\n    }\r\n  });\r\n\r\n  if (window.location.hash) {\r\n    $('a[href$=\"' + window.location.hash + '\"]').mousedown();\r\n  }\r\n\r\n  var ismac = navigator.userAgent.indexOf(' Mac ') !== -1,\r\n      mackeys = {\r\n        'ctrl': '',\r\n        'shift': '',\r\n        'del': ''\r\n      };\r\n\r\n  $('#control').find('a[data-shortcut]').each(function () {\r\n    var $this = $(this),\r\n        data = $this.data();\r\n\r\n    var key = data.shortcut;\r\n    if (ismac) {\r\n      key = key.replace(/ctrl/i, mackeys.ctrl).replace(/shift/, mackeys.shift).replace(/del/, mackeys.del).replace(/\\+/g, '').toUpperCase();\r\n    }\r\n\r\n    $this.append('<span class=\"keyshortcut\">' + key + '</span>');\r\n  });\r\n\r\n  (function () {\r\n\r\n  var re = {\r\n    head: /<head(.*)\\n/i,\r\n    meta: /<meta name=\"description\".*?>/i,\r\n    metaContent: /content=\".*?\"/i\r\n  };\r\n\r\n  var metatag = '<meta name=\"description\" content=\"[add your bin description]\">\\n';\r\n\r\n  $('#addmeta').click(function () {\r\n    // if not - insert\r\n    // <meta name=\"description\" content=\"\" />\r\n    // if meta description is in the HTML, highlight it\r\n    var editor = jsbin.panels.panels.html,\r\n        cm = editor.editor,\r\n        html = editor.getCode();\r\n\r\n    if (!editor.visible) {\r\n      editor.show();\r\n    }\r\n\r\n    if (!re.meta.test(html)) {\r\n      if (re.head.test(html)) {\r\n        html = html.replace(re.head, '<head$1\\n' + metatag);\r\n      } else {\r\n        // slap in the top\r\n        html = metatag + html;\r\n      }\r\n    }\r\n\r\n    editor.setCode(html);\r\n\r\n    // now select the text\r\n    // editor.editor is the CM object...yeah, sorry about that...\r\n    var cursor = cm.getSearchCursor(re.meta);\r\n    cursor.findNext();\r\n\r\n    var contentCursor = cm.getSearchCursor(re.metaContent);\r\n    contentCursor.findNext();\r\n\r\n    var from = { line: cursor.pos.from.line, ch: cursor.pos.from.ch + '<meta name=\"description\" content=\"'.length },\r\n        to = { line: contentCursor.pos.to.line, ch: contentCursor.pos.to.ch - 1 };\r\n\r\n    cm.setCursor(from);\r\n    cm.setSelection(from, to);\r\n    cm.on('cursoractivity', function () {\r\n      cm.on('cursoractivity', null);\r\n      mark.clear();\r\n    });\r\n\r\n    var mark = cm.markText(from, to, { className: 'highlight' });\r\n\r\n    cm.focus();\r\n\r\n    return false;\r\n  });\r\n\r\n  $('a.publish-to-vanity').on('click', function (event) {\r\n    event.preventDefault();\r\n    analytics.publishVanity();\r\n\r\n    $.ajax({\r\n      type: 'post',\r\n      url: this.href,\r\n      data: { url: jsbin.getURL({ withRevision: true }) },\r\n      success: function () {\r\n        $document.trigger('tip', {\r\n          type: 'notification',\r\n          content: 'This bin is now published to your vanity URL: <a target=\"_blank\" href=\"' + jsbin.shareRoot + '\">' + jsbin.shareRoot + '</a>'\r\n        });\r\n      },\r\n      error: function (xhr) {\r\n        $document.trigger('tip', {\r\n          type: 'error',\r\n          content: 'There was a problem publishing to your vanity URL. Can you try again or file a <a target=\"_blank\" href=\"' + githubIssue() + '\">new issue</a>?'\r\n        });\r\n      }\r\n    })\r\n  });\r\n\r\n  $document.on('click', 'a.deleteallbins', function () {\r\n    if (jsbin.user && jsbin.state.metadata.name === jsbin.user.name) {\r\n      if (confirm('Delete all snapshots of this bin including this one?')) {\r\n      analytics.deleteAll();\r\n      $.ajax({\r\n        type: 'post',\r\n        url: jsbin.getURL() + '/delete-all',\r\n        success: function () {\r\n          jsbin.state.deleted = true;\r\n          $document.trigger('tip', {\r\n            type: 'error',\r\n            content: 'This bin and history is now deleted. You can continue to edit, but once you leave the bin can\\'t be retrieved'\r\n          });\r\n        },\r\n        error: function (xhr) {\r\n          if (xhr.status === 403) {\r\n            $document.trigger('tip', {\r\n              content: 'You don\\'t own this bin, so you can\\'t delete it.',\r\n              autohide: 5000\r\n            });\r\n          }\r\n        }\r\n      });\r\n\r\n    }\r\n    } else {\r\n      $document.trigger('tip', {\r\n        type: 'error',\r\n        content: 'You must be logged in <em><strong>the bin owner</strong></em> to delete all snapshots. <a target=\"_blank\" href=\"/help/delete-a-bin\">Need help?</a>'\r\n      });\r\n    }\r\n  });\r\n\r\n  $('a.deletebin').on('click', function (e) {\r\n    e.preventDefault();\r\n    if (confirm('Delete this bin?')) {\r\n      analytics['delete']();\r\n      $.ajax({\r\n        type: 'post',\r\n        url: jsbin.getURL({ withRevision: true }) + '/delete',\r\n        data: { checksum: jsbin.state.checksum },\r\n        success: function () {\r\n          jsbin.state.deleted = true;\r\n          $document.trigger('tip', {\r\n            type: 'error',\r\n            content: 'This bin is now deleted. You can continue to edit, but once you leave the bin can\\'t be retrieved'\r\n          });\r\n        },\r\n        error: function (xhr) {\r\n          if (xhr.status === 403) {\r\n            $document.trigger('tip', {\r\n              content: 'You don\\'t own this bin, so you can\\'t delete it.',\r\n              autohide: 5000\r\n            });\r\n          }\r\n        }\r\n      });\r\n\r\n    }\r\n  });\r\n\r\n  $('a.archivebin').on('click', function (e) {\r\n    e.preventDefault();\r\n    archive();\r\n  });\r\n\r\n  $('a.unarchivebin').on('click', function (e) {\r\n    e.preventDefault();\r\n    archive(false);\r\n  });\r\n\r\n  var $enableUniversalEditor = $('#enableUniversalEditor').on('change', function (e) {\r\n    e.preventDefault();\r\n\r\n    jsbin.settings.editor.simple = this.checked;\r\n    analytics.universalEditor(jsbin.settings.editor.simple);\r\n    settings.save(function () {\r\n      window.location.reload();\r\n    });\r\n  });\r\n\r\n  if (jsbin.settings.editor.simple) {\r\n    $enableUniversalEditor.prop('checked', true);\r\n  }\r\n\r\n  $('#skipToEditor').on('click keypress', function () {\r\n    var first = (jsbin.panels.getVisible() || ['html']).shift();\r\n    if (jsbin.settings.editor.simple || jsbin.mobile) {\r\n      $('#' + first.id).focus();\r\n    } else if (first) {\r\n      first.editor.focus();\r\n    } else {\r\n      jsbin.panels.panels.html.editor.focus();\r\n    }\r\n    return false;\r\n  });\r\n\r\n  }());\r\n\r\n});\ndefine('skylark-jsbin-client/chrome/file-drop',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n  function allowDrop(holder) {\r\n    var cursorPosition = null;\r\n    var panel = null;\r\n\r\n    var guid = (function() {\r\n    function s4() {\r\n      return Math.floor((1 + Math.random()) * 0x10000)\r\n        .toString(16)\r\n        .substring(1);\r\n      }\r\n      return function() {\r\n        return s4() + s4();\r\n      };\r\n    })();\r\n\r\n    function uploadAsset(file) {\r\n      var loading = document.createElement('div');\r\n      loading.className = 'assetLoading';\r\n      loading.innerHTML = '0% uploading...';\r\n      var currentStatus = 0;\r\n\r\n      var progress = function progress(percent, status) {\r\n        if (percent - currentStatus < 10) {\r\n          currentStatus = percent;\r\n        } else {\r\n          currentStatus += 10;\r\n          requestAnimationFrame(function () {\r\n            progress(percent, status);\r\n          });\r\n        }\r\n\r\n        if (loading && currentStatus > 0) {\r\n          if (currentStatus > 97) {\r\n            loading.innerHTML = '97% uploaded...';\r\n            // because there's some lag between 100% and actually rendering\r\n          } else {\r\n            loading.innerHTML = currentStatus + '% uploaded...';\r\n          }\r\n        }\r\n      };\r\n\r\n      var widget = null;\r\n      var insertPosition = cursorPosition || panel.getCursor();\r\n      if (!jsbin.lameEditor) {\r\n        var line = cursorPosition ? cursorPosition.line : panel.getCursor().line;\r\n        widget = panel.addLineWidget(line, loading, {coverGutter: false, nohscroll: true});\r\n      } else {\r\n        insertTextArea(panel, 'Uploading ...', true);\r\n      }\r\n\r\n      var s3upload = new S3Upload({\r\n        s3_sign_put_url: '/account/assets/sign',\r\n        s3_object_name: file.name.replace(/\\s+/g, '-'),\r\n        files: [file],\r\n\r\n        onProgress: function (percent, status) {\r\n          if (!jsbin.lameEditor) {\r\n            requestAnimationFrame(function () {\r\n              progress(percent, status);\r\n            });\r\n          }\r\n        },\r\n\r\n        onError: function (reason, fromServer) {\r\n          currentStatus = -1;\r\n          console.error('Failed to upload: ' + fromServer);\r\n          loading.innerHTML = fromServer || 'Failed to complete';\r\n          loading.style.color = 'red';\r\n          panel = null;\r\n          cursorPosition = null;\r\n          if (widget) {\r\n            setTimeout(function () {\r\n              widget.clear();\r\n            }, 4000);\r\n          }\r\n        },\r\n\r\n        onFinishS3Put: function (url) {\r\n          if (!jsbin.lameEditor) {\r\n            widget.clear();\r\n            panel.replaceRange(getInsertText(file.type, panel, url), insertPosition);\r\n          } else {\r\n            insertTextArea(panel, getInsertText(file.type, panel, url));\r\n            $(document).trigger('codeChange', { panelId: panel.id });\r\n          }\r\n          panel = null;\r\n          cursorPosition = null;\r\n        }\r\n      });\r\n    }\r\n\r\n    function insertTextArea(el, string, select) {\r\n      var start = el.selectionStart;\r\n      var end = el.selectionEnd;\r\n\r\n      var target = el;\r\n      var value = target.value;\r\n\r\n      // set textarea value to: text before caret + tab + text after caret\r\n      target.value = value.substring(0, start) + string + value.substring(end);\r\n\r\n      // put caret at right position again (add one for the tab)\r\n      el.selectionStart = el.selectionEnd = start + 1;\r\n\r\n      if (select) {\r\n        el.selectionStart -= 1;\r\n        el.selectionEnd = el.selectionEnd + string.length;\r\n      } else {\r\n        el.selectionStart = el.selectionEnd = start + string.length;\r\n      }\r\n    }\r\n\r\n    function getInsertText(mime, cm, url) {\r\n      // var panel = jsbin.panels.panels[cm.id];\r\n      var processor = jsbin.state.processors[cm.id];\r\n\r\n      if (cm.id === 'html') {\r\n        if (mime.indexOf('image/') === 0) {\r\n          if (processor === 'markdown') {\r\n            return '![' + url + '](' + url + ')';\r\n          }\r\n\r\n          if (processor === 'jade') {\r\n            return 'img(src=\"' + url + '\")';\r\n          }\r\n\r\n          return '<img src=\"' + url + '\">';\r\n        }\r\n\r\n        return url;\r\n      }\r\n\r\n      if (cm.id === 'css') {\r\n        if (mime.indexOf('image/') === 0) {\r\n          return 'url(' + url + ')';\r\n        }\r\n\r\n        return url;\r\n      }\r\n\r\n      // note: js just gets the url...\r\n      return url;\r\n    }\r\n\r\n    var dragging = false;\r\n\r\n    holder.ondragover = function () {\r\n      dragging = true;\r\n      return false;\r\n    };\r\n\r\n    holder.ondragend = function () {\r\n      dragging = false;\r\n      return false;\r\n    };\r\n\r\n    function getFileData(item) {\r\n      return new Promise(function (resolve, reject) {\r\n        if (item.kind === 'string') {\r\n          item.getAsString(function (filename) {\r\n            resolve(filename);\r\n          });\r\n        } else {\r\n          resolve(item.getAsFile());\r\n        }\r\n      });\r\n    }\r\n\r\n    $('#bin textarea').on('paste', function (jQueryEvent) {\r\n      if ($(this).closest('.CodeMirror').length) {\r\n        panel = $(this).closest('.CodeMirror')[0].CodeMirror;\r\n      } else {\r\n        panel = this;\r\n      }\r\n\r\n      var event = jQueryEvent.originalEvent;\r\n      var items = event.clipboardData.items;\r\n\r\n      // this means we've copied a file that's an app icon, or it's just text\r\n      // which we don't want to kick in anyway.\r\n      if (!items || event.clipboardData.types[0].indexOf('text/') === 0) {\r\n        return;\r\n      }\r\n\r\n      var file = null;\r\n      var promises = [];\r\n      for (var i = 0; i < items.length; i++) {\r\n        promises.push(getFileData(items[i]));\r\n      }\r\n\r\n      Promise.all(promises).then(function (data) {\r\n        var blobname = data.sort(function (a, b) {\r\n          return typeof a === 'string' ? 1 : -1;\r\n        });\r\n        var file = data[0];\r\n        file.name = data[1] || guid() + '.' + file.type.split('/')[1];\r\n\r\n        uploadAsset(file);\r\n      }).catch(function (error) {\r\n        console.log(error.stack);\r\n      });\r\n\r\n      // FIXME???\r\n      jQueryEvent.preventDefault();\r\n    });\r\n\r\n    $('.CodeMirror').on('mousemove', function (e) {\r\n      if (!dragging) {\r\n        return;\r\n      }\r\n\r\n      panel = this.CodeMirror;\r\n      cursorPosition = this.CodeMirror.coordsChar({ top: event.y, left: event.x });\r\n      this.CodeMirror.setCursor(cursorPosition);\r\n    });\r\n\r\n    var jstypes = ['javascript', 'coffeescript', 'coffee', 'js'];\r\n    var csstypes = ['css', 'less', 'sass', 'scss'];\r\n    var htmltypes = ['html', 'markdown', 'plain'];\r\n\r\n    holder.ondrop = function (e) {\r\n      dragging = false;\r\n      e.preventDefault();\r\n\r\n      if ($(e.target).closest('.CodeMirror').length) {\r\n        panel = $(e.target).closest('.CodeMirror')[0].CodeMirror;\r\n      } else {\r\n        panel = e.target;\r\n      }\r\n\r\n      var file = e.dataTransfer.files[0],\r\n          reader = new FileReader();\r\n\r\n      if (file.type.indexOf('text/') !== 0) {\r\n        // this isn't a text file for populating the panel, try uploading instead\r\n        uploadAsset(file);\r\n        return;\r\n      }\r\n\r\n      reader.onload = function (event) {\r\n        // put JS in the JavaScript panel\r\n        var type = file.type ? file.type.toLowerCase().replace(/^(text|application)\\//, '') : file.name.toLowerCase().replace(/.*\\./g, ''),\r\n            panelId = null,\r\n            panel = editors[panelId],\r\n            syncCode = event.target.result,\r\n            scroller = null;\r\n\r\n        if (jstypes.indexOf(type) !== -1) {\r\n          panelId = 'javascript';\r\n        } else if (csstypes.indexOf(type) !== -1) {\r\n          panelId = 'css';\r\n        } else if (htmltypes.indexOf(type) !== -1) {\r\n          panelId = 'html';\r\n        }\r\n\r\n        if (panelId === null) {\r\n          // then we have an asset upload\r\n          return uploadAsset(file);\r\n        }\r\n\r\n        panel = editors[panelId];\r\n        scroller = panel.editor.scroller;\r\n\r\n        panel.setCode(event.target.result);\r\n        panel.show();\r\n\r\n        try {\r\n          // now kick off - basically just doing a copy and paste job from @wookiehangover - thanks man! :)\r\n          var worker = new Worker(jsbin['static'] + '/js/editors/sync-worker.js');\r\n\r\n          // pass the worker the file object\r\n          worker.postMessage(file);\r\n\r\n          panel.$el.find('> .label').append('<small> (live: edit & save in your fav editor)</small>');\r\n\r\n          // bind onmessage handler\r\n          worker.onmessage = function (event) {\r\n            var top = scroller.scrollTop;\r\n            panel.setCode(event.data.body);\r\n            scroller.scrollTop = top;\r\n            syncCode = event.data.body;\r\n          };\r\n        } catch (e) {\r\n          // fail on the awesomeness...oh well\r\n        }\r\n      };\r\n\r\n      reader.readAsText(file);\r\n\r\n      return false;\r\n    };\r\n  }\r\n\r\n  // test for dnd and file api first\r\n  if (!!(window.File && window.FileList && window.FileReader)) {\r\n    allowDrop(document.body);\r\n  }\r\n});\ndefine('skylark-jsbin-client/chrome/gist',[\r\n  \"skylark-jquery\",\r\n  \"skylark-jsbin-coder/editors/panels\",\r\n   \"../jsbin\"\r\n],function ($,panels,jsbin) {\r\n    /*global $:true, jsbin:true, processors:true, $document*/\r\n    'use strict';\r\n\r\n    // Only allow gist import/export if CORS is supported\r\n    var CORS = !!('withCredentials' in new XMLHttpRequest() ||\r\n                  typeof XDomainRequest !== 'undefined');\r\n    if (!CORS) {\r\n      return $(function () {\r\n        $('#export-as-gist').remove();\r\n      });\r\n    }\r\n\r\n    var Gist = function (id) {\r\n      var gist = this,\r\n          token = '';\r\n      gist.code = {};\r\n      if (jsbin.user && jsbin.user.github_token) { // jshint ignore:line\r\n        token = '?access_token=' + jsbin.user.github_token; // jshint ignore:line\r\n      }\r\n      $.get('https://api.github.com/gists/' + id + token, function (data) {\r\n        if (!data) {return;}\r\n        $.each(data.files, function (fileName, fileData) {\r\n          var ext = fileName.split('.').slice(-1).join('');\r\n          gist.code[ext] = fileData.content;\r\n        });\r\n        gist.setCode();\r\n      });\r\n      return this;\r\n    };\r\n\r\n    Gist.prototype.setCode = function () {\r\n      var gist = this;\r\n      $.each(gist.code, function (ext, data) {\r\n        var processorInit = jsbin.processors.findByExtension(ext),\r\n            target = processorInit.target || processorInit.id,\r\n            panel = panels.named[target];\r\n        if (!panel) {return;}\r\n        processors.set(target, processorInit.id);\r\n        jsbin.saveDisabled = true;\r\n        panel.setCode(data);\r\n        jsbin.saveDisabled = false;\r\n      });\r\n    };\r\n\r\n    /**\r\n     * Export as gist\r\n     */\r\n\r\n    $('a.export-as-gist').click(function () {\r\n      var gist = {\r\n        public: true,\r\n        files: {}\r\n      };\r\n\r\n      var panels = {\r\n        html: panels.named.html.render(),\r\n        javascript: panels.named.javascript.render(),\r\n        css: panels.named.css.render()\r\n      };\r\n\r\n      Promise.all(panels).then(function (panels) { // RSVP.hash\r\n        // Build a file name\r\n        Object.keys(panels).forEach(function (key) {\r\n          var ext = processors[key].extensions ? processors[key].extensions[0] : key;\r\n          var file = ['jsbin', (jsbin.state.code || 'untitled'), ext].join('.');\r\n          if (panels[key].length) {\r\n            gist.files[file] = {\r\n              content: panels[key]\r\n            };\r\n          }\r\n        });\r\n\r\n        if (!gist.files.javascript && !gist.files.css) {\r\n          delete gist.files[['jsbin', (jsbin.state.code || 'untitled'), 'html'].join('.')]\r\n        }\r\n\r\n        if (jsbin.state.processors) {\r\n          panels.source = jsbin.state.processors;\r\n          Object.keys(panels.source).forEach(function (key) {\r\n            panels.source[key] = jsbin.panels.panels[key].getCode();\r\n          });\r\n        }\r\n\r\n        var index = binToFile(panels);\r\n\r\n        gist.files['index.html'] = {\r\n          content: index\r\n        };\r\n\r\n        var desc = [];\r\n\r\n        if (jsbin.state.title) {\r\n          desc.push(jsbin.state.title);\r\n        }\r\n\r\n        if (jsbin.state.description) {\r\n          desc.push(jsbin.state.description);\r\n        }\r\n\r\n        desc.push('// source ' + jsbin.getURL());\r\n\r\n        gist.description = desc.join('\\n\\n');\r\n\r\n        var token = '';\r\n        if (jsbin.user && jsbin.user.github_token) { // jshint ignore:line\r\n          token = '?access_token=' + jsbin.user.github_token; // jshint ignore:line\r\n        }\r\n\r\n        $.ajax({\r\n          type: 'POST',\r\n          url: 'https://api.github.com/gists' + token,\r\n          data: JSON.stringify(gist),\r\n          dataType: 'json',\r\n          crossDomain: true,\r\n          success: function (data) {\r\n            jsbin.$document.trigger('tip', {\r\n              type: 'notification',\r\n              content: 'Gist created! <a href=\"' + data.html_url + '\" target=\"_blank\">Open in new tab.</a>' // jshint ignore:line\r\n            });\r\n          },\r\n          error: function (xhr, status, error) {\r\n            jsbin.$document.trigger('tip', {\r\n              type: 'error',\r\n              content: 'There was a problem creating the gist: ' + error\r\n            });\r\n            console.group('gist');\r\n            console.log(gist);\r\n            console.groupEnd('gist');\r\n          }\r\n        });\r\n      }, function (error) {\r\n        console.error(error.stack);\r\n      });\r\n\r\n      // return false becuase there's weird even stuff going on. ask @rem.\r\n      return false;\r\n    });\r\n\r\n    return Gist;\r\n\r\n\r\n});\ndefine('skylark-jsbin-client/chrome/spinner',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n  function spinner(element) {\r\n    'use strict';\r\n    var c = element || document.createElement('canvas');\r\n    if (!c.getContext) {\r\n      return false;\r\n    }\r\n    var ctx = c.getContext('2d');\r\n\r\n    var rafID = null;\r\n\r\n    c.height = c.width = 11;\r\n\r\n    var TORADIAN = Math.PI / 180;\r\n    var w = c.width;\r\n    var h = c.height;\r\n    var deg = 0;\r\n    var r = 4;\r\n    var speed = 4;\r\n    var tailspeed = 1/7;\r\n\r\n    ctx.strokeStyle = 'rgba(0,0,0,.5)';\r\n    ctx.lineWidth = 1.5;\r\n\r\n    var last = true;\r\n    function draw() {\r\n      rafID = window.requestAnimationFrame(draw);\r\n\r\n      deg += speed;\r\n\r\n      var start = ((deg * tailspeed)) % 360; // A / TAIL\r\n      var end = deg % 360;              // B / HEAD\r\n      var flip = end === start;\r\n\r\n      if (flip) {\r\n        last = !last;\r\n        // this prevents a single blank frame when\r\n        // the start and end have the same value\r\n        start -= 1;\r\n      }\r\n\r\n      ctx.fillStyle = '#f9f9f9';\r\n      ctx.strokeStyle = '#111';\r\n      ctx.fillRect(w/2 - r*2, h/2 - r*2, r * 4, r * 4);\r\n      ctx.beginPath();\r\n      ctx.arc(w/2 + 0.5, h/2 + 0.5, r, start * TORADIAN, end * TORADIAN, last);\r\n      ctx.stroke();\r\n\r\n      ctx.strokeStyle = '#999';\r\n      ctx.beginPath();\r\n      ctx.arc(w/2 + 0.5, h/2 + 0.5, r, end * TORADIAN, start * TORADIAN, last);\r\n      ctx.stroke();\r\n\r\n      ctx.closePath();\r\n\r\n    }\r\n\r\n    return {\r\n      element: c,\r\n      start: draw,\r\n      stop: function () {\r\n        window.cancelAnimationFrame(rafID);\r\n      }\r\n    };\r\n  }\r\n\r\n  return jsbin.spinner = spinner;\r\n});\ndefine('skylark-jsbin-client/chrome/infocard',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n  if ('EventSource' in global) {\r\n    return setupInfocard()\r\n  } else {\r\n    $.getScript(jsbin['static'] + '/js/vendor/eventsource.js', setupInfocard);\r\n  }\r\n  function setupInfocard() {\r\n    /*global spinner, $, jsbin, prettyDate, EventSource, throttle, $document, analytics, throttle*/\r\n    'use strict';\r\n\r\n    // don't insert this on embeded views\r\n    if (jsbin.embed) {\r\n      return;\r\n    }\r\n\r\n    var $template = $('#infocard'); // donkey way of cloning from template\r\n    var $header = $template.find('header');\r\n    var canvas = $header.find('canvas')[0];\r\n    var s = spinner(canvas);\r\n    var htmlpanel = jsbin.panels.panels.html;\r\n    var viewers = 0;\r\n    var es = null;\r\n\r\n    var re = {\r\n      head: /<head(.*)\\n/i,\r\n      meta: /(<meta name=\"description\" content=\")([^\"]*)/im,\r\n      title: /<title>(.*)<\\/title>/im\r\n    };\r\n\r\n    if ($template.length === 0) {\r\n      return;\r\n    }\r\n\r\n\r\n\r\n    function updateStats(event, _data) {\r\n      var data = _data ? JSON.parse(_data) : JSON.parse(event.data);\r\n\r\n      if (data.connections > 0 && viewers === 0) {\r\n        $template.addClass('viewers');\r\n      }\r\n\r\n      if (viewers !== data.connections) {\r\n        var $b = $header.find('.viewers b').removeClass('up down').html('<b>' + data.connections + '<br>' + viewers + '<br>' + data.connections + '</b>'),\r\n            c = viewers > data.connections ? 'down' : 'up';\r\n        setTimeout(function () {\r\n          $b.addClass(c);\r\n        }, 0);\r\n      }\r\n\r\n      viewers = data.connections;\r\n\r\n      if (viewers === 0) {\r\n        setTimeout(function () {\r\n          $template.removeClass('viewers');\r\n        }, 250);\r\n      }\r\n\r\n    }\r\n\r\n    function listenStats(owner) {\r\n      if (window.EventSource && owner) {\r\n        // TODO use pagevisibility api to close connection\r\n        if (es) {\r\n          es.close();\r\n        }\r\n        es = new EventSource(jsbin.getURL() + '/stats?checksum=' + jsbin.state.checksum);\r\n        es.addEventListener('stats', throttle(updateStats, 1000));\r\n      }\r\n    }\r\n\r\n    function insertTag(tag) {\r\n      var cm = htmlpanel.editor;\r\n      var html = htmlpanel.getCode();\r\n\r\n      if (tag === 'meta') {\r\n        tag = 'meta name=\"description';\r\n      }\r\n\r\n\r\n      if (html.indexOf('<' + tag) === -1) {\r\n        var userhtml = getPanelText(tag === 'title' ? 'title' : 'description', '');\r\n        if (re.head.test(html)) {\r\n          html = html.replace(re.head, '<head$1\\n' + userhtml);\r\n        } else {\r\n          // slap in the top\r\n          html = userhtml + html;\r\n        }\r\n        htmlpanel.setCode(html);\r\n      }\r\n    }\r\n\r\n    function getPanelText(type, text) {\r\n      var processor = jsbin.state.processors.html;\r\n\r\n      text = text.replace(/\"/g, '&quot;');\r\n\r\n      if (type === 'title') {\r\n        if (processor === 'jade') {\r\n          return 'title ' + text + '\\n';\r\n        }\r\n\r\n        return '<title>' + text + '</title>\\n';\r\n      }\r\n\r\n      if (type === 'description') {\r\n        if (processor === 'jade') {\r\n          return 'meta(name=\"description\", content=\"' + text + '\")\\n';\r\n        }\r\n\r\n        return '<meta name=\"description\" content=\"' + text + '\">\\n';\r\n      }\r\n\r\n      return text;\r\n    }\r\n\r\n\r\n    if ($template.find('.settings')) {\r\n      $template.find('#title').on('input', function () {\r\n        insertTag('title');\r\n        var html = htmlpanel.getCode();\r\n        var value = this.value;\r\n        var result = html.replace(re.title, function (all, capture) {\r\n          return '<title>' + value.replace(/</g, '&lt;').replace(/>/g, '&gt;') + '</title>';\r\n        });\r\n        updateCode(result);\r\n        jsbin.state.updateSettings({ title: this.value });\r\n      });\r\n\r\n      $template.find('#description').on('input', function () {\r\n        insertTag('meta');\r\n        var html = htmlpanel.getCode();\r\n        var value = this.value;\r\n        var result = html.replace(re.meta, function (all, capture) {\r\n          return capture + value.replace(/\"/g, '&quot;');\r\n        });\r\n        updateCode(result);\r\n        jsbin.state.updateSettings({ description: this.value });\r\n      });\r\n    }\r\n\r\n    function updateCode(result) {\r\n      // capture selection and cursor\r\n      var state = null;\r\n      var cursor = null;\r\n      var cm = htmlpanel.editor;\r\n      var selected = cm.somethingSelected();\r\n      if (jsbin.panels.panels.html.visible) {\r\n        if (selected) {\r\n          state = cm.listSelections();\r\n        }\r\n        cursor = cm.getCursor();\r\n      }\r\n\r\n      htmlpanel.setCode(result);\r\n\r\n      // then restore\r\n      if (jsbin.panels.panels.html.visible) {\r\n        if (!jsbin.mobile) cm.setCursor(cursor);\r\n        if (selected) {\r\n          cm.setSelections(state);\r\n        }\r\n      }\r\n    }\r\n\r\n    function updateInfoCard(event) {\r\n      var meta = jsbin.state.metadata || {};\r\n      var classes = [];\r\n      var owner = false;\r\n\r\n      if (meta.name) {\r\n        $header.find('.name b').html(meta.name);\r\n        $header.find('img').attr('src', meta.avatar);\r\n        classes.push(meta.name);\r\n      }\r\n\r\n      if (jsbin.state.checksum || (jsbin.user && (meta.name === jsbin.user.name))) {\r\n        owner = true;\r\n        classes.push('author');\r\n      }\r\n\r\n      if (s) {\r\n        s.stop();\r\n      }\r\n\r\n      if (!jsbin.state.streaming || owner === true) {\r\n        $header.find('time').html(event ? 'just now' : prettyDate(meta.last_updated));\r\n      } else if (owner === false) {\r\n        $header.find('time').html('Streaming');\r\n        classes.push('streaming');\r\n        if (s) {\r\n          s.start();\r\n        }\r\n      }\r\n\r\n      if (!jsbin.checksum) {\r\n        classes.push('meta');\r\n      }\r\n\r\n      if (meta.pro) {\r\n        classes.push('pro');\r\n      }\r\n\r\n      $header.find('.visibility').text(meta.visibility);\r\n\r\n      if (meta.visibility === 'private') {\r\n        classes.push('private');\r\n      } else if (meta.visibility === 'public') {\r\n        classes.push('public');\r\n      } // TODO handle team\r\n\r\n      if (jsbin.state.code) {\r\n        $template.addClass(classes.join(' ')).parent().removeAttr('hidden');\r\n      }\r\n\r\n      if (jsbin.state.streaming) {\r\n        if (window.EventSource && owner) {\r\n          listenStats(owner);\r\n          handleVisibility(owner);\r\n          var url = jsbin.getURL();\r\n          $document.on('saved', function () {\r\n            var newurl = window.location.toString();\r\n            if (url !== newurl) {\r\n              es.close();\r\n              listenStats(owner);\r\n            }\r\n          });\r\n        } else if (jsbin.saveDisabled === true && window.location.pathname.slice(-5) === '/edit') {\r\n          $.getScript(jsbin.static + '/js/spike.js?' + jsbin.version);\r\n          $document.on('stats', throttle(updateStats, 1000));\r\n        }\r\n      }\r\n    }\r\n\r\n    function handleVisibility(owner) {\r\n      var hiddenProperty = 'hidden' in document ? 'hidden' :\r\n        'webkitHidden' in document ? 'webkitHidden' :\r\n        'mozHidden' in document ? 'mozHidden' :\r\n        null;\r\n      var visibilityStateProperty = 'visibilityState' in document ? 'visibilityState' :\r\n        'webkitVisibilityState' in document ? 'webkitVisibilityState' :\r\n        'mozVisibilityState' in document ? 'mozVisibilityState' :\r\n        null;\r\n\r\n      if (visibilityStateProperty) {\r\n        var visibilityChangeEvent = hiddenProperty.replace(/hidden/i, 'visibilitychange');\r\n        document.addEventListener(visibilityChangeEvent, function visibilityChangeEvent() {\r\n          if (document[hiddenProperty]) { // hidden\r\n            es.close();\r\n          } else {\r\n            listenStats(owner);\r\n          }\r\n        });\r\n      }\r\n    }\r\n\r\n    function initHandlers() {\r\n      $('a.more').add($header).on('mousedown touchstart', function (e) {\r\n        infocardVisible = !infocardVisible; // this is hack :-\\\r\n        hideOpen();\r\n        e.preventDefault();\r\n        analytics.infocard('click', 'no-result');\r\n        var toTrigger;\r\n        $template.toggleClass(function (index, klass) {\r\n          toTrigger = klass.indexOf('open') === -1 ? 'open' : 'close';\r\n          infocardVisible = toTrigger === 'open';\r\n          return 'open';\r\n        }).trigger(toTrigger);\r\n      });\r\n\r\n      $template.one('open', function () {\r\n        var statusCode = $('#status').data('status') || 200;\r\n        $.getJSON(jsbin.static + '/js/http-codes.json', function (codes) {\r\n          var html = '';\r\n          codes.forEach(function (code) {\r\n            html += '<option value=\"' + code.code + '\">' + code.string + '</option>';\r\n          });\r\n          $('#status').html(html).val(statusCode).on('change', function () {\r\n            jsbin.state.updateSettings({ statusCode: this.value });\r\n          });\r\n        });\r\n      }).on('close', function () {\r\n\r\n      });\r\n\r\n      function updateHeaders() {\r\n        // grab all the headers with values and send that instead\r\n        var headers = {};\r\n        $template.find('.row').each(function () {\r\n          if ($(this).find('[name=\"header-value\"]').val().trim()) {\r\n            headers[$(this).find('input:first').val()] = $(this).find('input:last').val();\r\n          }\r\n        });\r\n\r\n        jsbin.state.updateSettings({ headers: headers }, 'PUT');\r\n      }\r\n\r\n      var $headers = $template.find('#headers');\r\n      $template.on('click', '#headers button', function (event) {\r\n        event.preventDefault();\r\n        var $fields = $headers.find('span:last');\r\n        updateHeaders();\r\n\r\n        var $clones = $fields.clone(true);\r\n        $fields.before($clones);\r\n        $fields.find('input').val('').eq(0).focus();\r\n      });\r\n\r\n      $template.on('input', '.row input', function () {\r\n        updateHeaders($(this).closest('.row'));\r\n      });\r\n    }\r\n\r\n    initHandlers();\r\n    updateInfoCard();\r\n    $document.bind('saved', updateInfoCard);\r\n  }\r\n});\r\n\ndefine('skylark-jsbin-client/chrome/last-bin',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n  'use strict';\r\n\r\n  function getExpires() {\r\n    var d = new Date();\r\n\r\n    // expires in 1 hour from now\r\n    d.setTime(+d + 1000 * 60 * 60);\r\n    return d.toUTCString();\r\n  }\r\n\r\n  function save() {\r\n    var url = window.location.href;\r\n    if (url) {\r\n      document.cookie = 'last=' + encodeURIComponent(url) + '; expires=' + getExpires() + '; path=/';\r\n    } else {\r\n      // expire cookie\r\n      document.cookie = 'last=\"\"; expires=-1; path=/';\r\n    }\r\n  }\r\n\r\n  function readCookie(name) {\r\n    var nameEQ = name + '=';\r\n    var ca = document.cookie.split(';');\r\n    for(var i=0;i < ca.length;i++) {\r\n      var c = ca[i];\r\n      while (c.charAt(0)==' ') c = c.substring(1,c.length);\r\n      if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);\r\n    }\r\n    return null;\r\n  }\r\n\r\n  function updateBackButton() {\r\n    var el = document.getElementById('back');\r\n    var back = readCookie('last');\r\n\r\n    if (el && back !== null && back !== '%2Fedit') {\r\n      el.href = decodeURIComponent(back);\r\n    }\r\n  }\r\n\r\n  // save the bin url when the bin is saved, changed and when we load first time\r\n  if (jsbin && jsbin.getURL) {\r\n    $document.on('saved', save);\r\n    save();\r\n  } else {\r\n    updateBackButton();\r\n  }\r\n});\ndefine('skylark-jsbin-client/chrome/archive',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\",\r\n   \"./analytics\"\r\n],function ($,jsbin,analytics) {\r\n  function archive(unarchive) {\r\n    /*global jsbin, $, $document, analytics*/\r\n    'use strict';\r\n    var type = unarchive === false ? 'unarchive' : 'archive';\r\n    var text = unarchive === false ? 'restore from archive' : 'archiving';\r\n    analytics[type](jsbin.getURL({ withRevision: true }));\r\n    if (!jsbin.user.name) {\r\n      jsbin.$document.trigger('tip', {\r\n        type: 'notication',\r\n        content: 'You must be logged in and the owner of the bin to archive.'\r\n      });\r\n    } else if (jsbin.owner()) {\r\n      $.ajax({\r\n        type: 'POST',\r\n        url: jsbin.getURL({ withRevision: true }) + '/' + type,\r\n        error: function () {\r\n          $document.trigger('tip', {\r\n            type: 'error',\r\n            content: 'The ' + text + ' failed. If this continues, please can you file an issue?'\r\n          });\r\n        },\r\n        success: function () {\r\n          jsbin.state.metadata.archive = unarchive !== false;\r\n          updateArchiveMenu();\r\n          $document.trigger('tip', {\r\n            type: 'notication',\r\n            autohide: 5000,\r\n            content: 'This bin is now ' + (unarchive === false ? 'restored from the archive.' : 'archived.')\r\n          });\r\n        }\r\n      });\r\n    } else {\r\n      jsbin.$document.trigger('tip', {\r\n        type: 'notication',\r\n        content: 'The ' + text + ' failed. You can only archive bins that you own.'\r\n      });\r\n    }\r\n  }\r\n\r\n  function updateArchiveMenu() {\r\n    if (jsbin.state.metadata && jsbin.state.metadata.archive) {\r\n      $('a.archivebin').hide();\r\n      $('a.unarchivebin').show();\r\n    } else {\r\n      $('a.archivebin').show();\r\n      $('a.unarchivebin').hide();\r\n    }\r\n  }\r\n\r\n  updateArchiveMenu();\r\n\r\n  return jsbin.archive = archive;\r\n});\ndefine('skylark-jsbin-client/chrome/transfer',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n   var $transfers = $('a.transfer').on('click', function (event) {\r\n      event.preventDefault();\r\n      var to = prompt('Enter the username to transfer this bin to');\r\n      to = (to || '').trim().toLowerCase();\r\n\r\n      if (to.length) {\r\n        $.ajax({\r\n          url: jsbin.getURL({ withRevision: true }) + '/transfer',\r\n          method: 'post',\r\n          data: {\r\n            to: to,\r\n            _csrf: jsbin.state.token,\r\n          },\r\n          success: function () {\r\n            window.location.reload();\r\n          },\r\n          error: function (e) {\r\n            console.log(e);\r\n            if (e.status === 403) {\r\n              alert('This bin cannot be transferred as you do not own it.');\r\n            } else if (e.status === 400) {\r\n              alert('The user \"' + to + '\" couldn\\'t be found, sorry.');\r\n            } else {\r\n              alert('Failed to transfer bin');\r\n            }\r\n          }\r\n        });\r\n      }\r\n\r\n    });\r\n\r\n    var updateTransfer = function () {\r\n      if (jsbin.owner()) {\r\n        $transfers.show();\r\n      } else {\r\n        $transfers.hide();\r\n      }\r\n    }\r\n\r\n    ///updateTransfer();\r\n\r\n    return updateTransfer;\r\n});\ndefine('skylark-jsbin-client/chrome/welcome-panel',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\",\r\n   \"./analytics\"\r\n],function ($,jsbin,analytics) {\r\n    /*global jsbin, $, $body, $document, analytics, settings*/\r\n    'use strict';\r\n\r\n    if (!$('#toppanel').length) {\r\n      return;\r\n    }\r\n\r\n    if (jsbin.settings.gui === undefined) {\r\n      jsbin.settings.gui = {};\r\n    }\r\n    if (jsbin.settings.gui.toppanel === undefined) {\r\n      jsbin.settings.gui.toppanel = true;\r\n      store.localStorage.setItem('settings', JSON.stringify(jsbin.settings));\r\n    }\r\n\r\n    if ($body.hasClass('toppanel') && jsbin.settings.gui.toppanel === false) {\r\n      $body.addClass('toppanel-close');\r\n      $body.removeClass('toppanel');\r\n    }\r\n\r\n    // analytics for panel state\r\n    analytics.welcomePanelState(jsbin.settings.gui.toppanel);\r\n\r\n    var removeToppanel = function() {\r\n      jsbin.settings.gui.toppanel = false;\r\n      settings.save();\r\n      $body.addClass('toppanel-close');\r\n      $body.removeClass('toppanel');\r\n\r\n      // $document.trigger('sizeeditors');\r\n    };\r\n\r\n    var showToppanel = function() {\r\n      jsbin.settings.gui.toppanel = true;\r\n      settings.save();\r\n      $body.removeClass('toppanel-close');\r\n      $body.addClass('toppanel');\r\n    };\r\n\r\n    var goSlow = function(e) {\r\n      $body.removeClass('toppanel-slow');\r\n      if (e.shiftKey) {\r\n        $body.addClass('toppanel-slow');\r\n      }\r\n    };\r\n\r\n    $('.toppanel-logo').on('webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend', function(e) {\r\n      $document.trigger('sizeeditors');\r\n    });\r\n\r\n    $('.toppanel-hide').click(function(event) {\r\n      event.preventDefault();\r\n      goSlow(event);\r\n      removeToppanel();\r\n    });\r\n    $('.toppanel-logo').click(function(event) {\r\n      event.preventDefault();\r\n      goSlow(event);\r\n      showToppanel();\r\n    });\r\n    // $document.keydown(function (event) {\r\n    //   if (event.which === 27) {\r\n    //     if ($body.hasClass('toppanel')) {\r\n    //       removeToppanel();\r\n    //     }\r\n    //   }\r\n    // });\r\n\r\n    function shuffle(array) {\r\n      var m = array.length, t, i;\r\n\r\n      // While there remain elements to shuffle...\r\n      while (m) {\r\n\r\n        // Pick a remaining element...\r\n        i = Math.floor(Math.random() * m--);\r\n\r\n        // And swap it with the current element.\r\n        t = array[m];\r\n        array[m] = array[i];\r\n        array[i] = t;\r\n      }\r\n\r\n      return array;\r\n    }\r\n\r\n    $.ajax({\r\n      // tries to cache once a day\r\n      url: '/blog/all.json?' + (new Date()).toString().split(' ').slice(0, 4).join('-'),\r\n      dataType: 'json',\r\n      cache: true,\r\n      success: function (data) {\r\n        var blogpost = data.blog[0];\r\n        // this is daft, but it means that the landing page is the same\r\n        // for all, and ensures that blog comments end up on a single place\r\n        var root = jsbin.root.replace(/^https/, 'http');\r\n        $('.toppanel-blog ul').html('<li><a href=\"' + root + '/' + blogpost.slug + '\" target=\"_blank\" class=\"toppanel-link\">' + blogpost.title.replace(/TWDTW.*:\\s/, '') + '</a></li>');\r\n\r\n        var last = null;\r\n        var count = 1;\r\n        try {\r\n          last = store.localStorage.getItem('lastpost') || null;\r\n        } catch (e) {}\r\n\r\n        if (last !== null) {\r\n          last *= 1;\r\n          if (last < blogpost.timestamp) {\r\n            count = data.blog.reduce(function (prev, current) {\r\n              if (last < current.timestamp) {\r\n                return prev + 1;\r\n              }\r\n              return prev;\r\n            }, 0);\r\n          } else {\r\n            count = 0;\r\n          }\r\n        }\r\n\r\n        if (count) {\r\n          $('.blog a').attr('href', root + '/' + data.blog[count-1].slug).attr('data-count', count).on('click', function () {\r\n            // this is a weird hack work around to try to clear the storage\r\n            // item that says which was the last post viewed. so we update\r\n            // the timestamp when the user clicks the link, because we know\r\n            // they'll land on the latest post\r\n            try {\r\n              localStorage.lastpost = data.blog[count-1].timestamp;\r\n            } catch (e) {}\r\n          });\r\n        }\r\n\r\n        var help = shuffle(data.help);\r\n\r\n        $('.toppanel-help ul').html('<li><a href=\"' + root + '/' + help[0].slug + '\" target=\"_blank\" class=\"toppanel-link\">' + help[0].title + '</a></li><li><a href=\"' + root + '/' + help[1].slug + '\" target=\"_blank\" class=\"toppanel-link\">' + help[1].title + '</a></li>');\r\n\r\n      }\r\n    })\r\n\r\n    // analytics for links\r\n    $('#toppanel').find('.toppanel-link').mousedown(function() {\r\n      analytics.welcomePanelLink(this.href);\r\n    });\r\n\r\n });\ndefine('skylark-jsbin-client/chrome/help-search',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\"\r\n],function ($,jsbin) {\r\n\r\n    'use strict';\r\n    var results = $('#results');\r\n    var resultCount = $('#result-count');\r\n    var searchTerms = [];\r\n    var search = $('#helpsearch');\r\n    var position = -1;\r\n\r\n    search.on('input', throttle(function () {\r\n      if (searchTerms.length === 0) {\r\n        $.ajax({\r\n          url: '/help/search.json?' + (new Date()).toString().split(' ').slice(0, 4).join('-'),\r\n          dataType: 'json',\r\n          cache: true,\r\n          success: function (data) {\r\n            searchTerms = data;\r\n            searchFor(this.value, searchTerms);\r\n          }.bind(this)\r\n        });\r\n      } else {\r\n        searchFor(this.value, searchTerms);\r\n      }\r\n      position = -1;\r\n    }, 200));\r\n\r\n    // document.documentElement.addEventListener('click', function (event) {\r\n    //   if (event.target.id === 'search' || event.target.id === 'results') {\r\n\r\n    //   } else {\r\n    //     resultsEl.hidden = true;\r\n    //   }\r\n    // });\r\n\r\n    results.on('mousemove', function () {\r\n      if (position !== -1) {\r\n        results.children().remove('highlight');\r\n        position = -1;\r\n      }\r\n    });\r\n\r\n    search.on('keydown', function (event) {\r\n      var key = event.which;\r\n      if (key === 38 || key === 40) { // up / down\r\n        event.preventDefault();\r\n        var inc = 1;\r\n        if (key === 38) {\r\n          inc = -1;\r\n        }\r\n\r\n        position += inc;\r\n\r\n        var children = results.children();\r\n\r\n        var length = children.length;\r\n        children.removeClass('hover');\r\n\r\n        if (position < 0) {\r\n          position = length - 1;\r\n        } else if (position > length - 1) {\r\n          position = 0;\r\n        }\r\n\r\n        children.eq(position).addClass('hover');\r\n      } else if (key === 13) { // select\r\n        var url = results.find('.hover')[0];\r\n        if (url) {\r\n          window.open(url.href);\r\n          // window.location = url.href;\r\n        }\r\n      }\r\n    });\r\n\r\n    // search.on('focus', function () {\r\n    //   results.hide();\r\n    // });\r\n\r\n    function wordmap(input) {\r\n      var ignore = \"a an and on in it of if for the i is i'm i'd it's or to me be not was do so at are what bin bins\".split(' ');\r\n\r\n      var endings = 'ing ly lies s';\r\n      var endingRe = new RegExp('(' + endings.split(' ').join('|') + ')$');\r\n\r\n      return (input||'')\r\n        //- strip html\r\n        .replace(/(<([^>]+)>)/ig,'')\r\n        //- strip non-letters\r\n        .replace(/\\W/g, ' ').replace(/[\"'\\.,]/g, '')\r\n        //- turn in to array of lower case words\r\n        .toLowerCase().split(' ')\r\n        //- filter out ignored words\r\n        .filter(function (word) {\r\n          return ignore.indexOf(word.trim()) === -1;\r\n        }).filter(function (e, i, words) {\r\n          //- return unique\r\n          return words.lastIndexOf(e) === i;\r\n        }).filter(function (word) {\r\n          //- return words 3 chars or longer\r\n          return word.length > 2;\r\n        }).map(function (word) {\r\n          return word.trim().replace(endingRe, '');\r\n        }).sort();\r\n    }\r\n\r\n    function searchFor(needles, haystack) {\r\n      'use strict';\r\n      needles = wordmap(needles);\r\n      var matches = haystack.map(function (data) {\r\n        var matches = needles.filter(function (needle) {\r\n          return data.words.indexOf(needle) !== -1;\r\n        }).length;\r\n\r\n        return {\r\n          type: data.type,\r\n          title: data.title,\r\n          slug: data.slug,\r\n          category: data.category,\r\n          matches: matches\r\n        };\r\n      }).filter(function (data) {\r\n        return data.matches > 0;\r\n      }).sort(function (a, b) {\r\n        return b.matches - a.matches;\r\n      });\r\n\r\n      results.html(matches.map(function (result) {\r\n        return '<a target=\"_blank\" class=\"button\" href=\"/' + result.slug + '\">' + result.title + (result.type === 'blog' ? ' (blog)' : '') + '</a>';\r\n      }).join('\\n'));\r\n\r\n      results.show();\r\n      var s = '';\r\n      if (matches.length !== 1) {\r\n        s = 's';\r\n      }\r\n      resultCount.html(matches.length + ' result' + s);\r\n    }\r\n\r\n\r\n});\r\n\ndefine('skylark-jsbin-client/chrome/app',[\r\n  \"skylark-jquery\",\r\n   \"../jsbin\",\r\n   \"./gist\",\r\n   \"./analytics\"\r\n],function ($,jsbin,Gist,analytics) {\r\n  // if a gist has been requested, lazy load the gist library and plug it in\r\n  if (/gist\\/.*/.test(window.location.pathname)) {\r\n    window.editors = editors; // needs to be global when the callback triggers to set the content\r\n    loadGist = function () {\r\n      window.gist = new Gist(window.location.pathname.replace(/.*\\/([^/]+)$/, \"$1\"));\r\n    };\r\n\r\n    if (editors.ready) {\r\n      loadGist();\r\n    } else {\r\n      $document.on('jsbinReady', loadGist);\r\n    }\r\n  }\r\n\r\n  // prevent the app from accidently getting scrolled out of view\r\n  if (!jsbin.mobile) {\r\n    document.body.onscroll = window.onscroll = function () {\r\n      if (document.body.scrollTop !== 0) {\r\n        window.scrollTo(0,0);\r\n      }\r\n      return false;\r\n    };\r\n  }\r\n\r\n  window.CodeMirror = CodeMirror; // fix to allow code mirror to break naturally\r\n\r\n  // These are keys that CodeMirror (and Emmet) should never take over\r\n  // ref: https://gist.github.com/rodneyrehm/5213304\r\n  if (CodeMirror.keyMap && CodeMirror.keyMap['default']) {\r\n    var cmd = $.browser.platform === 'mac' ? 'Cmd' : 'Ctrl';\r\n    delete CodeMirror.keyMap['default'][cmd + '-L'];\r\n    delete CodeMirror.keyMap['default'][cmd + '-T'];\r\n    delete CodeMirror.keyMap['default'][cmd + '-W'];\r\n    delete CodeMirror.keyMap['default'][cmd + '-J'];\r\n    delete CodeMirror.keyMap['default'][cmd + '-R'];\r\n  }\r\n\r\n  // var link = document.createElement('link');\r\n  // link.rel = 'stylesheet';\r\n  // link.href = jsbin['static'] + '/css/font.css?' + jsbin.version;\r\n  // link.type = 'text/css';\r\n  // document.getElementsByTagName('head')[0].appendChild(link);\r\n\r\n  if (jsbin.embed) {\r\n    analytics.embed();\r\n  }\r\n\r\n});\ndefine('skylark-jsbin-client/main',[\r\n\t\"skylark-jsbin-coder\",\r\n\t\"./jsbin\",\r\n    \"./chrome/font\",\r\n    \"./chrome/splitter\",\r\n    \"./chrome/analytics\",\r\n    \"./chrome/settings\",\r\n    \"./render/saved-history-preview\",\r\n    \"./chrome/esc\",\r\n    \"./chrome/share\",\r\n    \"./chrome/issue\",\r\n    \"./chrome/download\",\r\n    \"./chrome/login\",\r\n    \"./chrome/tips\",\r\n    \"./chrome/keys\",\r\n    \"./chrome/save\",\r\n    \"./chrome/navigation\",\r\n    \"./chrome/file-drop\",\r\n    \"./chrome/gist\",\r\n    \"./chrome/spinner\",\r\n    \"./chrome/infocard\",\r\n    \"./chrome/last-bin\",\r\n    \"./chrome/archive\",\r\n    \"./chrome/transfer\",\r\n    \"./chrome/welcome-panel\",\r\n    \"./chrome/help-search\",\r\n    \"./chrome/app\"\r\n\r\n],function(coder,jsbin){\r\n\treturn jsbin;\r\n});\ndefine('skylark-jsbin-client', ['skylark-jsbin-client/main'], function (main) { return main; });\n\n"]}